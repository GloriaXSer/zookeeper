Testsuite: org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 30.162 sec
------------- Standard Output ---------------
2018-06-28 17:52:50,248 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testAuthLearnerAgainstNullAuthServer
2018-06-28 17:52:50,256 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testAuthLearnerAgainstNullAuthServer
2018-06-28 17:52:50,257 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11221
2018-06-28 17:52:50,258 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11222
2018-06-28 17:52:50,258 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11223
2018-06-28 17:52:50,258 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11224
2018-06-28 17:52:50,258 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11225
2018-06-28 17:52:50,258 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11226
2018-06-28 17:52:50,260 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 0 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8718746448043755375.junit.dir clientPort = 11221
2018-06-28 17:52:50,263 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 1 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7851930567033041262.junit.dir clientPort = 11224
2018-06-28 17:52:50,266 [myid:] - INFO  [Thread-0:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8718746448043755375.junit.dir/zoo.cfg
2018-06-28 17:52:50,266 [myid:] - INFO  [Thread-1:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7851930567033041262.junit.dir/zoo.cfg
2018-06-28 17:52:50,266 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:52:50,278 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11221 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:52:50,286 [myid:] - INFO  [Thread-1:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:50,286 [myid:] - INFO  [Thread-0:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:50,286 [myid:] - INFO  [Thread-1:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:50,288 [myid:] - INFO  [Thread-0:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:50,288 [myid:] - WARN  [Thread-1:QuorumPeerConfig@351] - No server failure will be tolerated. You need at least 3 servers.
2018-06-28 17:52:50,288 [myid:] - WARN  [Thread-0:QuorumPeerConfig@351] - No server failure will be tolerated. You need at least 3 servers.
2018-06-28 17:52:50,288 [myid:] - INFO  [Thread-1:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:50,288 [myid:] - INFO  [Thread-0:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:50,293 [myid:1] - INFO  [Thread-1:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:50,293 [myid:0] - INFO  [Thread-0:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:50,293 [myid:0] - INFO  [Thread-0:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:50,293 [myid:0] - INFO  [Thread-0:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:50,293 [myid:1] - INFO  [Thread-1:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:50,294 [myid:1] - INFO  [Thread-1:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:50,380 [myid:0] - ERROR [Thread-0:LoggerDynamicMBean@270] - Could not add appenderMBean for [CONSOLE].
javax.management.InstanceAlreadyExistsException: log4j:appender=CONSOLE
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.LoggerDynamicMBean.registerAppenderMBean(LoggerDynamicMBean.java:264)
	at org.apache.log4j.jmx.LoggerDynamicMBean.appenderMBeanRegistration(LoggerDynamicMBean.java:252)
	at org.apache.log4j.jmx.LoggerDynamicMBean.postRegister(LoggerDynamicMBean.java:280)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.addLoggerMBean(HierarchyDynamicMBean.java:125)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.postRegister(HierarchyDynamicMBean.java:263)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:50,382 [myid:1] - INFO  [Thread-1:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:50,382 [myid:0] - ERROR [Thread-0:HierarchyDynamicMBean@138] - Could not add loggerMBean for [root].
javax.management.InstanceAlreadyExistsException: log4j:logger=root
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.log4j.jmx.AbstractDynamicMBean.registerMBean(AbstractDynamicMBean.java:160)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.addLoggerMBean(HierarchyDynamicMBean.java:125)
	at org.apache.log4j.jmx.HierarchyDynamicMBean.postRegister(HierarchyDynamicMBean.java:263)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegister(DefaultMBeanServerInterceptor.java:1024)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:974)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:50,383 [myid:0] - WARN  [Thread-0:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:50,384 [myid:0] - INFO  [Thread-0:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:50,392 [myid:0] - INFO  [Thread-0:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:50,392 [myid:1] - INFO  [Thread-1:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:50,405 [myid:0] - INFO  [Thread-0:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11221
2018-06-28 17:52:50,411 [myid:1] - INFO  [Thread-1:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11224
2018-06-28 17:52:50,423 [myid:1] - INFO  [Thread-1:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:50,423 [myid:0] - INFO  [Thread-0:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:50,423 [myid:1] - INFO  [Thread-1:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:50,423 [myid:0] - INFO  [Thread-0:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:50,424 [myid:1] - INFO  [Thread-1:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:50,424 [myid:1] - INFO  [Thread-1:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:50,424 [myid:0] - INFO  [Thread-0:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:50,424 [myid:0] - INFO  [Thread-0:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:50,438 [myid:1] - INFO  [Thread-1:QuorumPeer@1467] - QuorumPeer communication is not secured!
2018-06-28 17:52:50,438 [myid:0] - INFO  [Thread-0:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:52:50,438 [myid:1] - INFO  [Thread-1:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:50,438 [myid:0] - INFO  [Thread-0:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:52:50,439 [myid:0] - INFO  [Thread-0:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to false
2018-06-28 17:52:50,439 [myid:0] - INFO  [Thread-0:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:52:50,439 [myid:0] - INFO  [Thread-0:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:52:50,439 [myid:0] - INFO  [Thread-0:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:52:50,439 [myid:0] - INFO  [Thread-0:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:50,442 [myid:1] - INFO  [Thread-1:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:50,444 [myid:1] - INFO  [Thread-1:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:50,445 [myid:0] - INFO  [Thread-0:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:52:50,448 [myid:0] - INFO  [Thread-0:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:52:50,448 [myid:0] - INFO  [Thread-0:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:50,449 [myid:1] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11226
2018-06-28 17:52:50,449 [myid:0] - INFO  [Thread-0:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:50,455 [myid:0] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11223
2018-06-28 17:52:50,462 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer@909] - LOOKING
2018-06-28 17:52:50,462 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@909] - LOOKING
2018-06-28 17:52:50,464 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:52:50,464 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:52:50,466 [myid:0] - INFO  [localhost/127.0.0.1:11223:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53362
2018-06-28 17:52:50,466 [myid:1] - INFO  [localhost/127.0.0.1:11226:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53363
2018-06-28 17:52:50,467 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:50,469 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:50,469 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:52:50,476 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:50,477 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:50,477 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:50,478 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:50,478 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:50,531 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:52:50,535 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53364
2018-06-28 17:52:50,546 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ServerCnxn@324] - The list of known four letter word commands is : [{1936881266=srvr, 1937006964=stat, 2003003491=wchc, 1685417328=dump, 1668445044=crst, 1936880500=srst, 1701738089=envi, 1668247142=conf, 2003003507=wchs, 2003003504=wchp, 1668247155=cons, 1835955314=mntr, 1769173615=isro, 1920298859=ruok, 1735683435=gtmk, 1937010027=stmk}]
2018-06-28 17:52:50,546 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ServerCnxn@325] - The list of enabled four letter word commands is : [[wchs, stat, wchp, stmk, conf, ruok, mntr, srvr, wchc, envi, srst, isro, dump, gtmk, crst, cons]]
2018-06-28 17:52:50,546 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53364
2018-06-28 17:52:50,548 [myid:0] - INFO  [Thread-3:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53364 (no session established for client)
2018-06-28 17:52:50,679 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:50,679 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer@991] - LEADING
2018-06-28 17:52:50,683 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@64] - TCP NoDelay set to: true
2018-06-28 17:52:50,686 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@86] - TCP NoDelay set to: true
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:host.name=10.0.0.10
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.version=1.8.0_172
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.vendor=Oracle Corporation
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.class.path=/Users/hanm/Desktop/projects/git/apache/zookeeper/build/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ant-eclipse-1.0-jvm1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ivy-2.4.0.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr-2.7.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-annotations-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-runtime-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-api-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-avl-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-constants-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-i18n-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-event-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm1-2.0.0-M2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-ldif-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-all-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-ber-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-i18n-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-client-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-codec-core-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-aci-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-sp-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-model-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/audience-annotations-0.5.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/bcprov-jdk15-140.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/checkstyle-6.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-beanutils-core-1.8.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-cli-1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-collections-3.2.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-io-2.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-lang-2.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-logging-1.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-pool-1.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/ehcache-core-2.4.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/guava-18.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-all-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-core-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/jline-0.9.94.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/junit-4.12.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/log4j-1.2.17.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mavibot-1.0.0-M1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mina-core-2.0.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mockito-all-1.8.5.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/netty-3.10.6.Final.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/org.abego.treelayout.core-1.0.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-api-1.7.25.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-log4j12-1.7.25.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-launcher.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit4.jar
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.library.path=/Users/hanm/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.io.tmpdir=/var/folders/wv/j6wmf1nj5h7c36qz9b81kmfw0000gn/T/
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.compiler=<NA>
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:os.name=Mac OS X
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:os.arch=x86_64
2018-06-28 17:52:50,694 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:os.version=10.13.5
2018-06-28 17:52:50,695 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:user.name=hanm
2018-06-28 17:52:50,695 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:user.home=/Users/hanm
2018-06-28 17:52:50,695 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:user.dir=/Users/hanm/Desktop/projects/git/apache/zookeeper
2018-06-28 17:52:50,697 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8718746448043755375.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8718746448043755375.junit.dir/data/version-2
2018-06-28 17:52:50,697 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7851930567033041262.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7851930567033041262.junit.dir/data/version-2
2018-06-28 17:52:50,697 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 234
2018-06-28 17:52:50,699 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:50,699 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@380] - LEADING - LEADER ELECTION TOOK - 236
2018-06-28 17:52:50,699 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:50,707 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53365:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@4b8494de
2018-06-28 17:52:50,709 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53365:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:52:50,710 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53365:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:52:50,710 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53365:LearnerHandler@475] - Sending DIFF
2018-06-28 17:52:50,710 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:52:50,714 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53365:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:52:50,714 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@964] - Have quorum of supporters, sids: [ 0,1 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:52:50,800 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:52:50,801 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53366
2018-06-28 17:52:50,802 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53366
2018-06-28 17:52:50,804 [myid:0] - INFO  [Thread-5:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:50,804 [myid:0] - INFO  [Thread-5:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53366 (no session established for client)
2018-06-28 17:52:50,804 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11224
2018-06-28 17:52:50,805 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11224:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53367
2018-06-28 17:52:50,805 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11224:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53367
2018-06-28 17:52:50,806 [myid:1] - INFO  [Thread-6:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:50,806 [myid:1] - INFO  [Thread-6:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53367 (no session established for client)
2018-06-28 17:52:50,812 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT
2018-06-28 17:52:50,812 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:host.name=10.0.0.10
2018-06-28 17:52:50,812 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.version=1.8.0_172
2018-06-28 17:52:50,812 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.vendor=Oracle Corporation
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.class.path=/Users/hanm/Desktop/projects/git/apache/zookeeper/build/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ant-eclipse-1.0-jvm1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ivy-2.4.0.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr-2.7.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-annotations-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-runtime-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-api-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-avl-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-constants-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-i18n-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-event-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm1-2.0.0-M2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-ldif-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-all-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-ber-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-i18n-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-client-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-codec-core-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-aci-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-sp-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-model-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/audience-annotations-0.5.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/bcprov-jdk15-140.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/checkstyle-6.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-beanutils-core-1.8.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-cli-1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-collections-3.2.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-io-2.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-lang-2.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-logging-1.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-pool-1.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/ehcache-core-2.4.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/guava-18.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-all-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-core-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/jline-0.9.94.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/junit-4.12.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/log4j-1.2.17.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mavibot-1.0.0-M1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mina-core-2.0.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mockito-all-1.8.5.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/netty-3.10.6.Final.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/org.abego.treelayout.core-1.0.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-api-1.7.25.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-log4j12-1.7.25.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-launcher.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit4.jar
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.library.path=/Users/hanm/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.io.tmpdir=/var/folders/wv/j6wmf1nj5h7c36qz9b81kmfw0000gn/T/
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.compiler=<NA>
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:os.name=Mac OS X
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:os.arch=x86_64
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:os.version=10.13.5
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:user.name=hanm
2018-06-28 17:52:50,813 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:user.home=/Users/hanm
2018-06-28 17:52:50,814 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:user.dir=/Users/hanm/Desktop/projects/git/apache/zookeeper
2018-06-28 17:52:50,815 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11221,127.0.0.1:11224 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@3810a003
2018-06-28 17:52:50,832 [myid:] - WARN  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:52:50,834 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11221
2018-06-28 17:52:50,835 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53368
2018-06-28 17:52:50,836 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11221, initiating session
2018-06-28 17:52:50,838 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:53368
2018-06-28 17:52:50,842 [myid:1] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:52:50,842 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:52:50,842 [myid:0] - INFO  [SyncThread:0:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:52:50,853 [myid:0] - INFO  [CommitProcessor:0:ZooKeeperServer@694] - Established session 0x65f51770000 with negotiated timeout 30000 for client /127.0.0.1:53368
2018-06-28 17:52:50,853 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11221, sessionid = 0x65f51770000, negotiated timeout = 30000
2018-06-28 17:52:50,870 [myid:1] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x65f51770000
2018-06-28 17:52:50,871 [myid:] - INFO  [Time-limited test:ZooKeeper@693] - Session: 0x65f51770000 closed
2018-06-28 17:52:50,871 [myid:] - INFO  [Time-limited test-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x65f51770000
2018-06-28 17:52:50,871 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 12758
2018-06-28 17:52:50,871 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 34
2018-06-28 17:52:50,871 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53368 which had sessionid 0x65f51770000
2018-06-28 17:52:50,871 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testAuthLearnerAgainstNullAuthServer
2018-06-28 17:52:50,873 [myid:] - INFO  [main:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221
2018-06-28 17:52:50,873 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdownAll(QuorumAuthTestBase.java:233)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.tearDown(QuorumAuthUpgradeTest.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:52:50,874 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:50,874 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:50,874 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:50,874 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:52:50,874 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:50,874 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:50,874 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:50,875 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:50,875 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:50,876 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:52:50,876 [myid:0] - ERROR [localhost/127.0.0.1:11223:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:52:50,876 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:50,877 [myid:] - INFO  [main:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221
2018-06-28 17:52:50,877 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:50,877 [myid:] - INFO  [main:QuorumBase@315] - Waiting for QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221 to exit thread
2018-06-28 17:52:50,877 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:50,876 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:50,877 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:50,877 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:50,878 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:50,878 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:51,877 [myid:0] - INFO  [localhost/127.0.0.1:11223:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:52:52,736 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:52,736 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:52,736 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:52,737 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:52:52,741 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testAuthLearnerAgainstNullAuthServer
2018-06-28 17:52:52,741 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testAuthLearnerAgainstNullAuthServer
2018-06-28 17:52:52,745 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testRollingUpgrade
2018-06-28 17:52:52,745 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testRollingUpgrade
2018-06-28 17:52:52,745 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11227
2018-06-28 17:52:52,746 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11228
2018-06-28 17:52:52,746 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11229
2018-06-28 17:52:52,746 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11230
2018-06-28 17:52:52,746 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11231
2018-06-28 17:52:52,746 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11232
2018-06-28 17:52:52,746 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11233
2018-06-28 17:52:52,746 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11234
2018-06-28 17:52:52,747 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11235
2018-06-28 17:52:52,747 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 0 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8955772701919279616.junit.dir clientPort = 11227
2018-06-28 17:52:52,748 [myid:] - INFO  [Thread-7:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8955772701919279616.junit.dir/zoo.cfg
2018-06-28 17:52:52,749 [myid:] - INFO  [Thread-7:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,749 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 1 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8839340858586823739.junit.dir clientPort = 11230
2018-06-28 17:52:52,749 [myid:] - INFO  [Thread-7:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,749 [myid:] - INFO  [Thread-7:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,749 [myid:] - INFO  [Thread-7:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:52,749 [myid:0] - INFO  [Thread-7:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:52,749 [myid:0] - INFO  [Thread-7:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:52,749 [myid:0] - INFO  [Thread-7:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:52,750 [myid:] - INFO  [Thread-8:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8839340858586823739.junit.dir/zoo.cfg
2018-06-28 17:52:52,750 [myid:0] - WARN  [Thread-7:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:52,750 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 2 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4998786255927989485.junit.dir clientPort = 11233
2018-06-28 17:52:52,750 [myid:] - INFO  [Thread-8:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,750 [myid:0] - INFO  [Thread-7:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:52,750 [myid:] - INFO  [Thread-8:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,750 [myid:0] - INFO  [Thread-7:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:52,751 [myid:] - INFO  [Thread-8:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,751 [myid:] - INFO  [Thread-8:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:52,751 [myid:0] - INFO  [Thread-7:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 17:52:52,751 [myid:1] - INFO  [Thread-8:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:52,751 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:52:52,751 [myid:0] - INFO  [Thread-7:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:52,751 [myid:] - INFO  [Thread-9:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4998786255927989485.junit.dir/zoo.cfg
2018-06-28 17:52:52,751 [myid:1] - INFO  [Thread-8:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:52,751 [myid:0] - INFO  [Thread-7:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:52,751 [myid:] - INFO  [Thread-9:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,751 [myid:1] - INFO  [Thread-8:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:52,752 [myid:] - INFO  [Thread-9:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,752 [myid:0] - INFO  [Thread-7:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:52,752 [myid:] - INFO  [Thread-9:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,752 [myid:1] - WARN  [Thread-8:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:52,752 [myid:0] - INFO  [Thread-7:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:52,752 [myid:1] - INFO  [Thread-8:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:52,752 [myid:] - INFO  [Thread-9:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:52,752 [myid:0] - INFO  [Thread-7:QuorumPeer@1467] - QuorumPeer communication is not secured!
2018-06-28 17:52:52,753 [myid:1] - INFO  [Thread-8:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:52,753 [myid:2] - INFO  [Thread-9:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:52,753 [myid:2] - INFO  [Thread-9:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:52,753 [myid:1] - INFO  [Thread-8:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11230
2018-06-28 17:52:52,753 [myid:0] - INFO  [Thread-7:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:52,753 [myid:2] - INFO  [Thread-9:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:52,753 [myid:1] - INFO  [Thread-8:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:52,753 [myid:1] - INFO  [Thread-8:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:52,753 [myid:0] - INFO  [Thread-7:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:52,753 [myid:2] - WARN  [Thread-9:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:52,754 [myid:2] - INFO  [Thread-9:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:52,753 [myid:1] - INFO  [Thread-8:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:52,754 [myid:1] - INFO  [Thread-8:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:52,754 [myid:2] - INFO  [Thread-9:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:52,754 [myid:1] - INFO  [Thread-8:QuorumPeer@1467] - QuorumPeer communication is not secured!
2018-06-28 17:52:52,754 [myid:0] - INFO  [Thread-7:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:52,754 [myid:1] - INFO  [Thread-8:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:52,754 [myid:2] - INFO  [Thread-9:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:52:52,755 [myid:1] - INFO  [Thread-8:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:52,755 [myid:2] - INFO  [Thread-9:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:52,755 [myid:2] - INFO  [Thread-9:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:52,755 [myid:2] - INFO  [Thread-9:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:52,755 [myid:2] - INFO  [Thread-9:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:52,755 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53369
2018-06-28 17:52:52,755 [myid:1] - INFO  [Thread-8:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:52,755 [myid:2] - INFO  [Thread-9:QuorumPeer@1467] - QuorumPeer communication is not secured!
2018-06-28 17:52:52,756 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53369
2018-06-28 17:52:52,756 [myid:2] - INFO  [Thread-9:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:52,756 [myid:2] - INFO  [Thread-9:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:52,757 [myid:0] - INFO  [Thread-10:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53369 (no session established for client)
2018-06-28 17:52:52,757 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:52:52,756 [myid:0] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11229
2018-06-28 17:52:52,757 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:52:52,757 [myid:2] - INFO  [Thread-9:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:52,758 [myid:1] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11232
2018-06-28 17:52:52,758 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,758 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53370
2018-06-28 17:52:52,758 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:52:52,759 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@909] - LOOKING
2018-06-28 17:52:52,759 [myid:2] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11235
2018-06-28 17:52:52,759 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53371
2018-06-28 17:52:52,759 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:52:52,759 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:52,760 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,760 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,760 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,760 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53373
2018-06-28 17:52:52,760 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:52:52,760 [myid:1] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:52:52,760 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,760 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,760 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:52:52,761 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:52:52,761 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,761 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53374
2018-06-28 17:52:52,761 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53375
2018-06-28 17:52:52,761 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53376
2018-06-28 17:52:52,762 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,762 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,762 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,762 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,762 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,762 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,763 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,762 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,763 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,763 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,763 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:52,967 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:52,967 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:52,967 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8839340858586823739.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8839340858586823739.junit.dir/data/version-2
2018-06-28 17:52:52,967 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@991] - LEADING
2018-06-28 17:52:52,967 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 208
2018-06-28 17:52:52,967 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8955772701919279616.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8955772701919279616.junit.dir/data/version-2
2018-06-28 17:52:52,967 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4998786255927989485.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4998786255927989485.junit.dir/data/version-2
2018-06-28 17:52:52,968 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 210
2018-06-28 17:52:52,968 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,968 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Leader@380] - LEADING - LEADER ELECTION TOOK - 207
2018-06-28 17:52:52,968 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:52,969 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53377:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@1025bfce
2018-06-28 17:52:52,969 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53378:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@69e05e97
2018-06-28 17:52:52,971 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53378:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:52:52,971 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53377:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:52:52,971 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53378:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:52:52,971 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53377:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:52:52,972 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53377:LearnerHandler@475] - Sending DIFF
2018-06-28 17:52:52,972 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53378:LearnerHandler@475] - Sending DIFF
2018-06-28 17:52:52,972 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:52:52,972 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:52:52,974 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53377:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:52:52,974 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53378:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:52:52,974 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:52:53,008 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:52:53,008 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53379
2018-06-28 17:52:53,009 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53379
2018-06-28 17:52:53,009 [myid:0] - INFO  [Thread-13:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:53,010 [myid:0] - INFO  [Thread-13:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53379 (no session established for client)
2018-06-28 17:52:53,010 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11230
2018-06-28 17:52:53,010 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53380
2018-06-28 17:52:53,011 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53380
2018-06-28 17:52:53,011 [myid:1] - INFO  [Thread-14:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:53,011 [myid:1] - INFO  [Thread-14:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53380 (no session established for client)
2018-06-28 17:52:53,012 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:52:53,012 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53381
2018-06-28 17:52:53,012 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53381
2018-06-28 17:52:53,013 [myid:2] - INFO  [Thread-15:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:53,013 [myid:2] - INFO  [Thread-15:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53381 (no session established for client)
2018-06-28 17:52:53,013 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11227,127.0.0.1:11230,127.0.0.1:11233 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@76308090
2018-06-28 17:52:53,015 [myid:] - WARN  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:52:53,015 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11230
2018-06-28 17:52:53,015 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11230, initiating session
2018-06-28 17:52:53,015 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53382
2018-06-28 17:52:53,015 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:53382
2018-06-28 17:52:53,016 [myid:2] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:52:53,016 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:52:53,016 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:52:53,016 [myid:0] - INFO  [SyncThread:0:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:52:53,016 [myid:1] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:52:53,018 [myid:1] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x100065f5a4a0000 with negotiated timeout 30000 for client /127.0.0.1:53382
2018-06-28 17:52:53,018 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11230, sessionid = 0x100065f5a4a0000, negotiated timeout = 30000
2018-06-28 17:52:53,020 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=0
2018-06-28 17:52:53,020 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:52:53,020 [myid:] - INFO  [Time-limited test:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:194)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:53,021 [myid:] - INFO  [Time-limited test:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:53,021 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:53,021 [myid:] - INFO  [Time-limited test:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:53,021 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:52:53,021 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:53,021 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:53,021 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:53,022 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:53,022 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:53,022 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:52:53,023 [myid:0] - ERROR [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:52:53,023 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:53,023 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:53,023 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:53,023 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:53,023 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:52:53,023 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:53,023 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:53,023 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:53,024 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:53,023 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:53,024 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:53,023 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227 to exit thread
2018-06-28 17:52:53,023 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:53,024 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:53,023 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:53,024 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:53,024 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:53,024 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:53,483 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:52:53,483 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:52:54,023 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:52:54,979 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:54,979 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:54,979 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:54,979 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:52:54,983 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 0 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir clientPort = 11227
2018-06-28 17:52:54,984 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:52:54,984 [myid:] - INFO  [Thread-16:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/zoo.cfg
2018-06-28 17:52:54,985 [myid:] - INFO  [Thread-16:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:54,985 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11227 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:52:54,985 [myid:] - INFO  [Thread-16:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:54,985 [myid:] - INFO  [Thread-16:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:54,985 [myid:] - INFO  [Thread-16:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:54,985 [myid:0] - INFO  [Thread-16:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:54,985 [myid:0] - INFO  [Thread-16:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:54,986 [myid:0] - INFO  [Thread-16:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:54,986 [myid:0] - WARN  [Thread-16:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:54,986 [myid:0] - INFO  [Thread-16:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:54,986 [myid:0] - INFO  [Thread-16:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:54,986 [myid:0] - INFO  [Thread-16:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to false
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:52:54,987 [myid:0] - INFO  [Thread-16:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:54,988 [myid:0] - INFO  [Thread-16:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:52:54,988 [myid:0] - INFO  [Thread-16:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:52:54,988 [myid:0] - INFO  [Thread-16:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:54,989 [myid:0] - INFO  [Thread-16:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:54,991 [myid:0] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11229
2018-06-28 17:52:54,992 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:52:54,992 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:52:54,992 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:54,992 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53384
2018-06-28 17:52:54,993 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:54,993 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53385
2018-06-28 17:52:54,993 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:52:54,993 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53386
2018-06-28 17:52:54,994 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:54,994 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:52:54,995 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53387
2018-06-28 17:52:54,996 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:54,997 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:54,997 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LEADING (my state)
2018-06-28 17:52:54,997 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:54,997 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:54,997 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:54,997 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:54,997 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:54,997 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LEADING (my state)
2018-06-28 17:52:54,998 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:54,998 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:54,998 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:54,998 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2
2018-06-28 17:52:54,998 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 6
2018-06-28 17:52:54,998 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:54,998 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:54,999 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53388:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@69e05e97
2018-06-28 17:52:55,000 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53388:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 peerLastZxid=0x0
2018-06-28 17:52:55,000 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53388:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:52:55,000 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53388:LearnerHandler@475] - Sending SNAP
2018-06-28 17:52:55,000 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53388:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x100000002sent zxid of db as 0x100000002
2018-06-28 17:52:55,000 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Learner@336] - Getting a snapshot from leader 0x100000002
2018-06-28 17:52:55,001 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FileTxnSnapLog@301] - Snapshotting: 0x100000002 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2/snapshot.100000002
2018-06-28 17:52:55,003 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53388:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:52:55,240 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:52:55,241 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53389
2018-06-28 17:52:55,242 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53389
2018-06-28 17:52:55,242 [myid:0] - INFO  [Thread-18:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:55,244 [myid:0] - INFO  [Thread-18:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53389 (no session established for client)
2018-06-28 17:52:55,248 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@119] - Got zxid 0x100000003 expected 0x1
2018-06-28 17:52:55,248 [myid:0] - INFO  [SyncThread:0:FileTxnLog@213] - Creating new log file: log.100000003
2018-06-28 17:52:55,250 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=1
2018-06-28 17:52:55,250 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:52:55,250 [myid:] - INFO  [Time-limited test:Leader@520] - Shutting down
2018-06-28 17:52:55,250 [myid:] - INFO  [Time-limited test:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:195)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:55,251 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:55,251 [myid:2] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11234:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:52:55,251 [myid:] - INFO  [Time-limited test:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:52:55,251 [myid:] - INFO  [Time-limited test:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:52:55,251 [myid:] - INFO  [Time-limited test:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:52:55,251 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:52:55,252 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:52:55,252 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:55,252 [myid:] - INFO  [Time-limited test:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:52:55,252 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:55,252 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:55,252 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:55,253 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:52:55,254 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:52:55,254 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:55,254 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:52:55,254 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53388:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53388 ********
2018-06-28 17:52:55,254 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:52:55,254 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53378:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53378 ********
2018-06-28 17:52:55,253 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53377:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53377 ********
2018-06-28 17:52:55,255 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53378:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:52:55,255 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53388:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:52:55,255 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:55,256 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:55,255 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:52:55,255 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:55,256 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:55,255 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:55,257 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:55,255 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:55,257 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:55,255 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Leader@520] - Shutting down
2018-06-28 17:52:55,255 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53382 which had sessionid 0x100065f5a4a0000
2018-06-28 17:52:55,255 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:55,257 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:55,257 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:52:55,255 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:55,258 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:55,255 [myid:2] - ERROR [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:52:55,257 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:55,258 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:55,257 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:55,257 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:52:55,257 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:55,259 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:55,256 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233 to exit thread
2018-06-28 17:52:55,255 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:55,255 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53377:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:52:55,259 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:55,260 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:55,260 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:55,258 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:55,260 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:55,260 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:55,260 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:CommitProcessor@184] - Shutting down
2018-06-28 17:52:55,260 [myid:1] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:55,260 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:CommitProcessor@184] - Shutting down
2018-06-28 17:52:55,261 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:55,261 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:55,261 [myid:1] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:55,261 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:55,261 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:55,262 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:55,262 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:55,262 [myid:1] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:55,262 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:52:55,262 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@909] - LOOKING
2018-06-28 17:52:55,262 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 2 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3849587592150464187.junit.dir clientPort = 11233
2018-06-28 17:52:55,262 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000003
2018-06-28 17:52:55,262 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x100000003
2018-06-28 17:52:55,262 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,262 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,263 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,263 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,263 [myid:1] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:55,263 [myid:] - INFO  [Thread-19:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3849587592150464187.junit.dir/zoo.cfg
2018-06-28 17:52:55,263 [myid:1] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:55,263 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:52:55,263 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:55,264 [myid:] - INFO  [Thread-19:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:55,264 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:55,264 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:52:55,264 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,264 [myid:] - INFO  [Thread-19:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:55,264 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,264 [myid:] - INFO  [Thread-19:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:55,264 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:55,265 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:55,264 [myid:] - INFO  [Thread-19:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:55,265 [myid:2] - INFO  [Thread-19:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:55,265 [myid:2] - INFO  [Thread-19:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:55,265 [myid:2] - INFO  [Thread-19:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:55,265 [myid:2] - WARN  [Thread-19:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:52:55,266 [myid:2] - INFO  [Thread-19:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:52:55,267 [myid:2] - INFO  [Thread-19:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to false
2018-06-28 17:52:55,267 [myid:2] - INFO  [Thread-19:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:52:55,267 [myid:2] - INFO  [Thread-19:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:52:55,267 [myid:2] - INFO  [Thread-19:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:52:55,267 [myid:2] - INFO  [Thread-19:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:55,267 [myid:2] - INFO  [Thread-19:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:52:55,267 [myid:2] - INFO  [Thread-19:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:52:55,267 [myid:2] - INFO  [Thread-19:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:55,268 [myid:2] - INFO  [Thread-19:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:55,269 [myid:2] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11235
2018-06-28 17:52:55,270 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:52:55,271 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:52:55,271 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53394
2018-06-28 17:52:55,272 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:55,273 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53395
2018-06-28 17:52:55,274 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:55,274 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,275 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,276 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,275 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,276 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,277 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,277 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,277 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,277 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,277 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:55,478 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:55,478 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@991] - LEADING
2018-06-28 17:52:55,478 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:55,478 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8839340858586823739.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8839340858586823739.junit.dir/data/version-2
2018-06-28 17:52:55,478 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2
2018-06-28 17:52:55,478 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3849587592150464187.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3849587592150464187.junit.dir/data/version-2
2018-06-28 17:52:55,478 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Leader@380] - LEADING - LEADER ELECTION TOOK - 216
2018-06-28 17:52:55,478 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 216
2018-06-28 17:52:55,478 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 207
2018-06-28 17:52:55,479 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:55,480 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:55,480 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:55,480 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:55,482 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53396:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@7dec1719
2018-06-28 17:52:55,482 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53397:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@257811b1
2018-06-28 17:52:55,484 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53396:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x100000003 minCommittedLog=0x100000001 peerLastZxid=0x100000003
2018-06-28 17:52:55,484 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53397:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x100000003 minCommittedLog=0x100000001 peerLastZxid=0x0
2018-06-28 17:52:55,484 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53396:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000003
2018-06-28 17:52:55,484 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53397:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:52:55,485 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53397:LearnerHandler@475] - Sending SNAP
2018-06-28 17:52:55,485 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53396:LearnerHandler@475] - Sending DIFF
2018-06-28 17:52:55,485 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53397:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x200000000sent zxid of db as 0x100000003
2018-06-28 17:52:55,485 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Learner@336] - Getting a snapshot from leader 0x100000003
2018-06-28 17:52:55,485 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Learner@332] - Getting a diff from the leader 0x100000003
2018-06-28 17:52:55,487 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FileTxnSnapLog@301] - Snapshotting: 0x100000003 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3849587592150464187.junit.dir/data/version-2/snapshot.100000003
2018-06-28 17:52:55,487 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53396:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:52:55,488 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Leader@964] - Have quorum of supporters, sids: [ 0,1 ]; starting up and setting last processed zxid: 0x200000000
2018-06-28 17:52:55,489 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53397:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:52:55,516 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:52:55,517 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53398
2018-06-28 17:52:55,518 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53398
2018-06-28 17:52:55,518 [myid:2] - INFO  [Thread-22:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:55,519 [myid:2] - INFO  [Thread-22:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53398 (no session established for client)
2018-06-28 17:52:55,757 [myid:] - WARN  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:52:55,758 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227
2018-06-28 17:52:55,758 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:52:55,758 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53399
2018-06-28 17:52:55,758 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:ZooKeeperServer@942] - Client attempting to renew session 0x100065f5a4a0000 at /127.0.0.1:53399
2018-06-28 17:52:55,759 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:Learner@108] - Revalidating client: 0x100065f5a4a0000
2018-06-28 17:52:55,760 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@694] - Established session 0x100065f5a4a0000 with negotiated timeout 30000 for client /127.0.0.1:53399
2018-06-28 17:52:55,761 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11227, sessionid = 0x100065f5a4a0000, negotiated timeout = 30000
2018-06-28 17:52:55,762 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@119] - Got zxid 0x200000001 expected 0x1
2018-06-28 17:52:55,762 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x200000001 expected 0x1
2018-06-28 17:52:55,763 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:52:55,763 [myid:2] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.200000001
2018-06-28 17:52:55,763 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:52:55,765 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=2
2018-06-28 17:52:55,766 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:52:55,766 [myid:] - INFO  [Time-limited test:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:196)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:55,766 [myid:] - INFO  [Time-limited test:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:55,766 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:55,766 [myid:] - INFO  [Time-limited test:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:55,766 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:52:55,766 [myid:2] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:55,766 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:55,766 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:55,767 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:55,768 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:55,768 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:52:55,769 [myid:2] - ERROR [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:52:55,769 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:55,769 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:55,771 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:55,769 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:55,771 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:55,771 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:55,771 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:55,771 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:55,771 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:52:55,770 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:55,772 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:55,769 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:55,772 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:55,769 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:55,772 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:55,772 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233 to exit thread
2018-06-28 17:52:55,772 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:55,773 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:56,262 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:52:56,647 [myid:2] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:52:56,775 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:52:57,496 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:57,496 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:57,496 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:57,496 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:52:57,500 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 2 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8943165892297713237.junit.dir clientPort = 11233
2018-06-28 17:52:57,501 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:52:57,501 [myid:] - INFO  [Thread-23:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8943165892297713237.junit.dir/zoo.cfg
2018-06-28 17:52:57,502 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:52:57,507 [myid:] - INFO  [Thread-23:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,507 [myid:] - INFO  [Thread-23:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,507 [myid:] - INFO  [Thread-23:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,508 [myid:] - INFO  [Thread-23:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:57,508 [myid:2] - INFO  [Thread-23:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:57,508 [myid:2] - INFO  [Thread-23:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:57,508 [myid:2] - INFO  [Thread-23:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:57,508 [myid:2] - WARN  [Thread-23:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:57,508 [myid:2] - INFO  [Thread-23:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:57,509 [myid:2] - INFO  [Thread-23:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:57,509 [myid:2] - INFO  [Thread-23:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:52:57,509 [myid:2] - INFO  [Thread-23:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:57,509 [myid:2] - INFO  [Thread-23:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:57,509 [myid:2] - INFO  [Thread-23:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:57,509 [myid:2] - INFO  [Thread-23:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to false
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:52:57,510 [myid:2] - INFO  [Thread-23:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:52:57,511 [myid:2] - INFO  [Thread-23:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:57,511 [myid:2] - INFO  [Thread-23:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:57,513 [myid:2] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11235
2018-06-28 17:52:57,514 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:52:57,514 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:52:57,515 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53401
2018-06-28 17:52:57,515 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:57,515 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53402
2018-06-28 17:52:57,515 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,516 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:57,517 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:57,517 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,517 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LEADING (my state)
2018-06-28 17:52:57,518 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,518 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,518 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,518 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:57,518 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:57,518 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:52:57,518 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0xffffffffffffffff (n.round), FOLLOWING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:57,518 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:57,519 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:57,519 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8943165892297713237.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8943165892297713237.junit.dir/data/version-2
2018-06-28 17:52:57,519 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:52:57,519 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4
2018-06-28 17:52:57,519 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,519 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:57,520 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53403:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@257811b1
2018-06-28 17:52:57,521 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53403:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x200000001 minCommittedLog=0x100000001 peerLastZxid=0x0
2018-06-28 17:52:57,521 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53403:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:52:57,521 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53403:LearnerHandler@475] - Sending SNAP
2018-06-28 17:52:57,521 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53403:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x200000001sent zxid of db as 0x200000001
2018-06-28 17:52:57,521 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Learner@336] - Getting a snapshot from leader 0x200000001
2018-06-28 17:52:57,522 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FileTxnSnapLog@301] - Snapshotting: 0x200000001 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8943165892297713237.junit.dir/data/version-2/snapshot.200000001
2018-06-28 17:52:57,525 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53403:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:52:57,754 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:52:57,755 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53404
2018-06-28 17:52:57,755 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53404
2018-06-28 17:52:57,755 [myid:2] - INFO  [Thread-25:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:57,756 [myid:2] - INFO  [Thread-25:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53404 (no session established for client)
2018-06-28 17:52:57,758 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x200000002 expected 0x1
2018-06-28 17:52:57,758 [myid:2] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.200000002
2018-06-28 17:52:57,760 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=0
2018-06-28 17:52:57,760 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230
2018-06-28 17:52:57,760 [myid:] - INFO  [Time-limited test:Leader@520] - Shutting down
2018-06-28 17:52:57,760 [myid:] - INFO  [Time-limited test:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:203)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:57,761 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:57,761 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:52:57,761 [myid:] - INFO  [Time-limited test:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:52:57,761 [myid:] - INFO  [Time-limited test:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:52:57,761 [myid:] - INFO  [Time-limited test:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:52:57,761 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:52:57,761 [myid:1] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:52:57,762 [myid:1] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:57,762 [myid:] - INFO  [Time-limited test:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:52:57,762 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:57,762 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:57,762 [myid:1] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:57,763 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:52:57,764 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:52:57,764 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53403:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53403 ********
2018-06-28 17:52:57,764 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:52:57,764 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:57,764 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53397:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53397 ********
2018-06-28 17:52:57,765 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53397:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:52:57,764 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53396:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53396 ********
2018-06-28 17:52:57,766 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:57,767 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:57,766 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230
2018-06-28 17:52:57,766 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:57,767 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:57,766 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:57,767 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:57,766 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:57,768 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:57,766 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:57,768 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:57,765 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:57,768 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:57,765 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53399 which had sessionid 0x100065f5a4a0000
2018-06-28 17:52:57,765 [myid:1] - ERROR [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:52:57,765 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:52:57,769 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Leader@520] - Shutting down
2018-06-28 17:52:57,765 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:57,764 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53403:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:52:57,769 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:57,769 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:52:57,769 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:52:57,769 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:57,769 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:57,768 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:57,770 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:57,767 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:57,770 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:57,767 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230 to exit thread
2018-06-28 17:52:57,766 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53396:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:52:57,769 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:57,769 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:57,771 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:57,771 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:57,771 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:CommitProcessor@184] - Shutting down
2018-06-28 17:52:57,771 [myid:2] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:57,771 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:CommitProcessor@184] - Shutting down
2018-06-28 17:52:57,771 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:57,771 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:57,772 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:57,772 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:57,772 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:57,772 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:57,772 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:57,772 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:57,772 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:52:57,772 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:52:57,773 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x200000002
2018-06-28 17:52:57,773 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 1 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4726177475755442698.junit.dir clientPort = 11230
2018-06-28 17:52:57,773 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,773 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x200000002
2018-06-28 17:52:57,773 [myid:2] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:57,773 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,774 [myid:2] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,774 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:57,774 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11230
2018-06-28 17:52:57,774 [myid:] - INFO  [Thread-26:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4726177475755442698.junit.dir/zoo.cfg
2018-06-28 17:52:57,774 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,774 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,774 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,774 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11230 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:52:57,775 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:57,775 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,774 [myid:] - INFO  [Thread-26:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,775 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,775 [myid:] - INFO  [Thread-26:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,775 [myid:] - INFO  [Thread-26:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:57,775 [myid:] - INFO  [Thread-26:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:57,775 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,776 [myid:1] - INFO  [Thread-26:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:57,776 [myid:1] - INFO  [Thread-26:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:57,776 [myid:1] - INFO  [Thread-26:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:57,776 [myid:1] - WARN  [Thread-26:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:57,776 [myid:1] - INFO  [Thread-26:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:57,776 [myid:1] - INFO  [Thread-26:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:57,776 [myid:1] - INFO  [Thread-26:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11230
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to true
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:52:57,777 [myid:1] - INFO  [Thread-26:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:52:57,778 [myid:1] - INFO  [Thread-26:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:57,778 [myid:1] - INFO  [Thread-26:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:57,779 [myid:1] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11232
2018-06-28 17:52:57,780 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@909] - LOOKING
2018-06-28 17:52:57,781 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:52:57,781 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53409
2018-06-28 17:52:57,781 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,782 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53410
2018-06-28 17:52:57,784 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-1:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:52:57,784 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:52:57,859 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:52:57,859 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-3:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:52:57,859 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53409
2018-06-28 17:52:57,859 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-3:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53410
2018-06-28 17:52:57,861 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-1:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11229, status: SUCCESS
2018-06-28 17:52:57,861 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53411
2018-06-28 17:52:57,861 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:57,861 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11235, status: SUCCESS
2018-06-28 17:52:57,861 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:52:57,862 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,862 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,863 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,863 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,863 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,863 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,863 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,863 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,864 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000002 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:57,953 [myid:] - WARN  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:52:57,953 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11233
2018-06-28 17:52:57,954 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11233, initiating session
2018-06-28 17:52:57,954 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53412
2018-06-28 17:52:57,954 [myid:2] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 17:52:57,954 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53412 (no session established for client)
2018-06-28 17:52:57,954 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:52:58,002 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:52:58,002 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:52:58,030 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11230
2018-06-28 17:52:58,031 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53413
2018-06-28 17:52:58,031 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53413
2018-06-28 17:52:58,032 [myid:1] - INFO  [Thread-27:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53413 (no session established for client)
2018-06-28 17:52:58,067 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:58,067 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@991] - LEADING
2018-06-28 17:52:58,067 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2
2018-06-28 17:52:58,067 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8943165892297713237.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8943165892297713237.junit.dir/data/version-2
2018-06-28 17:52:58,067 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:58,068 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4726177475755442698.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4726177475755442698.junit.dir/data/version-2
2018-06-28 17:52:58,067 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 294
2018-06-28 17:52:58,068 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 287
2018-06-28 17:52:58,068 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Leader@380] - LEADING - LEADER ELECTION TOOK - 295
2018-06-28 17:52:58,068 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,068 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,068 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:58,069 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:52:58,070 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53414:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@6c77bcb1
2018-06-28 17:52:58,072 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53414:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x200000002 minCommittedLog=0x200000002 peerLastZxid=0x200000002
2018-06-28 17:52:58,072 [myid:2] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11234:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:52:58,072 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53414:LearnerHandler@410] - leader and follower are in sync, zxid=0x200000002
2018-06-28 17:52:58,073 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53414:LearnerHandler@475] - Sending DIFF
2018-06-28 17:52:58,073 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Learner@332] - Getting a diff from the leader 0x200000002
2018-06-28 17:52:58,073 [myid:2] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11234:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53415
2018-06-28 17:52:58,075 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11234, status: SUCCESS
2018-06-28 17:52:58,075 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53415:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@4d90a55d
2018-06-28 17:52:58,076 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53414:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:52:58,076 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Leader@964] - Have quorum of supporters, sids: [ 0,2 ]; starting up and setting last processed zxid: 0x300000000
2018-06-28 17:52:58,076 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53415:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x200000002 minCommittedLog=0x200000002 peerLastZxid=0x0
2018-06-28 17:52:58,076 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53415:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:52:58,077 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53415:LearnerHandler@475] - Sending SNAP
2018-06-28 17:52:58,078 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53415:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x300000000sent zxid of db as 0x300000000
2018-06-28 17:52:58,078 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Learner@336] - Getting a snapshot from leader 0x300000000
2018-06-28 17:52:58,081 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FileTxnSnapLog@301] - Snapshotting: 0x300000000 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4726177475755442698.junit.dir/data/version-2/snapshot.300000000
2018-06-28 17:52:58,082 [myid:2] - INFO  [LearnerHandler-/127.0.0.1:53415:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:52:58,227 [myid:] - WARN  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:52:58,228 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11230
2018-06-28 17:52:58,228 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11230, initiating session
2018-06-28 17:52:58,228 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53416
2018-06-28 17:52:58,229 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:ZooKeeperServer@942] - Client attempting to renew session 0x100065f5a4a0000 at /127.0.0.1:53416
2018-06-28 17:52:58,229 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:Learner@108] - Revalidating client: 0x100065f5a4a0000
2018-06-28 17:52:58,231 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:ZooKeeperServer@694] - Established session 0x100065f5a4a0000 with negotiated timeout 30000 for client /127.0.0.1:53416
2018-06-28 17:52:58,231 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11230, sessionid = 0x100065f5a4a0000, negotiated timeout = 30000
2018-06-28 17:52:58,277 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:52:58,277 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:52:58,288 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11230
2018-06-28 17:52:58,288 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53417
2018-06-28 17:52:58,289 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53417
2018-06-28 17:52:58,289 [myid:1] - INFO  [Thread-30:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:58,290 [myid:1] - INFO  [Thread-30:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53417 (no session established for client)
2018-06-28 17:52:58,292 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Follower@119] - Got zxid 0x300000001 expected 0x1
2018-06-28 17:52:58,292 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@119] - Got zxid 0x300000001 expected 0x1
2018-06-28 17:52:58,293 [myid:1] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.300000001
2018-06-28 17:52:58,295 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=1
2018-06-28 17:52:58,295 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:52:58,295 [myid:] - INFO  [Time-limited test:Leader@520] - Shutting down
2018-06-28 17:52:58,295 [myid:] - INFO  [Time-limited test:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:204)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:58,296 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:58,296 [myid:2] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11234:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:52:58,296 [myid:] - INFO  [Time-limited test:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:52:58,296 [myid:] - INFO  [Time-limited test:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:52:58,296 [myid:] - INFO  [Time-limited test:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:52:58,296 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:52:58,296 [myid:2] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:52:58,296 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:58,296 [myid:] - INFO  [Time-limited test:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:52:58,297 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:58,297 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:58,297 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:58,298 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:52:58,299 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:52:58,299 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53414:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53414 ********
2018-06-28 17:52:58,299 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:58,298 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53415:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53415 ********
2018-06-28 17:52:58,300 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:58,300 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:58,301 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:58,298 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:52:58,302 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:58,302 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:58,301 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:52:58,301 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:58,302 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:58,300 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:58,303 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:58,300 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:58,300 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:58,303 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:58,300 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53416 which had sessionid 0x100065f5a4a0000
2018-06-28 17:52:58,300 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:58,300 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53415:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:52:58,299 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:52:58,304 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Leader@520] - Shutting down
2018-06-28 17:52:58,299 [myid:2] - ERROR [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:52:58,299 [myid:2] - WARN  [LearnerHandler-/127.0.0.1:53414:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:52:58,304 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:52:58,304 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:58,304 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:52:58,303 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:58,305 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:58,305 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:58,303 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:58,302 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233 to exit thread
2018-06-28 17:52:58,302 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:52:58,305 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:58,305 [myid:1] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:58,305 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:CommitProcessor@184] - Shutting down
2018-06-28 17:52:58,306 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:58,306 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:58,306 [myid:1] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:58,306 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:58,306 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:58,306 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:CommitProcessor@184] - Shutting down
2018-06-28 17:52:58,306 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:58,306 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:58,306 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:58,307 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:58,307 [myid:1] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:58,307 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@909] - LOOKING
2018-06-28 17:52:58,307 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:58,307 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:58,307 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x300000001
2018-06-28 17:52:58,307 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:52:58,307 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 1 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,308 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x300000001
2018-06-28 17:52:58,308 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 1 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,308 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,308 [myid:1] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:58,308 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 2 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7603218268519365281.junit.dir clientPort = 11233
2018-06-28 17:52:58,308 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:58,308 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,308 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,308 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,308 [myid:1] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,309 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,309 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:58,309 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:52:58,309 [myid:] - INFO  [Thread-31:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7603218268519365281.junit.dir/zoo.cfg
2018-06-28 17:52:58,309 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,309 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:52:58,310 [myid:] - INFO  [Thread-31:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,310 [myid:] - INFO  [Thread-31:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,310 [myid:] - INFO  [Thread-31:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,310 [myid:] - INFO  [Thread-31:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:52:58,310 [myid:2] - INFO  [Thread-31:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:52:58,310 [myid:2] - INFO  [Thread-31:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:52:58,310 [myid:2] - INFO  [Thread-31:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:52:58,310 [myid:2] - WARN  [Thread-31:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:58,310 [myid:2] - INFO  [Thread-31:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to true
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:52:58,311 [myid:2] - INFO  [Thread-31:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:52:58,312 [myid:2] - INFO  [Thread-31:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:52:58,312 [myid:2] - INFO  [Thread-31:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:52:58,312 [myid:2] - INFO  [Thread-31:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:52:58,312 [myid:2] - INFO  [Thread-31:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:58,313 [myid:2] - INFO  [Thread-31:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:52:58,314 [myid:2] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11235
2018-06-28 17:52:58,315 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:52:58,315 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:52:58,316 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53422
2018-06-28 17:52:58,322 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:52:58,323 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53423
2018-06-28 17:52:58,323 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,324 [myid:1] - ERROR [LearnerHandler-/127.0.0.1:53365:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:52:58,324 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:52:58,325 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53365:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53365 ********
2018-06-28 17:52:58,326 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:52:58,327 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53422
2018-06-28 17:52:58,327 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:52:58,328 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53423
2018-06-28 17:52:58,328 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11229, status: SUCCESS
2018-06-28 17:52:58,329 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11232, status: SUCCESS
2018-06-28 17:52:58,329 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,329 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,330 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 1 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,330 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,330 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,330 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,330 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,330 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,331 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 1 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,531 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@991] - LEADING
2018-06-28 17:52:58,531 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4726177475755442698.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4726177475755442698.junit.dir/data/version-2
2018-06-28 17:52:58,531 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:58,531 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 17:52:58,531 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Leader@380] - LEADING - LEADER ELECTION TOOK - 224
2018-06-28 17:52:58,531 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7603218268519365281.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7603218268519365281.junit.dir/data/version-2
2018-06-28 17:52:58,531 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1795530553946699044.junit.dir/data/version-2
2018-06-28 17:52:58,531 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 216
2018-06-28 17:52:58,531 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 224
2018-06-28 17:52:58,533 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,533 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,533 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:52:58,533 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:52:58,535 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:52:58,535 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53425
2018-06-28 17:52:58,536 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11231, status: SUCCESS
2018-06-28 17:52:58,537 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53425:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@1f4e3395
2018-06-28 17:52:58,537 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53424:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@6fb1dfdb
2018-06-28 17:52:58,539 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53424:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x300000001 minCommittedLog=0x300000001 peerLastZxid=0x300000001
2018-06-28 17:52:58,539 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53425:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x300000001 minCommittedLog=0x300000001 peerLastZxid=0x0
2018-06-28 17:52:58,539 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53424:LearnerHandler@410] - leader and follower are in sync, zxid=0x300000001
2018-06-28 17:52:58,539 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53425:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:52:58,539 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53424:LearnerHandler@475] - Sending DIFF
2018-06-28 17:52:58,539 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53425:LearnerHandler@475] - Sending SNAP
2018-06-28 17:52:58,539 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Learner@332] - Getting a diff from the leader 0x300000001
2018-06-28 17:52:58,539 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Learner@336] - Getting a snapshot from leader 0x300000001
2018-06-28 17:52:58,539 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53425:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x400000000sent zxid of db as 0x300000001
2018-06-28 17:52:58,541 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53424:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:52:58,541 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Leader@964] - Have quorum of supporters, sids: [ 0,1 ]; starting up and setting last processed zxid: 0x400000000
2018-06-28 17:52:58,541 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FileTxnSnapLog@301] - Snapshotting: 0x300000001 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7603218268519365281.junit.dir/data/version-2/snapshot.300000001
2018-06-28 17:52:58,543 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53425:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:52:58,560 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:52:58,560 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53426
2018-06-28 17:52:58,561 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53426
2018-06-28 17:52:58,561 [myid:2] - INFO  [Thread-34:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:52:58,562 [myid:2] - INFO  [Thread-34:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53426 (no session established for client)
2018-06-28 17:52:58,741 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@520] - Shutting down
2018-06-28 17:52:58,742 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: Not sufficient followers synced, only synced with sids: [ 1 ]
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:501)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:52:58,742 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:58,742 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:52:58,742 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11225:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:52:58,742 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:52:58,742 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:52:58,742 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:CommitProcessor@184] - Shutting down
2018-06-28 17:52:58,742 [myid:1] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:52:58,743 [myid:1] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:58,742 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:52:58,743 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:58,743 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:58,743 [myid:1] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:58,744 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer@909] - LOOKING
2018-06-28 17:52:58,744 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000003
2018-06-28 17:52:58,744 [myid:1] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 0 at election address localhost/127.0.0.1:11223
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:58,745 [myid:1] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,745 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:52:58,771 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:52:58,947 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumCnxManager@584] - Cannot open channel to 0 at election address localhost/127.0.0.1:11223
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:52:58,947 [myid:] - WARN  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:52:58,947 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:58,948 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227
2018-06-28 17:52:58,948 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FastLeaderElection@847] - Notification time out: 400
2018-06-28 17:52:58,948 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:52:58,948 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53429
2018-06-28 17:52:58,951 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:ZooKeeperServer@942] - Client attempting to renew session 0x100065f5a4a0000 at /127.0.0.1:53429
2018-06-28 17:52:58,951 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:Learner@108] - Revalidating client: 0x100065f5a4a0000
2018-06-28 17:52:58,953 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@694] - Established session 0x100065f5a4a0000 with negotiated timeout 30000 for client /127.0.0.1:53429
2018-06-28 17:52:58,953 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11227, sessionid = 0x100065f5a4a0000, negotiated timeout = 30000
2018-06-28 17:52:58,955 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@119] - Got zxid 0x400000001 expected 0x1
2018-06-28 17:52:58,955 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x400000001 expected 0x1
2018-06-28 17:52:58,955 [myid:2] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.400000001
2018-06-28 17:52:58,958 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=2
2018-06-28 17:52:58,958 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:52:58,958 [myid:] - INFO  [Time-limited test:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:205)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:52:58,958 [myid:] - INFO  [Time-limited test:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:52:58,958 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:52:58,958 [myid:] - INFO  [Time-limited test:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:52:58,958 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:52:58,958 [myid:2] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:52:58,959 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:52:58,959 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:52:58,959 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:52:58,960 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:52:58,960 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:52:58,961 [myid:2] - ERROR [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:52:58,961 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:58,962 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:58,961 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:58,963 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:58,963 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:58,962 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:52:58,962 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:58,963 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:58,962 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:58,963 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:58,961 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:58,963 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:58,961 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:52:58,964 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:52:58,963 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233 to exit thread
2018-06-28 17:52:58,964 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:52:58,964 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:58,963 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:52:59,306 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:52:59,349 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumCnxManager@584] - Cannot open channel to 0 at election address localhost/127.0.0.1:11223
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:52:59,349 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:52:59,349 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FastLeaderElection@847] - Notification time out: 800
2018-06-28 17:52:59,962 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:00,155 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumCnxManager@584] - Cannot open channel to 0 at election address localhost/127.0.0.1:11223
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:00,155 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:00,155 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 17:53:00,523 [myid:1] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:00,523 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:00,544 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:00,545 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:00,545 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:00,545 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:00,549 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 2 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6038296387103583749.junit.dir clientPort = 11233
2018-06-28 17:53:00,550 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:00,550 [myid:] - INFO  [Thread-35:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6038296387103583749.junit.dir/zoo.cfg
2018-06-28 17:53:00,551 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:00,556 [myid:] - INFO  [Thread-35:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:00,556 [myid:] - INFO  [Thread-35:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:00,556 [myid:] - INFO  [Thread-35:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:00,557 [myid:] - INFO  [Thread-35:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:00,557 [myid:2] - INFO  [Thread-35:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:00,557 [myid:2] - INFO  [Thread-35:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:00,557 [myid:2] - INFO  [Thread-35:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:00,557 [myid:2] - WARN  [Thread-35:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:00,557 [myid:2] - INFO  [Thread-35:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:00,558 [myid:2] - INFO  [Thread-35:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:00,558 [myid:2] - INFO  [Thread-35:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:53:00,558 [myid:2] - INFO  [Thread-35:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:00,558 [myid:2] - INFO  [Thread-35:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:00,558 [myid:2] - INFO  [Thread-35:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:00,558 [myid:2] - INFO  [Thread-35:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to true
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:53:00,559 [myid:2] - INFO  [Thread-35:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:53:00,560 [myid:2] - INFO  [Thread-35:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:00,560 [myid:2] - INFO  [Thread-35:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:00,562 [myid:2] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11235
2018-06-28 17:53:00,563 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:53:00,563 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:53:00,563 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53433
2018-06-28 17:53:00,564 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:00,564 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53434
2018-06-28 17:53:00,564 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:00,565 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:00,566 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:00,567 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53433
2018-06-28 17:53:00,567 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:00,567 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11229, status: SUCCESS
2018-06-28 17:53:00,568 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53434
2018-06-28 17:53:00,568 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:00,568 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:00,568 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11232, status: SUCCESS
2018-06-28 17:53:00,570 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:00,570 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:00,570 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53435
2018-06-28 17:53:00,570 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 1 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:00,570 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LEADING (my state)
2018-06-28 17:53:00,570 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:00,571 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:00,571 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-3:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:00,571 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:00,571 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 17:53:00,571 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6038296387103583749.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6038296387103583749.junit.dir/data/version-2
2018-06-28 17:53:00,571 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 8
2018-06-28 17:53:00,571 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:00,572 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:00,572 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:00,572 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53435
2018-06-28 17:53:00,572 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:00,572 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:00,573 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:00,572 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:00,572 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:00,573 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:00,573 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-3:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11232, status: SUCCESS
2018-06-28 17:53:00,574 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:00,574 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:00,574 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:00,574 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:00,574 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LEADING (my state)
2018-06-28 17:53:00,574 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53436
2018-06-28 17:53:00,575 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:00,575 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11231, status: SUCCESS
2018-06-28 17:53:00,575 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53436:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@1f4e3395
2018-06-28 17:53:00,576 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53436:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x400000001 minCommittedLog=0x300000001 peerLastZxid=0x0
2018-06-28 17:53:00,576 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53436:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:53:00,576 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53436:LearnerHandler@475] - Sending SNAP
2018-06-28 17:53:00,576 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53436:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x400000001sent zxid of db as 0x400000001
2018-06-28 17:53:00,576 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Learner@336] - Getting a snapshot from leader 0x400000001
2018-06-28 17:53:00,577 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FileTxnSnapLog@301] - Snapshotting: 0x400000001 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6038296387103583749.junit.dir/data/version-2/snapshot.400000001
2018-06-28 17:53:00,580 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53436:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:53:00,646 [myid:2] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:53:00,646 [myid:1] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:53:00,646 [myid:1] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:53:00,802 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:00,803 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53437
2018-06-28 17:53:00,803 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53437
2018-06-28 17:53:00,804 [myid:2] - INFO  [Thread-37:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:00,805 [myid:2] - INFO  [Thread-37:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53437 (no session established for client)
2018-06-28 17:53:00,806 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x400000002 expected 0x1
2018-06-28 17:53:00,806 [myid:2] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.400000002
2018-06-28 17:53:00,808 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=0
2018-06-28 17:53:00,809 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:53:00,809 [myid:] - INFO  [Time-limited test:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:212)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:00,809 [myid:] - INFO  [Time-limited test:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53429 which had sessionid 0x100065f5a4a0000
2018-06-28 17:53:00,809 [myid:] - INFO  [Time-limited test:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:00,809 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:53:00,809 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:00,809 [myid:] - INFO  [Time-limited test:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:53:00,809 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:53:00,809 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:53:00,810 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:00,810 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:00,810 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:00,811 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:00,811 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:53:00,811 [myid:0] - ERROR [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:53:00,812 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:00,813 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:00,812 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:00,813 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:00,812 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:53:00,812 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:00,814 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:00,812 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:00,814 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:00,812 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:00,814 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:00,812 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:00,814 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:00,813 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227 to exit thread
2018-06-28 17:53:00,813 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:00,815 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:00,815 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:00,815 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:00,864 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:00,864 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:01,335 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:01,335 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:01,746 [myid:] - WARN  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:01,746 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11233
2018-06-28 17:53:01,746 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11233, initiating session
2018-06-28 17:53:01,746 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53438
2018-06-28 17:53:01,747 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:ZooKeeperServer@942] - Client attempting to renew session 0x100065f5a4a0000 at /127.0.0.1:53438
2018-06-28 17:53:01,747 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:Learner@108] - Revalidating client: 0x100065f5a4a0000
2018-06-28 17:53:01,748 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@694] - Established session 0x100065f5a4a0000 with negotiated timeout 30000 for client /127.0.0.1:53438
2018-06-28 17:53:01,748 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11233, sessionid = 0x100065f5a4a0000, negotiated timeout = 30000
2018-06-28 17:53:01,761 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumCnxManager@584] - Cannot open channel to 0 at election address localhost/127.0.0.1:11223
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:01,761 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:01,761 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FastLeaderElection@847] - Notification time out: 3200
2018-06-28 17:53:01,812 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:02,549 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:02,550 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:02,550 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:02,550 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:02,576 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 0 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4990205279681880468.junit.dir clientPort = 11227
2018-06-28 17:53:02,577 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:53:02,577 [myid:] - INFO  [Thread-38:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4990205279681880468.junit.dir/zoo.cfg
2018-06-28 17:53:02,577 [myid:] - INFO  [Thread-38:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:02,577 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11227 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:02,578 [myid:] - INFO  [Thread-38:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:02,578 [myid:] - INFO  [Thread-38:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:02,578 [myid:] - INFO  [Thread-38:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:02,578 [myid:0] - INFO  [Thread-38:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:02,578 [myid:0] - INFO  [Thread-38:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:02,578 [myid:0] - INFO  [Thread-38:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:02,578 [myid:0] - WARN  [Thread-38:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:02,578 [myid:0] - INFO  [Thread-38:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to true
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to true
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:53:02,579 [myid:0] - INFO  [Thread-38:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:02,580 [myid:0] - INFO  [Thread-38:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:53:02,581 [myid:0] - INFO  [Thread-38:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:53:02,581 [myid:0] - INFO  [Thread-38:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:02,582 [myid:0] - INFO  [Thread-38:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:02,583 [myid:0] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11229
2018-06-28 17:53:02,584 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:53:02,584 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:53:02,584 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:02,584 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53441
2018-06-28 17:53:02,585 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53442
2018-06-28 17:53:02,585 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:02,585 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:02,586 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:02,587 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53441
2018-06-28 17:53:02,587 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-3:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:02,587 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11232, status: SUCCESS
2018-06-28 17:53:02,587 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-3:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53442
2018-06-28 17:53:02,587 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:53:02,587 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53443
2018-06-28 17:53:02,588 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11235, status: SUCCESS
2018-06-28 17:53:02,588 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:53:02,588 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:02,588 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53444
2018-06-28 17:53:02,589 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:02,590 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-3:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:02,590 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:02,590 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-3:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53443
2018-06-28 17:53:02,590 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53444
2018-06-28 17:53:02,590 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11229, status: SUCCESS
2018-06-28 17:53:02,590 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11229, status: SUCCESS
2018-06-28 17:53:02,591 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LEADING (my state)
2018-06-28 17:53:02,591 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:02,591 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 1 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:02,592 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:02,592 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:02,592 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:02,592 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:02,592 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:02,592 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LEADING (my state)
2018-06-28 17:53:02,592 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x4 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:02,592 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:53:02,592 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4990205279681880468.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4990205279681880468.junit.dir/data/version-2
2018-06-28 17:53:02,592 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:02,592 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 8
2018-06-28 17:53:02,592 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:02,593 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:02,594 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:02,594 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53445
2018-06-28 17:53:02,594 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11231, status: SUCCESS
2018-06-28 17:53:02,595 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53445:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@6fb1dfdb
2018-06-28 17:53:02,596 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53445:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x400000002 minCommittedLog=0x300000001 peerLastZxid=0x0
2018-06-28 17:53:02,596 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53445:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:53:02,596 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53445:LearnerHandler@475] - Sending SNAP
2018-06-28 17:53:02,596 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53445:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x400000002sent zxid of db as 0x400000002
2018-06-28 17:53:02,596 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Learner@336] - Getting a snapshot from leader 0x400000002
2018-06-28 17:53:02,597 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FileTxnSnapLog@301] - Snapshotting: 0x400000002 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4990205279681880468.junit.dir/data/version-2/snapshot.400000002
2018-06-28 17:53:02,598 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53445:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:53:02,833 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:53:02,834 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53446
2018-06-28 17:53:02,834 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53446
2018-06-28 17:53:02,834 [myid:0] - INFO  [Thread-40:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:02,835 [myid:0] - INFO  [Thread-40:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53446 (no session established for client)
2018-06-28 17:53:02,837 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@119] - Got zxid 0x400000003 expected 0x1
2018-06-28 17:53:02,837 [myid:0] - INFO  [SyncThread:0:FileTxnLog@213] - Creating new log file: log.400000003
2018-06-28 17:53:02,839 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=1
2018-06-28 17:53:02,840 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:53:02,840 [myid:] - INFO  [Time-limited test:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:213)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:02,840 [myid:] - INFO  [Time-limited test:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53438 which had sessionid 0x100065f5a4a0000
2018-06-28 17:53:02,840 [myid:] - INFO  [Time-limited test:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:02,840 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:53:02,840 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:02,841 [myid:] - INFO  [Time-limited test:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:53:02,841 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:53:02,841 [myid:2] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:53:02,841 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:02,841 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:02,841 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:02,842 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:02,842 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:53:02,843 [myid:2] - ERROR [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:53:02,843 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:02,845 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:02,843 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:02,845 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:02,843 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:02,845 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:02,843 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:02,846 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:02,843 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:02,846 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:02,843 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:02,846 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:02,846 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:02,845 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:02,847 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:02,845 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:53:02,847 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:02,847 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233 to exit thread
2018-06-28 17:53:03,538 [myid:] - WARN  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:03,538 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11230
2018-06-28 17:53:03,538 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11230, initiating session
2018-06-28 17:53:03,538 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53447
2018-06-28 17:53:03,539 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:ZooKeeperServer@942] - Client attempting to renew session 0x100065f5a4a0000 at /127.0.0.1:53447
2018-06-28 17:53:03,539 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:ZooKeeperServer@694] - Established session 0x100065f5a4a0000 with negotiated timeout 30000 for client /127.0.0.1:53447
2018-06-28 17:53:03,539 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11230, sessionid = 0x100065f5a4a0000, negotiated timeout = 30000
2018-06-28 17:53:03,574 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:03,574 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:03,848 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:04,554 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:04,554 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:04,554 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:04,555 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:04,558 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 2 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7846662850684851025.junit.dir clientPort = 11233
2018-06-28 17:53:04,559 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:04,559 [myid:] - INFO  [Thread-41:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7846662850684851025.junit.dir/zoo.cfg
2018-06-28 17:53:04,559 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:04,565 [myid:] - INFO  [Thread-41:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:04,565 [myid:] - INFO  [Thread-41:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:04,565 [myid:] - INFO  [Thread-41:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:04,565 [myid:] - INFO  [Thread-41:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:04,566 [myid:2] - INFO  [Thread-41:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:04,566 [myid:2] - INFO  [Thread-41:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:04,566 [myid:2] - INFO  [Thread-41:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:04,566 [myid:2] - WARN  [Thread-41:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:04,567 [myid:2] - INFO  [Thread-41:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:04,567 [myid:2] - INFO  [Thread-41:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:04,567 [myid:2] - INFO  [Thread-41:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:53:04,567 [myid:2] - INFO  [Thread-41:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:04,567 [myid:2] - INFO  [Thread-41:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:04,567 [myid:2] - INFO  [Thread-41:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:04,567 [myid:2] - INFO  [Thread-41:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to true
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to true
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:53:04,568 [myid:2] - INFO  [Thread-41:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:53:04,569 [myid:2] - INFO  [Thread-41:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:04,570 [myid:2] - INFO  [Thread-41:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:04,571 [myid:2] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11235
2018-06-28 17:53:04,572 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:53:04,572 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:53:04,573 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53449
2018-06-28 17:53:04,573 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53450
2018-06-28 17:53:04,573 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:04,574 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:04,574 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:04,576 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:04,576 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:04,576 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53449
2018-06-28 17:53:04,576 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53450
2018-06-28 17:53:04,576 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11229, status: SUCCESS
2018-06-28 17:53:04,577 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11232, status: SUCCESS
2018-06-28 17:53:04,578 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 0 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:04,578 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:04,579 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:04,579 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LEADING (my state)
2018-06-28 17:53:04,579 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:04,579 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) LEADING (my state)
2018-06-28 17:53:04,579 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:04,579 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LOOKING (n.state), 2 (n.sid), 0x3 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:04,579 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:04,579 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 17:53:04,579 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:04,579 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7846662850684851025.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7846662850684851025.junit.dir/data/version-2
2018-06-28 17:53:04,579 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x4 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:04,580 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 7
2018-06-28 17:53:04,580 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:04,580 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:04,581 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:04,581 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53451
2018-06-28 17:53:04,582 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11231, status: SUCCESS
2018-06-28 17:53:04,582 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53451:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@1f4e3395
2018-06-28 17:53:04,583 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53451:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x400000003 minCommittedLog=0x300000001 peerLastZxid=0x0
2018-06-28 17:53:04,583 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53451:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:53:04,583 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53451:LearnerHandler@475] - Sending SNAP
2018-06-28 17:53:04,583 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53451:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x400000003sent zxid of db as 0x400000003
2018-06-28 17:53:04,583 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Learner@336] - Getting a snapshot from leader 0x400000003
2018-06-28 17:53:04,584 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FileTxnSnapLog@301] - Snapshotting: 0x400000003 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7846662850684851025.junit.dir/data/version-2/snapshot.400000003
2018-06-28 17:53:04,585 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53451:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:53:04,815 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:04,816 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53452
2018-06-28 17:53:04,816 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53452
2018-06-28 17:53:04,816 [myid:2] - INFO  [Thread-43:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:04,817 [myid:2] - INFO  [Thread-43:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53452 (no session established for client)
2018-06-28 17:53:04,819 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x400000004 expected 0x1
2018-06-28 17:53:04,819 [myid:2] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.400000004
2018-06-28 17:53:04,821 [myid:] - INFO  [Time-limited test:QuorumAuthUpgradeTest@229] - Restarting server myid=2
2018-06-28 17:53:04,821 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:53:04,821 [myid:] - INFO  [Time-limited test:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.restartServer(QuorumAuthUpgradeTest.java:230)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:214)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:04,822 [myid:] - INFO  [Time-limited test:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:04,822 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:04,822 [myid:] - INFO  [Time-limited test:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:53:04,822 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:53:04,822 [myid:2] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:53:04,822 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:04,822 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:04,823 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:04,823 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:04,824 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:53:04,824 [myid:2] - ERROR [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:53:04,825 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:04,825 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:04,825 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:04,826 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:04,825 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:04,826 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:04,825 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:04,827 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:04,825 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:04,825 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:04,827 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:04,827 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:04,826 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:04,827 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:04,826 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:53:04,827 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:04,828 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:04,828 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233 to exit thread
2018-06-28 17:53:04,967 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumCnxManager@584] - Cannot open channel to 0 at election address localhost/127.0.0.1:11223
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:04,967 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:04,968 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FastLeaderElection@847] - Notification time out: 6400
2018-06-28 17:53:05,593 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:05,593 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:05,829 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:06,554 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:06,555 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:06,555 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:06,555 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:06,558 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 2 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3625824657801657696.junit.dir clientPort = 11233
2018-06-28 17:53:06,559 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:06,559 [myid:] - INFO  [Thread-44:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3625824657801657696.junit.dir/zoo.cfg
2018-06-28 17:53:06,560 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:06,565 [myid:] - INFO  [Thread-44:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:06,565 [myid:] - INFO  [Thread-44:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:06,565 [myid:] - INFO  [Thread-44:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:06,565 [myid:] - INFO  [Thread-44:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:06,566 [myid:2] - INFO  [Thread-44:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:06,566 [myid:2] - INFO  [Thread-44:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:06,566 [myid:2] - INFO  [Thread-44:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:06,566 [myid:2] - WARN  [Thread-44:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:06,566 [myid:2] - INFO  [Thread-44:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:06,567 [myid:2] - INFO  [Thread-44:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:06,567 [myid:2] - INFO  [Thread-44:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:53:06,567 [myid:2] - INFO  [Thread-44:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:06,567 [myid:2] - INFO  [Thread-44:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:06,567 [myid:2] - INFO  [Thread-44:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:06,567 [myid:2] - INFO  [Thread-44:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to true
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to true
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:53:06,568 [myid:2] - INFO  [Thread-44:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:53:06,569 [myid:2] - INFO  [Thread-44:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:06,569 [myid:2] - INFO  [Thread-44:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:06,571 [myid:2] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11235
2018-06-28 17:53:06,572 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:53:06,572 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:53:06,573 [myid:0] - INFO  [localhost/127.0.0.1:11229:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53455
2018-06-28 17:53:06,573 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:06,573 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53456
2018-06-28 17:53:06,574 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:06,574 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:06,575 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:06,576 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53455
2018-06-28 17:53:06,576 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:06,576 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53456
2018-06-28 17:53:06,576 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-1:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11229, status: SUCCESS
2018-06-28 17:53:06,576 [myid:2] - INFO  [QuorumConnectionThread-[myid=2]-2:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11232, status: SUCCESS
2018-06-28 17:53:06,577 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:06,577 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:06,578 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LEADING (my state)
2018-06-28 17:53:06,578 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:06,578 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:06,578 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x300000001 (n.zxid), 0x4 (n.round), LEADING (n.state), 1 (n.sid), 0x4 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:53:06,578 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 17:53:06,578 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3625824657801657696.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3625824657801657696.junit.dir/data/version-2
2018-06-28 17:53:06,579 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 7
2018-06-28 17:53:06,579 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:06,579 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:06,580 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:06,580 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53457
2018-06-28 17:53:06,581 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11231, status: SUCCESS
2018-06-28 17:53:06,581 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53457:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@1f4e3395
2018-06-28 17:53:06,582 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53457:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x400000004 minCommittedLog=0x300000001 peerLastZxid=0x0
2018-06-28 17:53:06,582 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53457:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:53:06,582 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53457:LearnerHandler@475] - Sending SNAP
2018-06-28 17:53:06,582 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53457:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x400000004sent zxid of db as 0x400000004
2018-06-28 17:53:06,582 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Learner@336] - Getting a snapshot from leader 0x400000004
2018-06-28 17:53:06,583 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FileTxnSnapLog@301] - Snapshotting: 0x400000004 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3625824657801657696.junit.dir/data/version-2/snapshot.400000004
2018-06-28 17:53:06,584 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53457:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:53:06,814 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:06,815 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53458
2018-06-28 17:53:06,815 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53458
2018-06-28 17:53:06,815 [myid:2] - INFO  [Thread-46:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:06,816 [myid:2] - INFO  [Thread-46:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53458 (no session established for client)
2018-06-28 17:53:06,818 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x400000005 expected 0x1
2018-06-28 17:53:06,818 [myid:2] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.400000005
2018-06-28 17:53:06,820 [myid:] - INFO  [Time-limited test:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:53:06,820 [myid:] - INFO  [Time-limited test:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade(QuorumAuthUpgradeTest.java:220)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:06,820 [myid:] - INFO  [Time-limited test:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:06,820 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:06,820 [myid:] - INFO  [Time-limited test:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:53:06,820 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 17:53:06,820 [myid:2] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:53:06,821 [myid:2] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:06,820 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:06,821 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:06,821 [myid:2] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:06,822 [myid:2] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:53:06,823 [myid:2] - ERROR [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:53:06,823 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:06,824 [myid:0] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:06,824 [myid:] - INFO  [Time-limited test:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233
2018-06-28 17:53:06,825 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:06,825 [myid:0] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:06,824 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:06,825 [myid:2] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:06,823 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:06,825 [myid:1] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:06,823 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:06,823 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:06,826 [myid:2] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:06,823 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:06,826 [myid:2] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:06,826 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:06,826 [myid:1] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:06,825 [myid:] - INFO  [Time-limited test:QuorumBase@315] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233 to exit thread
2018-06-28 17:53:06,826 [myid:2] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:07,583 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:07,583 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:07,824 [myid:2] - INFO  [localhost/127.0.0.1:11235:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:08,560 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:08,560 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:08,560 [myid:2] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:08,560 [myid:2] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11233:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:08,564 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 2 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6515102072026733187.junit.dir clientPort = 11233
2018-06-28 17:53:08,565 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:08,565 [myid:] - INFO  [Thread-47:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6515102072026733187.junit.dir/zoo.cfg
2018-06-28 17:53:08,565 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:08,570 [myid:] - INFO  [Thread-47:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:08,571 [myid:] - INFO  [Thread-47:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:08,571 [myid:] - INFO  [Thread-47:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:08,571 [myid:] - ERROR [Thread-47:QuorumPeerTestBase$MainThread@160] - unexpected exception in run
org.apache.zookeeper.server.quorum.QuorumPeerConfig$ConfigException: Error processing /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6515102072026733187.junit.dir/zoo.cfg
	at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parse(QuorumPeerConfig.java:156)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:104)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.IllegalArgumentException: quorum.auth.enableSasl is disabled, so cannot enable quorum.auth.serverRequireSasl
	at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parseProperties(QuorumPeerConfig.java:280)
	at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parse(QuorumPeerConfig.java:152)
	... 3 more
2018-06-28 17:53:08,820 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:08,821 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:09,076 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:09,076 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:09,332 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:09,332 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:09,579 [myid:2] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:09,581 [myid:2] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:09,588 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:09,589 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:09,840 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:09,841 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:10,091 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:10,092 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:10,347 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:10,348 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:10,603 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:10,604 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:10,854 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:10,855 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:11,110 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:11,111 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:11,363 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:11,364 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:11,373 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumCnxManager@584] - Cannot open channel to 0 at election address localhost/127.0.0.1:11223
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:11,374 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:11,374 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FastLeaderElection@847] - Notification time out: 12800
2018-06-28 17:53:11,619 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:11,620 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:11,872 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:11,873 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:12,128 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:12,129 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:12,382 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:12,382 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:12,633 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:12,634 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:12,889 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:12,890 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:13,144 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:13,144 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:13,400 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:13,401 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:13,652 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:53:13,653 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11233 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:13,653 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 20530
2018-06-28 17:53:13,653 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 55
2018-06-28 17:53:13,653 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testRollingUpgrade
2018-06-28 17:53:13,654 [myid:] - INFO  [main:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230
2018-06-28 17:53:13,654 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 17:53:13,654 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdownAll(QuorumAuthTestBase.java:233)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.tearDown(QuorumAuthUpgradeTest.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:53:13,654 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11231:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:53:13,654 [myid:] - INFO  [main:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53447 which had sessionid 0x100065f5a4a0000
2018-06-28 17:53:13,655 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:13,655 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:53:13,655 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:53:13,655 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:53:13,655 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:53:13,655 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:53:13,655 [myid:1] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:53:13,656 [myid:1] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:13,656 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:53:13,656 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:13,656 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:13,656 [myid:1] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:13,657 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:53:13,658 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53436:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53436 ********
2018-06-28 17:53:13,658 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:13,658 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53451:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53451 ********
2018-06-28 17:53:13,657 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53457:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53457 ********
2018-06-28 17:53:13,657 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53445:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53445 ********
2018-06-28 17:53:13,657 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53424:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53424 ********
2018-06-28 17:53:13,658 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53445:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:53:13,658 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53457:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:53:13,658 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53451:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:53:13,658 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11230:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:53:13,658 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:13,659 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:13,658 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53425:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:53425 ********
2018-06-28 17:53:13,658 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53436:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:53:13,660 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:13,660 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:13,660 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:13,659 [myid:1] - ERROR [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:53:13,659 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53425:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:53:13,659 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:53:13,661 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:Leader@520] - Shutting down
2018-06-28 17:53:13,659 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:53:13,658 [myid:1] - WARN  [LearnerHandler-/127.0.0.1:53424:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:53:13,661 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:53:13,661 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:CommitProcessor@184] - Shutting down
2018-06-28 17:53:13,661 [myid:1] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:13,660 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:13,661 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:13,660 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:13,660 [myid:] - INFO  [main:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230
2018-06-28 17:53:13,660 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:13,662 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:13,662 [myid:] - INFO  [main:QuorumBase@315] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11230 to exit thread
2018-06-28 17:53:13,661 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:13,661 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:13,662 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:13,663 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:13,663 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:53:13,663 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x400000005
2018-06-28 17:53:13,663 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x400000005 (n.zxid), 0x5 (n.round), LOOKING (n.state), 0 (n.sid), 0x4 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:13,663 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:13,664 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,664 [myid:0] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:13,664 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,665 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testRollingUpgrade
2018-06-28 17:53:13,665 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testRollingUpgrade
2018-06-28 17:53:13,666 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testNullAuthLearnerServer
2018-06-28 17:53:13,666 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testNullAuthLearnerServer
2018-06-28 17:53:13,666 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11236
2018-06-28 17:53:13,667 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11237
2018-06-28 17:53:13,667 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11238
2018-06-28 17:53:13,667 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11239
2018-06-28 17:53:13,667 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11240
2018-06-28 17:53:13,667 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11241
2018-06-28 17:53:13,668 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 0 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2610185846707682672.junit.dir clientPort = 11236
2018-06-28 17:53:13,669 [myid:] - INFO  [Thread-48:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2610185846707682672.junit.dir/zoo.cfg
2018-06-28 17:53:13,669 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 1 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3789434472617255200.junit.dir clientPort = 11239
2018-06-28 17:53:13,670 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11236
2018-06-28 17:53:13,670 [myid:] - INFO  [Thread-49:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3789434472617255200.junit.dir/zoo.cfg
2018-06-28 17:53:13,670 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11236 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:13,672 [myid:] - INFO  [Thread-48:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,672 [myid:] - INFO  [Thread-49:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,672 [myid:] - INFO  [Thread-48:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,672 [myid:] - INFO  [Thread-49:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,672 [myid:] - WARN  [Thread-48:QuorumPeerConfig@351] - No server failure will be tolerated. You need at least 3 servers.
2018-06-28 17:53:13,672 [myid:] - INFO  [Thread-48:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:13,672 [myid:] - WARN  [Thread-49:QuorumPeerConfig@351] - No server failure will be tolerated. You need at least 3 servers.
2018-06-28 17:53:13,672 [myid:] - INFO  [Thread-49:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:13,673 [myid:0] - INFO  [Thread-48:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:13,673 [myid:1] - INFO  [Thread-49:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:13,673 [myid:1] - INFO  [Thread-49:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:13,673 [myid:1] - INFO  [Thread-49:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:13,673 [myid:0] - INFO  [Thread-48:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:13,673 [myid:0] - INFO  [Thread-48:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:13,673 [myid:1] - WARN  [Thread-49:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:13,673 [myid:1] - INFO  [Thread-49:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:13,673 [myid:0] - WARN  [Thread-48:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:13,673 [myid:0] - INFO  [Thread-48:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:13,673 [myid:1] - INFO  [Thread-49:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:13,673 [myid:0] - INFO  [Thread-48:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:13,674 [myid:1] - INFO  [Thread-49:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11239
2018-06-28 17:53:13,674 [myid:0] - INFO  [Thread-48:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11236
2018-06-28 17:53:13,674 [myid:1] - INFO  [Thread-49:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:13,674 [myid:1] - INFO  [Thread-49:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:13,674 [myid:1] - INFO  [Thread-49:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:13,674 [myid:1] - INFO  [Thread-49:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:13,674 [myid:0] - INFO  [Thread-48:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:13,674 [myid:0] - INFO  [Thread-48:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:13,674 [myid:0] - INFO  [Thread-48:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:13,674 [myid:0] - INFO  [Thread-48:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:13,674 [myid:1] - INFO  [Thread-49:QuorumPeer@1467] - QuorumPeer communication is not secured!
2018-06-28 17:53:13,674 [myid:0] - INFO  [Thread-48:QuorumPeer@1467] - QuorumPeer communication is not secured!
2018-06-28 17:53:13,674 [myid:1] - INFO  [Thread-49:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:13,674 [myid:0] - INFO  [Thread-48:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:13,675 [myid:1] - INFO  [Thread-49:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:13,675 [myid:0] - INFO  [Thread-48:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:13,675 [myid:1] - INFO  [Thread-49:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:13,675 [myid:0] - INFO  [Thread-48:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:13,677 [myid:0] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11238
2018-06-28 17:53:13,677 [myid:1] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11241
2018-06-28 17:53:13,678 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@909] - LOOKING
2018-06-28 17:53:13,678 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:QuorumPeer@909] - LOOKING
2018-06-28 17:53:13,678 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:53:13,678 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:53:13,678 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:13,679 [myid:0] - INFO  [localhost/127.0.0.1:11238:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53484
2018-06-28 17:53:13,679 [myid:1] - INFO  [localhost/127.0.0.1:11241:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53485
2018-06-28 17:53:13,679 [myid:0] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:53:13,679 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:13,680 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:13,680 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:13,680 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:13,680 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:13,680 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:13,680 [myid:0] - INFO  [localhost/127.0.0.1:11238:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53486
2018-06-28 17:53:13,680 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:13,681 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:13,681 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:13,681 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:13,681 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:13,681 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:13,869 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:13,870 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,870 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:13,871 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,871 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@847] - Notification time out: 400
2018-06-28 17:53:13,887 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:QuorumPeer@979] - FOLLOWING
2018-06-28 17:53:13,887 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@991] - LEADING
2018-06-28 17:53:13,887 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3789434472617255200.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3789434472617255200.junit.dir/data/version-2
2018-06-28 17:53:13,887 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2610185846707682672.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2610185846707682672.junit.dir/data/version-2
2018-06-28 17:53:13,887 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 209
2018-06-28 17:53:13,887 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Leader@380] - LEADING - LEADER ELECTION TOOK - 209
2018-06-28 17:53:13,887 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:13,889 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53489:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@6df0ef1e
2018-06-28 17:53:13,891 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53489:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:53:13,891 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53489:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:53:13,891 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53489:LearnerHandler@475] - Sending DIFF
2018-06-28 17:53:13,891 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:53:13,893 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53489:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:53:13,893 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Leader@964] - Have quorum of supporters, sids: [ 0,1 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:53:13,923 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11236
2018-06-28 17:53:13,924 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11236:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53490
2018-06-28 17:53:13,924 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11236:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53490
2018-06-28 17:53:13,925 [myid:0] - INFO  [Thread-51:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:13,926 [myid:0] - INFO  [Thread-51:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53490 (no session established for client)
2018-06-28 17:53:13,926 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:53:13,927 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53491
2018-06-28 17:53:13,927 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53491
2018-06-28 17:53:13,927 [myid:1] - INFO  [Thread-52:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:13,928 [myid:1] - INFO  [Thread-52:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53491 (no session established for client)
2018-06-28 17:53:13,929 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11236,127.0.0.1:11239 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@298ea9f4
2018-06-28 17:53:13,930 [myid:] - WARN  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:13,930 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239
2018-06-28 17:53:13,931 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11239, initiating session
2018-06-28 17:53:13,931 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53492
2018-06-28 17:53:13,931 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:53492
2018-06-28 17:53:13,931 [myid:1] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:53:13,932 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:53:13,932 [myid:0] - INFO  [SyncThread:0:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:53:13,934 [myid:1] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x100065fac030000 with negotiated timeout 30000 for client /127.0.0.1:53492
2018-06-28 17:53:13,934 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11239, sessionid = 0x100065fac030000, negotiated timeout = 30000
2018-06-28 17:53:13,936 [myid:1] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x100065fac030000
2018-06-28 17:53:13,937 [myid:] - INFO  [Time-limited test:ZooKeeper@693] - Session: 0x100065fac030000 closed
2018-06-28 17:53:13,937 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53492 which had sessionid 0x100065fac030000
2018-06-28 17:53:13,937 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 24013
2018-06-28 17:53:13,937 [myid:] - INFO  [Time-limited test-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x100065fac030000
2018-06-28 17:53:13,937 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 54
2018-06-28 17:53:13,938 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testNullAuthLearnerServer
2018-06-28 17:53:13,938 [myid:] - INFO  [main:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236
2018-06-28 17:53:13,938 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdownAll(QuorumAuthTestBase.java:233)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.tearDown(QuorumAuthUpgradeTest.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:53:13,938 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:13,938 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:13,938 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:53:13,939 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:53:13,939 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:53:13,939 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:13,939 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:13,939 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:13,939 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:13,940 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11236:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:53:13,940 [myid:0] - ERROR [localhost/127.0.0.1:11238:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:53:13,941 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:13,941 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:13,941 [myid:] - INFO  [main:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236
2018-06-28 17:53:13,941 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:13,941 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:13,940 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:13,942 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:13,941 [myid:] - INFO  [main:QuorumBase@315] - Waiting for QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236 to exit thread
2018-06-28 17:53:13,942 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:13,942 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:14,276 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:14,276 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:14,277 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:14,277 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:14,277 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@847] - Notification time out: 800
2018-06-28 17:53:14,631 [myid:] - WARN  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:14,631 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227
2018-06-28 17:53:14,632 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:53:14,632 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53495
2018-06-28 17:53:14,632 [myid:0] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 17:53:14,632 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53495 (no session established for client)
2018-06-28 17:53:14,632 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:53:14,666 [myid:1] - INFO  [localhost/127.0.0.1:11232:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:14,946 [myid:0] - INFO  [localhost/127.0.0.1:11238:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:15,081 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:15,081 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:15,081 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:15,082 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:15,082 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 17:53:15,585 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:15,585 [myid:1] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:15,649 [myid:] - WARN  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:15,649 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11233
2018-06-28 17:53:15,649 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11233: Connection refused
2018-06-28 17:53:15,900 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:15,900 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:15,900 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:15,901 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11236:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:15,904 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testNullAuthLearnerServer
2018-06-28 17:53:15,904 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testNullAuthLearnerServer
2018-06-28 17:53:15,904 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testAuthLearnerAgainstNoAuthRequiredServer
2018-06-28 17:53:15,905 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testAuthLearnerAgainstNoAuthRequiredServer
2018-06-28 17:53:15,905 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11242
2018-06-28 17:53:15,905 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11243
2018-06-28 17:53:15,905 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11244
2018-06-28 17:53:15,905 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11245
2018-06-28 17:53:15,905 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11246
2018-06-28 17:53:15,905 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11247
2018-06-28 17:53:15,906 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 0 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5306586095933617182.junit.dir clientPort = 11242
2018-06-28 17:53:15,907 [myid:] - INFO  [Thread-53:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5306586095933617182.junit.dir/zoo.cfg
2018-06-28 17:53:15,908 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 1 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test493935719418775846.junit.dir clientPort = 11245
2018-06-28 17:53:15,908 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11242
2018-06-28 17:53:15,909 [myid:] - INFO  [Thread-54:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test493935719418775846.junit.dir/zoo.cfg
2018-06-28 17:53:15,909 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11242 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:15,910 [myid:] - INFO  [Thread-54:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:15,910 [myid:] - INFO  [Thread-53:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:15,911 [myid:] - INFO  [Thread-54:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:15,911 [myid:] - INFO  [Thread-53:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:15,911 [myid:] - WARN  [Thread-53:QuorumPeerConfig@351] - No server failure will be tolerated. You need at least 3 servers.
2018-06-28 17:53:15,911 [myid:] - WARN  [Thread-54:QuorumPeerConfig@351] - No server failure will be tolerated. You need at least 3 servers.
2018-06-28 17:53:15,911 [myid:] - INFO  [Thread-53:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:15,911 [myid:] - INFO  [Thread-54:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:15,911 [myid:0] - INFO  [Thread-53:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:15,911 [myid:0] - INFO  [Thread-53:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:15,911 [myid:0] - INFO  [Thread-53:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:15,911 [myid:1] - INFO  [Thread-54:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:15,911 [myid:1] - INFO  [Thread-54:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:15,912 [myid:1] - INFO  [Thread-54:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:15,912 [myid:0] - WARN  [Thread-53:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:15,912 [myid:1] - WARN  [Thread-54:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:15,912 [myid:1] - INFO  [Thread-54:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:15,912 [myid:0] - INFO  [Thread-53:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:15,913 [myid:0] - INFO  [Thread-53:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:15,913 [myid:1] - INFO  [Thread-54:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:15,913 [myid:0] - INFO  [Thread-53:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11242
2018-06-28 17:53:15,913 [myid:1] - INFO  [Thread-54:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11245
2018-06-28 17:53:15,913 [myid:0] - INFO  [Thread-53:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:15,913 [myid:0] - INFO  [Thread-53:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:15,913 [myid:1] - INFO  [Thread-54:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:15,914 [myid:1] - INFO  [Thread-54:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:15,914 [myid:1] - INFO  [Thread-54:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:15,914 [myid:1] - INFO  [Thread-54:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:15,914 [myid:0] - INFO  [Thread-53:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:15,914 [myid:0] - INFO  [Thread-53:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:15,914 [myid:1] - INFO  [Thread-54:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:53:15,914 [myid:0] - INFO  [Thread-53:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:53:15,914 [myid:1] - INFO  [Thread-54:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:53:15,914 [myid:0] - INFO  [Thread-53:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to false
2018-06-28 17:53:15,914 [myid:0] - INFO  [Thread-53:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to false
2018-06-28 17:53:15,914 [myid:0] - INFO  [Thread-53:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:53:15,914 [myid:1] - INFO  [Thread-54:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to false
2018-06-28 17:53:15,914 [myid:0] - INFO  [Thread-53:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:53:15,914 [myid:1] - INFO  [Thread-54:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:53:15,914 [myid:0] - INFO  [Thread-53:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:53:15,915 [myid:1] - INFO  [Thread-54:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:53:15,915 [myid:0] - INFO  [Thread-53:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:15,915 [myid:1] - INFO  [Thread-54:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:53:15,915 [myid:1] - INFO  [Thread-54:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:15,915 [myid:0] - INFO  [Thread-53:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:53:15,915 [myid:1] - INFO  [Thread-54:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:53:15,915 [myid:0] - INFO  [Thread-53:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:53:15,915 [myid:1] - INFO  [Thread-54:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:53:15,915 [myid:0] - INFO  [Thread-53:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:15,915 [myid:1] - INFO  [Thread-54:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:15,916 [myid:0] - INFO  [Thread-53:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:15,916 [myid:1] - INFO  [Thread-54:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:15,918 [myid:1] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11247
2018-06-28 17:53:15,918 [myid:0] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11244
2018-06-28 17:53:15,918 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@909] - LOOKING
2018-06-28 17:53:15,918 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:QuorumPeer@909] - LOOKING
2018-06-28 17:53:15,919 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:53:15,919 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:53:15,919 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:15,919 [myid:1] - INFO  [localhost/127.0.0.1:11247:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53501
2018-06-28 17:53:15,919 [myid:0] - INFO  [localhost/127.0.0.1:11244:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53500
2018-06-28 17:53:15,919 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:15,919 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-1:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:53:15,919 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:53:15,920 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:53:15,920 [myid:1] - WARN  [QuorumConnectionThread-[myid=1]-2:SaslQuorumAuthServer@137] - Failed to authenticate using SASL
java.io.EOFException
	at java.io.DataInputStream.readFully(DataInputStream.java:197)
	at java.io.DataInputStream.readLong(DataInputStream.java:416)
	at org.apache.jute.BinaryInputArchive.readLong(BinaryInputArchive.java:67)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuth.nextPacketIsAuth(QuorumAuth.java:91)
	at org.apache.zookeeper.server.quorum.auth.SaslQuorumAuthServer.authenticate(SaslQuorumAuthServer.java:79)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.handleConnection(QuorumCnxManager.java:467)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.receiveConnection(QuorumCnxManager.java:386)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$QuorumConnectionReceiverThread.run(QuorumCnxManager.java:422)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:15,920 [myid:1] - WARN  [QuorumConnectionThread-[myid=1]-2:SaslQuorumAuthServer@138] - Maintaining learner connection despite SASL authentication failure. server addr: /127.0.0.1:53501, quorum.auth.serverRequireSasl: false
2018-06-28 17:53:15,920 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:15,920 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:15,921 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@946] - Exception when using channel: for id 1 my id = 0 error = java.net.SocketException: Broken pipe (Write failed)
2018-06-28 17:53:15,920 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:15,921 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:15,921 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:15,921 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-3:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:53:15,921 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:15,921 [myid:0] - INFO  [localhost/127.0.0.1:11244:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53502
2018-06-28 17:53:15,921 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:15,922 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:15,921 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:15,922 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-3:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:53:15,921 [myid:1] - INFO  [localhost/127.0.0.1:11247:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53503
2018-06-28 17:53:15,922 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-3:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:53:15,922 [myid:1] - WARN  [QuorumConnectionThread-[myid=1]-3:SaslQuorumAuthServer@137] - Failed to authenticate using SASL
java.io.EOFException
	at java.io.DataInputStream.readFully(DataInputStream.java:197)
	at java.io.DataInputStream.readLong(DataInputStream.java:416)
	at org.apache.jute.BinaryInputArchive.readLong(BinaryInputArchive.java:67)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuth.nextPacketIsAuth(QuorumAuth.java:91)
	at org.apache.zookeeper.server.quorum.auth.SaslQuorumAuthServer.authenticate(SaslQuorumAuthServer.java:79)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.handleConnection(QuorumCnxManager.java:467)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.receiveConnection(QuorumCnxManager.java:386)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$QuorumConnectionReceiverThread.run(QuorumCnxManager.java:422)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:15,922 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:15,922 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:15,922 [myid:1] - WARN  [QuorumConnectionThread-[myid=1]-3:SaslQuorumAuthServer@138] - Maintaining learner connection despite SASL authentication failure. server addr: /127.0.0.1:53503, quorum.auth.serverRequireSasl: false
2018-06-28 17:53:15,923 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:15,923 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:15,923 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:15,923 [myid:0] - INFO  [localhost/127.0.0.1:11244:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53504
2018-06-28 17:53:15,923 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:53:15,923 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:15,923 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:15,923 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:15,923 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:15,924 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:15,924 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:15,924 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:16,127 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:QuorumPeer@979] - FOLLOWING
2018-06-28 17:53:16,127 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5306586095933617182.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5306586095933617182.junit.dir/data/version-2
2018-06-28 17:53:16,127 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@991] - LEADING
2018-06-28 17:53:16,128 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test493935719418775846.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test493935719418775846.junit.dir/data/version-2
2018-06-28 17:53:16,128 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 209
2018-06-28 17:53:16,128 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Leader@380] - LEADING - LEADER ELECTION TOOK - 209
2018-06-28 17:53:16,128 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:16,128 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:SaslQuorumAuthLearner@79] - Skipping SASL authentication as quorum.auth.learnerRequireSasl=false
2018-06-28 17:53:16,130 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53505:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@6ab6006c
2018-06-28 17:53:16,132 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53505:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:53:16,132 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53505:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:53:16,132 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53505:LearnerHandler@475] - Sending DIFF
2018-06-28 17:53:16,132 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:53:16,134 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53505:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:53:16,134 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Leader@964] - Have quorum of supporters, sids: [ 0,1 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:53:16,160 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11242
2018-06-28 17:53:16,161 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11242:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53506
2018-06-28 17:53:16,162 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11242:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53506
2018-06-28 17:53:16,162 [myid:0] - INFO  [Thread-56:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:16,163 [myid:0] - INFO  [Thread-56:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53506 (no session established for client)
2018-06-28 17:53:16,163 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11245
2018-06-28 17:53:16,164 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53507
2018-06-28 17:53:16,164 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53507
2018-06-28 17:53:16,164 [myid:1] - INFO  [Thread-57:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:16,165 [myid:1] - INFO  [Thread-57:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53507 (no session established for client)
2018-06-28 17:53:16,165 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11242,127.0.0.1:11245 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@30609e79
2018-06-28 17:53:16,167 [myid:] - WARN  [Time-limited test-SendThread(localhost:11242):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:16,167 [myid:] - INFO  [Time-limited test-SendThread(localhost:11242):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11242
2018-06-28 17:53:16,167 [myid:] - INFO  [Time-limited test-SendThread(localhost:11242):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11242, initiating session
2018-06-28 17:53:16,167 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11242:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53508
2018-06-28 17:53:16,167 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11242:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:53508
2018-06-28 17:53:16,168 [myid:1] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:53:16,169 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:53:16,169 [myid:0] - INFO  [SyncThread:0:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:53:16,170 [myid:0] - INFO  [CommitProcessor:0:ZooKeeperServer@694] - Established session 0x65fb4c30000 with negotiated timeout 30000 for client /127.0.0.1:53508
2018-06-28 17:53:16,170 [myid:] - INFO  [Time-limited test-SendThread(localhost:11242):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11242, sessionid = 0x65fb4c30000, negotiated timeout = 30000
2018-06-28 17:53:16,173 [myid:1] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x65fb4c30000
2018-06-28 17:53:16,174 [myid:] - INFO  [Time-limited test:ZooKeeper@693] - Session: 0x65fb4c30000 closed
2018-06-28 17:53:16,174 [myid:] - INFO  [Time-limited test-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x65fb4c30000
2018-06-28 17:53:16,174 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11242:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53508 which had sessionid 0x65fb4c30000
2018-06-28 17:53:16,174 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 27645
2018-06-28 17:53:16,175 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 71
2018-06-28 17:53:16,175 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testAuthLearnerAgainstNoAuthRequiredServer
2018-06-28 17:53:16,175 [myid:] - INFO  [main:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242
2018-06-28 17:53:16,175 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdownAll(QuorumAuthTestBase.java:233)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.tearDown(QuorumAuthUpgradeTest.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:53:16,175 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:16,175 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:16,175 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:53:16,175 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:53:16,175 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:53:16,176 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:16,176 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:16,176 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:16,176 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:16,177 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11242:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:53:16,177 [myid:0] - ERROR [localhost/127.0.0.1:11244:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:53:16,178 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:16,178 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:16,177 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:16,177 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:16,178 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:16,178 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:16,178 [myid:] - INFO  [main:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242
2018-06-28 17:53:16,179 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:16,179 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:16,179 [myid:] - INFO  [main:QuorumBase@315] - Waiting for QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242 to exit thread
2018-06-28 17:53:16,642 [myid:1] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:53:16,684 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:16,684 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:16,685 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:16,686 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:16,686 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:16,686 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:16,686 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@847] - Notification time out: 3200
2018-06-28 17:53:17,114 [myid:] - WARN  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:17,115 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11230
2018-06-28 17:53:17,115 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11230: Connection refused
2018-06-28 17:53:17,178 [myid:0] - INFO  [localhost/127.0.0.1:11244:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:17,242 [myid:] - WARN  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:17,242 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227
2018-06-28 17:53:17,243 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:53:17,243 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53512
2018-06-28 17:53:17,243 [myid:0] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 17:53:17,243 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53512 (no session established for client)
2018-06-28 17:53:17,243 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:53:17,984 [myid:] - WARN  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:17,984 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11233
2018-06-28 17:53:17,985 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11233: Connection refused
2018-06-28 17:53:18,141 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:18,141 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:18,141 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:18,141 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11242:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:18,144 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testAuthLearnerAgainstNoAuthRequiredServer
2018-06-28 17:53:18,144 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testAuthLearnerAgainstNoAuthRequiredServer
2018-06-28 17:53:18,144 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testAuthLearnerServer
2018-06-28 17:53:18,145 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testAuthLearnerServer
2018-06-28 17:53:18,145 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11248
2018-06-28 17:53:18,145 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11249
2018-06-28 17:53:18,145 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11250
2018-06-28 17:53:18,145 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11251
2018-06-28 17:53:18,145 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11252
2018-06-28 17:53:18,145 [myid:] - INFO  [Time-limited test:PortAssignment@32] - assigning port 11253
2018-06-28 17:53:18,146 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 0 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5902648056964177121.junit.dir clientPort = 11248
2018-06-28 17:53:18,147 [myid:] - INFO  [Thread-58:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5902648056964177121.junit.dir/zoo.cfg
2018-06-28 17:53:18,148 [myid:] - INFO  [Time-limited test:QuorumPeerTestBase$MainThread@92] - id = 1 tmpDir = /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8390266972893329572.junit.dir clientPort = 11251
2018-06-28 17:53:18,148 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11248
2018-06-28 17:53:18,148 [myid:] - INFO  [Thread-59:QuorumPeerConfig@136] - Reading configuration from: /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8390266972893329572.junit.dir/zoo.cfg
2018-06-28 17:53:18,149 [myid:] - INFO  [Time-limited test:ClientBase@290] - server 127.0.0.1:11248 not up java.net.ConnectException: Connection refused (Connection refused)
2018-06-28 17:53:18,150 [myid:] - INFO  [Thread-58:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:18,150 [myid:] - INFO  [Thread-59:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:18,151 [myid:] - INFO  [Thread-58:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:18,151 [myid:] - INFO  [Thread-59:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:18,151 [myid:] - WARN  [Thread-58:QuorumPeerConfig@351] - No server failure will be tolerated. You need at least 3 servers.
2018-06-28 17:53:18,151 [myid:] - INFO  [Thread-58:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:18,151 [myid:] - WARN  [Thread-59:QuorumPeerConfig@351] - No server failure will be tolerated. You need at least 3 servers.
2018-06-28 17:53:18,151 [myid:] - INFO  [Thread-59:QuorumPeerConfig@398] - Defaulting to majority quorums
2018-06-28 17:53:18,151 [myid:0] - INFO  [Thread-58:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:18,151 [myid:0] - INFO  [Thread-58:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:18,151 [myid:0] - INFO  [Thread-58:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:18,151 [myid:1] - INFO  [Thread-59:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3
2018-06-28 17:53:18,151 [myid:1] - INFO  [Thread-59:DatadirCleanupManager@79] - autopurge.purgeInterval set to 0
2018-06-28 17:53:18,151 [myid:1] - INFO  [Thread-59:DatadirCleanupManager@101] - Purge task is not scheduled.
2018-06-28 17:53:18,152 [myid:0] - WARN  [Thread-58:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:18,152 [myid:0] - INFO  [Thread-58:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:18,152 [myid:1] - WARN  [Thread-59:QuorumPeerMain@127] - Unable to register log4j JMX control
javax.management.InstanceAlreadyExistsException: log4j:hiearchy=default
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.ManagedUtil.registerLog4jMBeans(ManagedUtil.java:54)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.runFromConfig(QuorumPeerMain.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:114)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.run(QuorumPeerTestBase.java:157)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:53:18,152 [myid:0] - INFO  [Thread-58:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:18,152 [myid:1] - INFO  [Thread-59:QuorumPeerMain@130] - Starting quorum peer
2018-06-28 17:53:18,152 [myid:0] - INFO  [Thread-58:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11248
2018-06-28 17:53:18,152 [myid:1] - INFO  [Thread-59:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:53:18,153 [myid:1] - INFO  [Thread-59:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11251
2018-06-28 17:53:18,153 [myid:0] - INFO  [Thread-58:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:18,153 [myid:0] - INFO  [Thread-58:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:18,153 [myid:0] - INFO  [Thread-58:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:18,153 [myid:0] - INFO  [Thread-58:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:18,153 [myid:0] - INFO  [Thread-58:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:53:18,153 [myid:1] - INFO  [Thread-59:QuorumPeer@1158] - tickTime set to 4000
2018-06-28 17:53:18,153 [myid:1] - INFO  [Thread-59:QuorumPeer@1204] - initLimit set to 10
2018-06-28 17:53:18,153 [myid:1] - INFO  [Thread-59:QuorumPeer@1178] - minSessionTimeout set to -1
2018-06-28 17:53:18,153 [myid:1] - INFO  [Thread-59:QuorumPeer@1189] - maxSessionTimeout set to -1
2018-06-28 17:53:18,153 [myid:0] - INFO  [Thread-58:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to true
2018-06-28 17:53:18,153 [myid:1] - INFO  [Thread-59:QuorumPeer@1469] - quorum.auth.enableSasl set to true
2018-06-28 17:53:18,154 [myid:0] - INFO  [Thread-58:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to true
2018-06-28 17:53:18,154 [myid:1] - INFO  [Thread-59:QuorumPeer@1454] - quorum.auth.serverRequireSasl set to true
2018-06-28 17:53:18,154 [myid:0] - INFO  [Thread-58:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:53:18,154 [myid:1] - INFO  [Thread-59:QuorumPeer@1460] - quorum.auth.learnerRequireSasl set to true
2018-06-28 17:53:18,154 [myid:0] - INFO  [Thread-58:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:53:18,154 [myid:1] - INFO  [Thread-59:QuorumPeer@1476] - quorum.auth.kerberos.servicePrincipal set to zkquorum/localhost
2018-06-28 17:53:18,154 [myid:0] - INFO  [Thread-58:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:53:18,154 [myid:1] - INFO  [Thread-59:QuorumPeer@1488] - quorum.auth.server.saslLoginContext set to QuorumServer
2018-06-28 17:53:18,154 [myid:0] - INFO  [Thread-58:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:18,154 [myid:1] - INFO  [Thread-59:QuorumPeer@1482] - quorum.auth.learner.saslLoginContext set to QuorumLearner
2018-06-28 17:53:18,155 [myid:1] - INFO  [Thread-59:QuorumPeer@1496] - quorum.cnxn.threads.size set to 20
2018-06-28 17:53:18,155 [myid:0] - INFO  [Thread-58:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:53:18,155 [myid:1] - INFO  [Thread-59:Login@297] - QuorumServer successfully logged in.
2018-06-28 17:53:18,155 [myid:0] - INFO  [Thread-58:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:53:18,155 [myid:1] - INFO  [Thread-59:Login@297] - QuorumLearner successfully logged in.
2018-06-28 17:53:18,155 [myid:1] - INFO  [Thread-59:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:18,155 [myid:0] - INFO  [Thread-58:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:18,156 [myid:0] - INFO  [Thread-58:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:18,156 [myid:1] - INFO  [Thread-59:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:53:18,158 [myid:0] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11250
2018-06-28 17:53:18,158 [myid:1] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: localhost/127.0.0.1:11253
2018-06-28 17:53:18,159 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11251:QuorumPeer@909] - LOOKING
2018-06-28 17:53:18,159 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:QuorumPeer@909] - LOOKING
2018-06-28 17:53:18,159 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11251:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:53:18,159 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:53:18,159 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:18,159 [myid:1] - INFO  [localhost/127.0.0.1:11253:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53515
2018-06-28 17:53:18,159 [myid:0] - INFO  [localhost/127.0.0.1:11250:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53516
2018-06-28 17:53:18,159 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:18,160 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-1:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:18,160 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:18,162 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:18,162 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:18,162 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53516
2018-06-28 17:53:18,162 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-2:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53515
2018-06-28 17:53:18,162 [myid:1] - INFO  [QuorumConnectionThread-[myid=1]-1:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11250, status: SUCCESS
2018-06-28 17:53:18,162 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11253, status: SUCCESS
2018-06-28 17:53:18,162 [myid:0] - INFO  [QuorumConnectionThread-[myid=0]-1:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:53:18,163 [myid:0] - INFO  [localhost/127.0.0.1:11250:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:53517
2018-06-28 17:53:18,163 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:18,163 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:18,164 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:18,164 [myid:0] - WARN  [QuorumConnectionThread-[myid=0]-3:QuorumCnxManager@461] - Exception reading or writing challenge: java.io.EOFException
2018-06-28 17:53:18,164 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:53:18,368 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11251:QuorumPeer@991] - LEADING
2018-06-28 17:53:18,368 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8390266972893329572.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8390266972893329572.junit.dir/data/version-2
2018-06-28 17:53:18,368 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:QuorumPeer@979] - FOLLOWING
2018-06-28 17:53:18,368 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:ZooKeeperServer@174] - Created server with tickTime 4000 minSessionTimeout 8000 maxSessionTimeout 80000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5902648056964177121.junit.dir/data/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5902648056964177121.junit.dir/data/version-2
2018-06-28 17:53:18,368 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 210
2018-06-28 17:53:18,368 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11251:Leader@380] - LEADING - LEADER ELECTION TOOK - 210
2018-06-28 17:53:18,369 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:18,369 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:SecurityUtils@68] - QuorumLearner will use DIGEST-MD5 as SASL mechanism.
2018-06-28 17:53:18,370 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11252:SaslQuorumServerCallbackHandler@143] - Successfully authenticated learner: authenticationID=test;  authorizationID=test.
2018-06-28 17:53:18,371 [myid:1] - INFO  [LearnerCnxAcceptor-localhost/127.0.0.1:11252:SaslQuorumAuthServer@116] - Successfully completed the authentication using SASL. learner addr: /127.0.0.1:53518
2018-06-28 17:53:18,372 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:SaslQuorumAuthLearner@154] - Successfully completed the authentication using SASL. server addr: localhost/127.0.0.1:11252, status: SUCCESS
2018-06-28 17:53:18,372 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53518:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@e1a475a
2018-06-28 17:53:18,374 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53518:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:53:18,374 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53518:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:53:18,374 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53518:LearnerHandler@475] - Sending DIFF
2018-06-28 17:53:18,374 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:53:18,376 [myid:1] - INFO  [LearnerHandler-/127.0.0.1:53518:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:53:18,376 [myid:1] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11251:Leader@964] - Have quorum of supporters, sids: [ 0,1 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:53:18,401 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11248
2018-06-28 17:53:18,402 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11248:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53519
2018-06-28 17:53:18,402 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11248:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53519
2018-06-28 17:53:18,403 [myid:0] - INFO  [Thread-61:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:18,403 [myid:0] - INFO  [Thread-61:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53519 (no session established for client)
2018-06-28 17:53:18,404 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11251
2018-06-28 17:53:18,404 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11251:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53520
2018-06-28 17:53:18,405 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11251:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:53520
2018-06-28 17:53:18,405 [myid:1] - INFO  [Thread-62:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:53:18,406 [myid:1] - INFO  [Thread-62:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53520 (no session established for client)
2018-06-28 17:53:18,406 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11248,127.0.0.1:11251 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@1c5d7deb
2018-06-28 17:53:18,407 [myid:] - WARN  [Time-limited test-SendThread(localhost:11248):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:18,407 [myid:] - INFO  [Time-limited test-SendThread(localhost:11248):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11248
2018-06-28 17:53:18,408 [myid:] - INFO  [Time-limited test-SendThread(localhost:11248):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11248, initiating session
2018-06-28 17:53:18,408 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11248:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53521
2018-06-28 17:53:18,408 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11248:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:53521
2018-06-28 17:53:18,409 [myid:1] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:53:18,410 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:53:18,410 [myid:0] - INFO  [SyncThread:0:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:53:18,411 [myid:0] - INFO  [CommitProcessor:0:ZooKeeperServer@694] - Established session 0x65fbd850000 with negotiated timeout 30000 for client /127.0.0.1:53521
2018-06-28 17:53:18,411 [myid:] - INFO  [Time-limited test-SendThread(localhost:11248):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11248, sessionid = 0x65fbd850000, negotiated timeout = 30000
2018-06-28 17:53:18,414 [myid:1] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x65fbd850000
2018-06-28 17:53:18,415 [myid:] - INFO  [Time-limited test:ZooKeeper@693] - Session: 0x65fbd850000 closed
2018-06-28 17:53:18,415 [myid:] - INFO  [Time-limited test-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x65fbd850000
2018-06-28 17:53:18,415 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11248:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53521 which had sessionid 0x65fbd850000
2018-06-28 17:53:18,415 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 31154
2018-06-28 17:53:18,416 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 85
2018-06-28 17:53:18,416 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testAuthLearnerServer
2018-06-28 17:53:18,416 [myid:] - INFO  [main:QuorumBase@306] - Shutting down quorum peer QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248
2018-06-28 17:53:18,416 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumBase.shutdown(QuorumBase.java:307)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$TestQPMain.shutdown(QuorumPeerTestBase.java:59)
	at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:171)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdown(QuorumAuthTestBase.java:240)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthTestBase.shutdownAll(QuorumAuthTestBase.java:233)
	at org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.tearDown(QuorumAuthUpgradeTest.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:53:18,416 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:18,416 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:53:18,416 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:53:18,416 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:53:18,416 [myid:0] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:53:18,416 [myid:0] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:53:18,416 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:53:18,417 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:18,417 [myid:0] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:53:18,418 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11248:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:53:18,418 [myid:0] - ERROR [localhost/127.0.0.1:11250:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:53:18,418 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:18,419 [myid:] - INFO  [main:QuorumBase@310] - Shutting down leader election QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248
2018-06-28 17:53:18,418 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:18,419 [myid:0] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:18,418 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:53:18,419 [myid:1] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:53:18,419 [myid:] - INFO  [main:QuorumBase@315] - Waiting for QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248 to exit thread
2018-06-28 17:53:18,419 [myid:0] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:18,419 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:53:18,420 [myid:1] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:53:18,924 [myid:0] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:53:18,924 [myid:0] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:53:19,132 [myid:] - WARN  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:19,132 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11230
2018-06-28 17:53:19,132 [myid:] - INFO  [Time-limited test-SendThread(localhost:11230):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11230: Connection refused
2018-06-28 17:53:19,420 [myid:0] - INFO  [localhost/127.0.0.1:11250:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:53:19,829 [myid:] - WARN  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1011] - SASL configuration failed: javax.security.auth.login.LoginException: No JAAS configuration section named 'Client' was found in specified JAAS configuration file: '/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5982967253018526991.junit.dir/jaas.conf'. Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
2018-06-28 17:53:19,829 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227
2018-06-28 17:53:19,830 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:53:19,830 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:53523
2018-06-28 17:53:19,830 [myid:0] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 17:53:19,830 [myid:0] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:53523 (no session established for client)
2018-06-28 17:53:19,830 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100065f5a4a0000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:53:19,890 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 1 at election address localhost/127.0.0.1:11232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:19,890 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:19,890 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 2 at election address localhost/127.0.0.1:11235
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:53:19,891 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: localhost to address: localhost/127.0.0.1
2018-06-28 17:53:19,891 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@847] - Notification time out: 6400
2018-06-28 17:53:20,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:53:20,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:53:20,383 [myid:0] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:53:20,383 [myid:0] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11248:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:53:20,386 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testAuthLearnerServer
2018-06-28 17:53:20,386 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testAuthLearnerServer
------------- ---------------- ---------------

Testcase: testAuthLearnerAgainstNullAuthServer took 2.493 sec
Testcase: testRollingUpgrade took 20.92 sec
Testcase: testNullAuthLearnerServer took 2.238 sec
Testcase: testAuthLearnerAgainstNoAuthRequiredServer took 2.24 sec
Testcase: testAuthLearnerServer took 2.242 sec
