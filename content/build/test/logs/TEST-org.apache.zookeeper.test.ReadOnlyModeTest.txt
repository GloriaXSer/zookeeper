Testsuite: org.apache.zookeeper.test.ReadOnlyModeTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 37.837 sec
------------- Standard Output ---------------
2018-06-28 18:41:55,017 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11221
2018-06-28 18:41:55,021 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11222
2018-06-28 18:41:55,028 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,029 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11223
2018-06-28 18:41:55,029 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11224
2018-06-28 18:41:55,029 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,030 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11225
2018-06-28 18:41:55,030 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11226
2018-06-28 18:41:55,030 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,030 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11221
2018-06-28 18:41:55,037 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:41:55,047 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11221
2018-06-28 18:41:55,060 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11223
2018-06-28 18:41:55,060 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:41:55,060 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11223
2018-06-28 18:41:55,060 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11225
2018-06-28 18:41:55,061 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:41:55,062 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11225
2018-06-28 18:41:55,067 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testSessionEstablishment
2018-06-28 18:41:55,067 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:41:55,068 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:41:55,068 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:41:55,068 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:41:55,069 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:41:55,069 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:41:55,069 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:41:55,069 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:41:55,071 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:41:55,072 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 18:41:55,074 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11221 is no longer accepting client connections
2018-06-28 18:41:55,074 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:41:55,074 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11223 is no longer accepting client connections
2018-06-28 18:41:55,075 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11225
2018-06-28 18:41:55,075 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11225 is no longer accepting client connections
2018-06-28 18:41:55,075 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11221
2018-06-28 18:41:55,075 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:41:55,076 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11221
2018-06-28 18:41:55,078 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:41:55,080 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:41:55,084 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12222
2018-06-28 18:41:55,086 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11223
2018-06-28 18:41:55,086 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:41:55,087 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11223
2018-06-28 18:41:55,087 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:41:55,088 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:41:55,089 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12224
2018-06-28 18:41:55,089 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 18:41:55,091 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@909] - LOOKING
2018-06-28 18:41:55,091 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:41:55,091 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@909] - LOOKING
2018-06-28 18:41:55,091 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:41:55,092 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63787
2018-06-28 18:41:55,098 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ServerCnxn@324] - The list of known four letter word commands is : [{1936881266=srvr, 1937006964=stat, 2003003491=wchc, 1685417328=dump, 1668445044=crst, 1936880500=srst, 1701738089=envi, 1668247142=conf, 2003003507=wchs, 2003003504=wchp, 1668247155=cons, 1835955314=mntr, 1769173615=isro, 1920298859=ruok, 1735683435=gtmk, 1937010027=stmk}]
2018-06-28 18:41:55,098 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ServerCnxn@325] - The list of enabled four letter word commands is : [[wchs, stat, wchp, stmk, conf, ruok, mntr, srvr, wchc, envi, srst, isro, dump, gtmk, crst, cons]]
2018-06-28 18:41:55,098 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63787
2018-06-28 18:41:55,098 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT
2018-06-28 18:41:55,098 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:host.name=10.0.0.10
2018-06-28 18:41:55,098 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:java.version=1.8.0_172
2018-06-28 18:41:55,098 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:java.vendor=Oracle Corporation
2018-06-28 18:41:55,098 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:java.class.path=/Users/hanm/Desktop/projects/git/apache/zookeeper/build/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ant-eclipse-1.0-jvm1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ivy-2.4.0.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr-2.7.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-annotations-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-runtime-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-api-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-avl-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-constants-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-i18n-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-event-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm1-2.0.0-M2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-ldif-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-all-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-ber-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-i18n-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-client-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-codec-core-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-aci-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-sp-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-model-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/audience-annotations-0.5.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/bcprov-jdk15-140.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/checkstyle-6.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-beanutils-core-1.8.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-cli-1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-collections-3.2.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-io-2.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-lang-2.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-logging-1.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-pool-1.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/ehcache-core-2.4.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/guava-18.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-all-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-core-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/jline-0.9.94.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/junit-4.12.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/log4j-1.2.17.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mavibot-1.0.0-M1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mina-core-2.0.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mockito-all-1.8.5.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/netty-3.10.6.Final.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/org.abego.treelayout.core-1.0.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-api-1.7.25.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-log4j12-1.7.25.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-launcher.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit4.jar
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:java.library.path=/Users/hanm/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:java.io.tmpdir=/var/folders/wv/j6wmf1nj5h7c36qz9b81kmfw0000gn/T/
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:java.compiler=<NA>
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:os.name=Mac OS X
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:os.arch=x86_64
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:os.version=10.13.5
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:user.name=hanm
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:user.home=/Users/hanm
2018-06-28 18:41:55,099 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Environment@100] - Server environment:user.dir=/Users/hanm/Desktop/projects/git/apache/zookeeper
2018-06-28 18:41:55,099 [myid:] - INFO  [Thread-2:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63787 (no session established for client)
2018-06-28 18:41:55,101 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2
2018-06-28 18:41:55,101 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2
2018-06-28 18:41:55,102 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 18:41:55,102 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 18:41:55,103 [myid:] - INFO  [/127.0.0.1:12222:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63788
2018-06-28 18:41:55,103 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 18:41:55,103 [myid:] - INFO  [/127.0.0.1:12224:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63789
2018-06-28 18:41:55,104 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:55,104 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:55,106 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:55,105 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:55,105 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:55,107 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,107 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,108 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:55,108 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:55,108 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:55,108 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:55,109 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,311 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@979] - FOLLOWING
2018-06-28 18:41:55,311 [myid:] - INFO  [Thread-4:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:41:55,311 [myid:] - INFO  [Thread-3:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:41:55,311 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@991] - LEADING
2018-06-28 18:41:55,314 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@64] - TCP NoDelay set to: true
2018-06-28 18:41:55,314 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Learner@86] - TCP NoDelay set to: true
2018-06-28 18:41:55,315 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2
2018-06-28 18:41:55,315 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 213
2018-06-28 18:41:55,315 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2
2018-06-28 18:41:55,316 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@380] - LEADING - LEADER ELECTION TOOK - 214
2018-06-28 18:41:55,317 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,323 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63793:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@29cd06da
2018-06-28 18:41:55,326 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63793:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 18:41:55,326 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63793:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 18:41:55,326 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63793:LearnerHandler@475] - Sending DIFF
2018-06-28 18:41:55,326 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 18:41:55,329 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63793:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 18:41:55,329 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 18:41:55,356 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 18:41:55,357 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63794
2018-06-28 18:41:55,357 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63794
2018-06-28 18:41:55,358 [myid:] - INFO  [Thread-6:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:41:55,358 [myid:] - INFO  [Thread-6:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63794 (no session established for client)
2018-06-28 18:41:55,358 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:41:55,359 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63795
2018-06-28 18:41:55,359 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63795
2018-06-28 18:41:55,360 [myid:] - INFO  [Thread-7:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:41:55,361 [myid:] - INFO  [Thread-7:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63795 (no session established for client)
2018-06-28 18:41:55,362 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testSessionEstablishment
2018-06-28 18:41:55,362 [myid:] - INFO  [Time-limited test:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223
2018-06-28 18:41:55,362 [myid:] - INFO  [Time-limited test:Leader@520] - Shutting down
2018-06-28 18:41:55,363 [myid:] - INFO  [Time-limited test:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.ReadOnlyModeTest.testSessionEstablishment(ReadOnlyModeTest.java:195)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:55,363 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 18:41:55,363 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12223:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:41:55,363 [myid:] - INFO  [Time-limited test:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:41:55,364 [myid:] - INFO  [Time-limited test:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:41:55,364 [myid:] - INFO  [Time-limited test:ProposalRequestProcessor@88] - Shutting down
2018-06-28 18:41:55,364 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:41:55,364 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 18:41:55,364 [myid:] - INFO  [Time-limited test:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 18:41:55,364 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:41:55,365 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:41:55,365 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:41:55,365 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:41:55,366 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 18:41:55,366 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63793:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63793 ********
2018-06-28 18:41:55,366 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:41:55,366 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:41:55,366 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63793:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:41:55,367 [myid:] - ERROR [/127.0.0.1:12224:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:41:55,367 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:41:55,367 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:41:55,367 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@520] - Shutting down
2018-06-28 18:41:55,367 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:41:55,367 [myid:] - INFO  [Time-limited test:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223
2018-06-28 18:41:55,367 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:41:55,368 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:41:55,367 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:41:55,368 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:41:55,369 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:41:55,368 [myid:] - INFO  [Time-limited test:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223 to exit thread
2018-06-28 18:41:55,368 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:41:55,368 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:41:55,367 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@502] - shutting down
2018-06-28 18:41:55,369 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:41:55,369 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:41:55,370 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:CommitProcessor@184] - Shutting down
2018-06-28 18:41:55,370 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:41:55,370 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:41:55,370 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:41:55,370 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:41:55,371 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:41:55,371 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@909] - LOOKING
2018-06-28 18:41:55,371 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:41:55,371 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2
2018-06-28 18:41:55,371 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 18:41:55,372 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:55,372 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12224
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:55,372 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,372 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:55,373 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:host.name=10.0.0.10
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.version=1.8.0_172
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.vendor=Oracle Corporation
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.class.path=/Users/hanm/Desktop/projects/git/apache/zookeeper/build/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ant-eclipse-1.0-jvm1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ivy-2.4.0.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr-2.7.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-annotations-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-runtime-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-api-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-avl-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-constants-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-i18n-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-event-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm1-2.0.0-M2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-ldif-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-all-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-ber-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-i18n-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-client-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-codec-core-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-aci-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-sp-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-model-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/audience-annotations-0.5.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/bcprov-jdk15-140.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/checkstyle-6.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-beanutils-core-1.8.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-cli-1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-collections-3.2.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-io-2.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-lang-2.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-logging-1.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-pool-1.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/ehcache-core-2.4.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/guava-18.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-all-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-core-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/jline-0.9.94.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/junit-4.12.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/log4j-1.2.17.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mavibot-1.0.0-M1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mina-core-2.0.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mockito-all-1.8.5.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/netty-3.10.6.Final.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/org.abego.treelayout.core-1.0.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-api-1.7.25.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-log4j12-1.7.25.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-launcher.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit4.jar
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.library.path=/Users/hanm/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.io.tmpdir=/var/folders/wv/j6wmf1nj5h7c36qz9b81kmfw0000gn/T/
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:java.compiler=<NA>
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:os.name=Mac OS X
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:os.arch=x86_64
2018-06-28 18:41:55,374 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:os.version=10.13.5
2018-06-28 18:41:55,375 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:user.name=hanm
2018-06-28 18:41:55,375 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:user.home=/Users/hanm
2018-06-28 18:41:55,375 [myid:] - INFO  [Time-limited test:Environment@100] - Client environment:user.dir=/Users/hanm/Desktop/projects/git/apache/zookeeper
2018-06-28 18:41:55,375 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11221,127.0.0.1:11223,127.0.0.1:11225 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@1f18f867
2018-06-28 18:41:55,385 [myid:] - INFO  [Time-limited test-SendThread(localhost:11225):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:41:55,387 [myid:] - INFO  [Time-limited test-SendThread(localhost:11225):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11225: Connection refused
2018-06-28 18:41:55,495 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:41:55,496 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11221, initiating session
2018-06-28 18:41:55,496 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63799
2018-06-28 18:41:55,498 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 18:41:55,498 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63799 (no session established for client)
2018-06-28 18:41:55,498 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x0, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:41:55,576 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12224
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:41:55,577 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,577 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:41:55,578 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,578 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 400
2018-06-28 18:41:55,980 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12224
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:41:55,980 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,981 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:41:55,981 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:55,981 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 800
2018-06-28 18:41:56,372 [myid:] - INFO  [/127.0.0.1:12224:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:41:56,475 [myid:] - INFO  [Time-limited test-SendThread(localhost:11223):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11223. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:41:56,476 [myid:] - INFO  [Time-limited test-SendThread(localhost:11223):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11223: Connection refused
2018-06-28 18:41:56,548 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:41:56,792 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12224
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:41:56,793 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:56,793 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:41:56,793 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:56,793 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 18:41:57,392 [myid:] - INFO  [Thread-8:ReadOnlyZooKeeperServer@67] - Read-only server started
2018-06-28 18:41:57,957 [myid:] - INFO  [Time-limited test-SendThread(localhost:11225):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:41:57,958 [myid:] - INFO  [Time-limited test-SendThread(localhost:11225):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11225: Connection refused
2018-06-28 18:41:58,112 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:41:58,112 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:41:58,395 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12224
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:41:58,396 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:58,396 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:41:58,397 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:58,397 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 3200
2018-06-28 18:41:58,754 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:41:58,755 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11221, initiating session
2018-06-28 18:41:58,755 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63810
2018-06-28 18:41:58,755 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:63810
2018-06-28 18:41:58,764 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::ZooKeeperServer@694] - Established session 0x100066a97440000 with negotiated timeout 30000 for client /127.0.0.1:63810
2018-06-28 18:41:58,764 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11221, sessionid = 0x100066a97440000, negotiated timeout = 30000 (READ-ONLY mode)
2018-06-28 18:41:58,765 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11223 for being r/w. Timeout 200
2018-06-28 18:41:58,765 [myid:] - INFO  [Time-limited test:ReadOnlyModeTest@205] - Connected as r/o mode with state CONNECTEDREADONLY and session id 72064648912044032
2018-06-28 18:41:58,765 [myid:] - INFO  [Time-limited test:QuorumUtil@186] - Creating QuorumPeer 2; public port 11223
2018-06-28 18:41:58,766 [myid:] - INFO  [Time-limited test:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:41:58,766 [myid:] - INFO  [Time-limited test:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11223
2018-06-28 18:41:58,768 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12224
2018-06-28 18:41:58,768 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:41:58,769 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63812
2018-06-28 18:41:58,769 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@909] - LOOKING
2018-06-28 18:41:58,769 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:41:58,769 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2
2018-06-28 18:41:58,769 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63812
2018-06-28 18:41:58,770 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 18:41:58,770 [myid:] - INFO  [Thread-10:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63812 (no session established for client)
2018-06-28 18:41:58,771 [myid:] - INFO  [/127.0.0.1:12222:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63813
2018-06-28 18:41:58,771 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,772 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,772 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:58,772 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,772 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:58,772 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,773 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,773 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,773 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:58,773 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,773 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:58,773 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,774 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:58,773 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:58,975 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11225 for being r/w. Timeout 400
2018-06-28 18:41:58,975 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@991] - LEADING
2018-06-28 18:41:58,975 [myid:] - INFO  [Thread-9:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:41:58,975 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2
2018-06-28 18:41:58,976 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@380] - LEADING - LEADER ELECTION TOOK - 207
2018-06-28 18:41:58,976 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63810 which had sessionid 0x100066a97440000
2018-06-28 18:41:58,977 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@502] - shutting down
2018-06-28 18:41:58,977 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100066a97440000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:41:58,977 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:41:58,977 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:41:58,977 [myid:] - INFO  [ReadOnlyRequestProcessor:1:ReadOnlyRequestProcessor@111] - ReadOnlyRequestProcessor exited loop!
2018-06-28 18:41:58,977 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:41:58,977 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:41:58,978 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@979] - FOLLOWING
2018-06-28 18:41:58,978 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2
2018-06-28 18:41:58,978 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 3607
2018-06-28 18:41:58,979 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:58,980 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63818:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@29cd06da
2018-06-28 18:41:58,989 [myid:] - ERROR [LearnerHandler-/127.0.0.1:63818:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.io.IOException: Follower is ahead of the leader, leader summary: 1 (current epoch), 0 (last zxid)
	at org.apache.zookeeper.server.quorum.Leader.waitForEpochAck(Leader.java:916)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:381)
2018-06-28 18:41:58,990 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63818:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63818 ********
2018-06-28 18:41:58,990 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Learner.syncWithLeader(Learner.java:327)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:83)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 18:41:58,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:41:58,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:41:58,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@909] - LOOKING
2018-06-28 18:41:58,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:41:58,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2
2018-06-28 18:41:58,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x1
2018-06-28 18:41:58,992 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,992 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 18:41:58,992 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:58,992 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:58,992 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:59,025 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:41:59,025 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63820
2018-06-28 18:41:59,026 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63820
2018-06-28 18:41:59,027 [myid:] - INFO  [Thread-12:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63820 (no session established for client)
2018-06-28 18:41:59,203 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 400
2018-06-28 18:41:59,203 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:59,203 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 18:41:59,203 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:59,204 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:59,204 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:59,287 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:41:59,288 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63822
2018-06-28 18:41:59,289 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63822
2018-06-28 18:41:59,289 [myid:] - INFO  [Thread-13:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63822 (no session established for client)
2018-06-28 18:41:59,550 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:41:59,551 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63823
2018-06-28 18:41:59,551 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63823
2018-06-28 18:41:59,552 [myid:] - INFO  [Thread-14:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63823 (no session established for client)
2018-06-28 18:41:59,613 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 800
2018-06-28 18:41:59,614 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:59,614 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 18:41:59,614 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:41:59,614 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:41:59,615 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:41:59,810 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:41:59,811 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63825
2018-06-28 18:41:59,811 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63825
2018-06-28 18:41:59,812 [myid:] - INFO  [Thread-15:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63825 (no session established for client)
2018-06-28 18:42:00,072 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:00,073 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63826
2018-06-28 18:42:00,074 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63826
2018-06-28 18:42:00,075 [myid:] - INFO  [Thread-16:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63826 (no session established for client)
2018-06-28 18:42:00,328 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:00,329 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63827
2018-06-28 18:42:00,330 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63827
2018-06-28 18:42:00,330 [myid:] - INFO  [Thread-17:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63827 (no session established for client)
2018-06-28 18:42:00,420 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 18:42:00,421 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:00,421 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 18:42:00,421 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:00,421 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:00,421 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:00,553 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:00,586 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:00,587 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63829
2018-06-28 18:42:00,587 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63829
2018-06-28 18:42:00,588 [myid:] - INFO  [Thread-18:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63829 (no session established for client)
2018-06-28 18:42:00,754 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:00,754 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11221, initiating session
2018-06-28 18:42:00,754 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63830
2018-06-28 18:42:00,755 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 18:42:00,755 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63830 (no session established for client)
2018-06-28 18:42:00,755 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100066a97440000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:00,848 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:00,850 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63831
2018-06-28 18:42:00,850 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63831
2018-06-28 18:42:00,851 [myid:] - INFO  [Thread-19:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63831 (no session established for client)
2018-06-28 18:42:01,000 [myid:] - INFO  [Thread-11:ReadOnlyZooKeeperServer@67] - Read-only server started
2018-06-28 18:42:01,109 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:01,110 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63832
2018-06-28 18:42:01,110 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63832
2018-06-28 18:42:01,111 [myid:] - INFO  [Thread-20:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63832 (no session established for client)
2018-06-28 18:42:01,371 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:01,372 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63833
2018-06-28 18:42:01,372 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63833
2018-06-28 18:42:01,373 [myid:] - INFO  [Thread-21:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63833 (no session established for client)
2018-06-28 18:42:01,503 [myid:] - INFO  [Time-limited test-SendThread(localhost:11223):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11223. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:01,504 [myid:] - INFO  [Time-limited test-SendThread(localhost:11223):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11223, initiating session
2018-06-28 18:42:01,504 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63834
2018-06-28 18:42:01,504 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 18:42:01,504 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63834 (no session established for client)
2018-06-28 18:42:01,505 [myid:] - INFO  [Time-limited test-SendThread(localhost:11223):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100066a97440000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:01,630 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:01,630 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63835
2018-06-28 18:42:01,631 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63835
2018-06-28 18:42:01,631 [myid:] - INFO  [Thread-22:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63835 (no session established for client)
2018-06-28 18:42:01,690 [myid:] - INFO  [Time-limited test-SendThread(localhost:11225):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:01,691 [myid:] - INFO  [Time-limited test-SendThread(localhost:11225):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11225: Connection refused
2018-06-28 18:42:01,883 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:01,884 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63837
2018-06-28 18:42:01,885 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63837
2018-06-28 18:42:01,885 [myid:] - INFO  [Thread-23:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63837 (no session established for client)
2018-06-28 18:42:02,032 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 3200
2018-06-28 18:42:02,032 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:02,032 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 18:42:02,033 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:02,033 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:02,033 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:02,136 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:02,137 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63839
2018-06-28 18:42:02,137 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63839
2018-06-28 18:42:02,138 [myid:] - INFO  [Thread-24:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63839 (no session established for client)
2018-06-28 18:42:02,390 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:02,391 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63840
2018-06-28 18:42:02,391 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63840
2018-06-28 18:42:02,392 [myid:] - INFO  [Thread-25:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63840 (no session established for client)
2018-06-28 18:42:02,652 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:02,653 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63841
2018-06-28 18:42:02,654 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63841
2018-06-28 18:42:02,654 [myid:] - INFO  [Thread-26:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63841 (no session established for client)
2018-06-28 18:42:02,887 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:02,888 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11221, initiating session
2018-06-28 18:42:02,888 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63842
2018-06-28 18:42:02,888 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:63842
2018-06-28 18:42:02,889 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::ZooKeeperServer@694] - Established session 0x100066aa5650000 with negotiated timeout 30000 for client /127.0.0.1:63842
2018-06-28 18:42:02,889 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11221, sessionid = 0x100066aa5650000, negotiated timeout = 30000 (READ-ONLY mode)
2018-06-28 18:42:02,889 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11223 for being r/w. Timeout 800
2018-06-28 18:42:02,890 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63843
2018-06-28 18:42:02,891 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing isro command from /127.0.0.1:63843
2018-06-28 18:42:02,899 [myid:] - INFO  [Thread-27:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63843 (no session established for client)
2018-06-28 18:42:02,915 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:02,916 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63844
2018-06-28 18:42:02,916 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63844
2018-06-28 18:42:02,916 [myid:] - INFO  [Thread-28:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63844 (no session established for client)
2018-06-28 18:42:03,177 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:03,178 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63845
2018-06-28 18:42:03,178 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63845
2018-06-28 18:42:03,179 [myid:] - INFO  [Thread-29:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63845 (no session established for client)
2018-06-28 18:42:03,437 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:03,438 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63846
2018-06-28 18:42:03,438 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63846
2018-06-28 18:42:03,438 [myid:] - INFO  [Thread-30:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63846 (no session established for client)
2018-06-28 18:42:03,699 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:03,700 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63847
2018-06-28 18:42:03,700 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63847
2018-06-28 18:42:03,701 [myid:] - INFO  [Thread-31:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63847 (no session established for client)
2018-06-28 18:42:03,701 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11225 for being r/w. Timeout 1600
2018-06-28 18:42:03,961 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:03,962 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63849
2018-06-28 18:42:03,963 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63849
2018-06-28 18:42:03,963 [myid:] - INFO  [Thread-32:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63849 (no session established for client)
2018-06-28 18:42:04,219 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:04,220 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63850
2018-06-28 18:42:04,221 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63850
2018-06-28 18:42:04,221 [myid:] - INFO  [Thread-33:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63850 (no session established for client)
2018-06-28 18:42:04,482 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:04,483 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63851
2018-06-28 18:42:04,483 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63851
2018-06-28 18:42:04,484 [myid:] - INFO  [Thread-34:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63851 (no session established for client)
2018-06-28 18:42:04,742 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:04,743 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63852
2018-06-28 18:42:04,743 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63852
2018-06-28 18:42:04,744 [myid:] - INFO  [Thread-35:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63852 (no session established for client)
2018-06-28 18:42:04,998 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:04,999 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: Timeout while waiting for epoch to be acked by quorum
	at org.apache.zookeeper.server.quorum.Leader.waitForEpochAck(Leader.java:936)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:415)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:42:04,999 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@520] - Shutting down
2018-06-28 18:42:04,999 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: Forcing shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1000)
2018-06-28 18:42:04,999 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63853
2018-06-28 18:42:05,000 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@909] - LOOKING
2018-06-28 18:42:05,000 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12223:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:42:05,000 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:05,000 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63853
2018-06-28 18:42:05,000 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2
2018-06-28 18:42:05,001 [myid:] - INFO  [Thread-36:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63853 (no session established for client)
2018-06-28 18:42:05,001 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 18:42:05,001 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:05,001 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:05,001 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:05,002 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:05,212 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@847] - Notification time out: 400
2018-06-28 18:42:05,212 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:05,212 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:05,212 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:05,213 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:05,261 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:05,262 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63856
2018-06-28 18:42:05,262 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63856
2018-06-28 18:42:05,263 [myid:] - INFO  [Thread-38:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63856 (no session established for client)
2018-06-28 18:42:05,302 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11221 for being r/w. Timeout 3200
2018-06-28 18:42:05,304 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63857
2018-06-28 18:42:05,304 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing isro command from /127.0.0.1:63857
2018-06-28 18:42:05,305 [myid:] - INFO  [Thread-39:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63857 (no session established for client)
2018-06-28 18:42:05,522 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:05,523 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63858
2018-06-28 18:42:05,523 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63858
2018-06-28 18:42:05,524 [myid:] - INFO  [Thread-40:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63858 (no session established for client)
2018-06-28 18:42:05,622 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@847] - Notification time out: 800
2018-06-28 18:42:05,623 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:05,623 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:05,623 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:05,624 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:05,784 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:05,785 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63860
2018-06-28 18:42:05,786 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63860
2018-06-28 18:42:05,786 [myid:] - INFO  [Thread-41:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63860 (no session established for client)
2018-06-28 18:42:06,040 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:06,041 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63861
2018-06-28 18:42:06,041 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63861
2018-06-28 18:42:06,042 [myid:] - INFO  [Thread-42:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63861 (no session established for client)
2018-06-28 18:42:06,302 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:06,303 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63862
2018-06-28 18:42:06,304 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63862
2018-06-28 18:42:06,304 [myid:] - INFO  [Thread-43:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63862 (no session established for client)
2018-06-28 18:42:06,433 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 18:42:06,434 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:06,434 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:06,434 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:06,435 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:06,557 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:06,558 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63864
2018-06-28 18:42:06,558 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63864
2018-06-28 18:42:06,559 [myid:] - INFO  [Thread-44:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63864 (no session established for client)
2018-06-28 18:42:06,811 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:06,812 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63865
2018-06-28 18:42:06,813 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63865
2018-06-28 18:42:06,813 [myid:] - INFO  [Thread-45:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63865 (no session established for client)
2018-06-28 18:42:07,004 [myid:] - INFO  [Thread-37:ReadOnlyZooKeeperServer@67] - Read-only server started
2018-06-28 18:42:07,069 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:07,070 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63866
2018-06-28 18:42:07,070 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63866
2018-06-28 18:42:07,070 [myid:] - INFO  [Thread-46:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:07,071 [myid:] - INFO  [Thread-46:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63866 (no session established for client)
2018-06-28 18:42:07,331 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:07,332 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63867
2018-06-28 18:42:07,333 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63867
2018-06-28 18:42:07,333 [myid:] - INFO  [Thread-47:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:07,333 [myid:] - INFO  [Thread-47:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63867 (no session established for client)
2018-06-28 18:42:07,594 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:07,595 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63868
2018-06-28 18:42:07,595 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63868
2018-06-28 18:42:07,596 [myid:] - INFO  [Thread-48:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:07,596 [myid:] - INFO  [Thread-48:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63868 (no session established for client)
2018-06-28 18:42:07,857 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:07,858 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63869
2018-06-28 18:42:07,858 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63869
2018-06-28 18:42:07,859 [myid:] - INFO  [Thread-49:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:07,859 [myid:] - INFO  [Thread-49:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63869 (no session established for client)
2018-06-28 18:42:08,044 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@847] - Notification time out: 3200
2018-06-28 18:42:08,045 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:08,044 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:08,045 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:08,045 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:08,119 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:08,120 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63871
2018-06-28 18:42:08,121 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63871
2018-06-28 18:42:08,121 [myid:] - INFO  [Thread-50:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:08,122 [myid:] - INFO  [Thread-50:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63871 (no session established for client)
2018-06-28 18:42:08,382 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:08,383 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63872
2018-06-28 18:42:08,383 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63872
2018-06-28 18:42:08,384 [myid:] - INFO  [Thread-51:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:08,384 [myid:] - INFO  [Thread-51:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63872 (no session established for client)
2018-06-28 18:42:08,512 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11223 for being r/w. Timeout 6400
2018-06-28 18:42:08,513 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63873
2018-06-28 18:42:08,513 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing isro command from /127.0.0.1:63873
2018-06-28 18:42:08,514 [myid:] - INFO  [Thread-52:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63873 (no session established for client)
2018-06-28 18:42:08,635 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:08,640 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63874
2018-06-28 18:42:08,640 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63874
2018-06-28 18:42:08,641 [myid:] - INFO  [Thread-53:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:08,641 [myid:] - INFO  [Thread-53:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63874 (no session established for client)
2018-06-28 18:42:08,899 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:08,900 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63875
2018-06-28 18:42:08,900 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63875
2018-06-28 18:42:08,901 [myid:] - INFO  [Thread-54:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:08,901 [myid:] - INFO  [Thread-54:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63875 (no session established for client)
2018-06-28 18:42:09,161 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:09,162 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63876
2018-06-28 18:42:09,163 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63876
2018-06-28 18:42:09,163 [myid:] - INFO  [Thread-55:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:09,163 [myid:] - INFO  [Thread-55:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63876 (no session established for client)
2018-06-28 18:42:09,424 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:09,424 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63877
2018-06-28 18:42:09,425 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63877
2018-06-28 18:42:09,425 [myid:] - INFO  [Thread-56:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:09,425 [myid:] - INFO  [Thread-56:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63877 (no session established for client)
2018-06-28 18:42:09,682 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:09,683 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63878
2018-06-28 18:42:09,683 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63878
2018-06-28 18:42:09,684 [myid:] - INFO  [Thread-57:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:09,684 [myid:] - INFO  [Thread-57:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63878 (no session established for client)
2018-06-28 18:42:09,937 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:09,938 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63879
2018-06-28 18:42:09,938 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63879
2018-06-28 18:42:09,939 [myid:] - INFO  [Thread-58:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:09,939 [myid:] - INFO  [Thread-58:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63879 (no session established for client)
2018-06-28 18:42:10,193 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:10,194 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63880
2018-06-28 18:42:10,194 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63880
2018-06-28 18:42:10,194 [myid:] - INFO  [Thread-59:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:10,195 [myid:] - INFO  [Thread-59:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63880 (no session established for client)
2018-06-28 18:42:10,447 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:10,448 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63881
2018-06-28 18:42:10,448 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63881
2018-06-28 18:42:10,448 [myid:] - INFO  [Thread-60:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:10,449 [myid:] - INFO  [Thread-60:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63881 (no session established for client)
2018-06-28 18:42:10,704 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:10,705 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63882
2018-06-28 18:42:10,706 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63882
2018-06-28 18:42:10,706 [myid:] - INFO  [Thread-61:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:10,706 [myid:] - INFO  [Thread-61:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63882 (no session established for client)
2018-06-28 18:42:10,961 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:10,962 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63883
2018-06-28 18:42:10,962 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63883
2018-06-28 18:42:10,963 [myid:] - INFO  [Thread-62:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:10,963 [myid:] - INFO  [Thread-62:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63883 (no session established for client)
2018-06-28 18:42:11,221 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:11,222 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63884
2018-06-28 18:42:11,222 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63884
2018-06-28 18:42:11,223 [myid:] - INFO  [Thread-63:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:11,223 [myid:] - INFO  [Thread-63:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63884 (no session established for client)
2018-06-28 18:42:11,253 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@847] - Notification time out: 6400
2018-06-28 18:42:11,253 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:11,254 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:11,253 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@847] - Notification time out: 6400
2018-06-28 18:42:11,254 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:11,254 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:11,254 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:11,254 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:11,254 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:11,255 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:11,255 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:11,255 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1 (n.zxid), 0x3 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:11,255 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:11,255 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:11,466 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:11,466 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:11,466 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63842 which had sessionid 0x100066aa5650000
2018-06-28 18:42:11,466 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:11,466 [myid:] - INFO  [ReadOnlyRequestProcessor:2:ReadOnlyRequestProcessor@111] - ReadOnlyRequestProcessor exited loop!
2018-06-28 18:42:11,467 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100066aa5650000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:11,467 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:11,467 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:11,467 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:11,467 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:11,467 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:11,467 [myid:] - INFO  [ReadOnlyRequestProcessor:1:ReadOnlyRequestProcessor@111] - ReadOnlyRequestProcessor exited loop!
2018-06-28 18:42:11,467 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:11,468 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@979] - FOLLOWING
2018-06-28 18:42:11,467 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:11,468 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2
2018-06-28 18:42:11,468 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 6467
2018-06-28 18:42:11,468 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@991] - LEADING
2018-06-28 18:42:11,468 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6847303897863453908.junit.dir/version-2
2018-06-28 18:42:11,468 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Leader@380] - LEADING - LEADER ELECTION TOOK - 12478
2018-06-28 18:42:11,470 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:11,471 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63888:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@229f4cf9
2018-06-28 18:42:11,478 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:11,479 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63889
2018-06-28 18:42:11,479 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63889
2018-06-28 18:42:11,480 [myid:] - INFO  [Thread-64:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63889 (no session established for client)
2018-06-28 18:42:11,480 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63888:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x1 minCommittedLog=0x1 peerLastZxid=0x0
2018-06-28 18:42:11,480 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63888:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 18:42:11,480 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63888:LearnerHandler@475] - Sending SNAP
2018-06-28 18:42:11,480 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63888:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x300000000sent zxid of db as 0x1
2018-06-28 18:42:11,480 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Learner@336] - Getting a snapshot from leader 0x1
2018-06-28 18:42:11,482 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FileTxnSnapLog@301] - Snapshotting: 0x1 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6696543207991339977.junit.dir/version-2/snapshot.1
2018-06-28 18:42:11,485 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63888:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 18:42:11,485 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x300000000
2018-06-28 18:42:11,731 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:11,732 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63890
2018-06-28 18:42:11,732 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63890
2018-06-28 18:42:11,732 [myid:] - INFO  [Thread-66:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:11,733 [myid:] - INFO  [Thread-66:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63890 (no session established for client)
2018-06-28 18:42:11,733 [myid:] - INFO  [Time-limited test:ReadOnlyModeTest@212] - Server 127.0.0.1:11223 is up
2018-06-28 18:42:12,004 [myid:] - INFO  [Time-limited test-SendThread(localhost:11225):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:12,004 [myid:] - INFO  [Time-limited test-SendThread(localhost:11225):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11225: Connection refused
2018-06-28 18:42:12,553 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:12,553 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:13,430 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:13,431 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11221, initiating session
2018-06-28 18:42:13,431 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63892
2018-06-28 18:42:13,431 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:63892
2018-06-28 18:42:13,432 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.300000001
2018-06-28 18:42:13,432 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Follower@119] - Got zxid 0x300000001 expected 0x1
2018-06-28 18:42:13,433 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.300000001
2018-06-28 18:42:13,444 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x100066ace5b0000 with negotiated timeout 30000 for client /127.0.0.1:63892
2018-06-28 18:42:13,447 [myid:] - INFO  [Time-limited test-SendThread(localhost:11221):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11221, sessionid = 0x100066ace5b0000, negotiated timeout = 30000
2018-06-28 18:42:13,447 [myid:] - INFO  [Time-limited test:ReadOnlyModeTest@222] - Connected as rw mode with state CONNECTED and session id 72064649836298240
2018-06-28 18:42:13,458 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x100066ace5b0000
2018-06-28 18:42:13,459 [myid:] - INFO  [Time-limited test:ZooKeeper@693] - Session: 0x100066ace5b0000 closed
2018-06-28 18:42:13,459 [myid:] - INFO  [Time-limited test-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x100066ace5b0000
2018-06-28 18:42:13,459 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 11078
2018-06-28 18:42:13,459 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 38
2018-06-28 18:42:13,459 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63892 which had sessionid 0x100066ace5b0000
2018-06-28 18:42:13,459 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testSessionEstablishment
2018-06-28 18:42:13,459 [myid:] - INFO  [main:QuorumUtil@251] - TearDown started
2018-06-28 18:42:13,461 [myid:] - INFO  [main:QuorumUtil@255] - fdcount after test is: 120
2018-06-28 18:42:13,461 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221
2018-06-28 18:42:13,461 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 18:42:13,461 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.QuorumUtil.tearDown(QuorumUtil.java:258)
	at org.apache.zookeeper.test.ReadOnlyModeTest.tearDown(ReadOnlyModeTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 18:42:13,461 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:13,462 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12221:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:42:13,462 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:13,462 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:13,462 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 18:42:13,462 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 18:42:13,462 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:13,462 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:13,462 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 18:42:13,462 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:13,462 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:13,463 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:13,464 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 18:42:13,464 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:13,464 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63888:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63888 ********
2018-06-28 18:42:13,464 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:13,464 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63888:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:42:13,464 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:13,465 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:13,464 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:13,465 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:13,464 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:13,464 [myid:] - ERROR [/127.0.0.1:12222:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:13,464 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:13,465 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:13,465 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:42:13,464 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:42:13,466 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Leader@520] - Shutting down
2018-06-28 18:42:13,466 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:13,466 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:42:13,466 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:CommitProcessor@184] - Shutting down
2018-06-28 18:42:13,465 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:13,465 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:13,465 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221
2018-06-28 18:42:13,466 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:13,466 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:13,466 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:13,466 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221 to exit thread
2018-06-28 18:42:13,467 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223
2018-06-28 18:42:13,467 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.QuorumUtil.tearDown(QuorumUtil.java:258)
	at org.apache.zookeeper.test.ReadOnlyModeTest.tearDown(ReadOnlyModeTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 18:42:13,467 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:13,467 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:13,467 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:13,467 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:13,467 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:13,467 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:13,468 [myid:] - ERROR [/127.0.0.1:12224:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:13,468 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223
2018-06-28 18:42:13,468 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223 to exit thread
2018-06-28 18:42:13,468 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:13,468 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:13,468 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:13,468 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 18:42:13,469 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11221 is no longer accepting client connections
2018-06-28 18:42:13,469 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 18:42:13,469 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11223 is no longer accepting client connections
2018-06-28 18:42:13,469 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11225
2018-06-28 18:42:13,469 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11225 is no longer accepting client connections
2018-06-28 18:42:13,471 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testSessionEstablishment
2018-06-28 18:42:13,471 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testSessionEstablishment
2018-06-28 18:42:13,480 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11227
2018-06-28 18:42:13,481 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11228
2018-06-28 18:42:13,481 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,481 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11229
2018-06-28 18:42:13,482 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11230
2018-06-28 18:42:13,482 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,482 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11231
2018-06-28 18:42:13,482 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11232
2018-06-28 18:42:13,482 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,482 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11227
2018-06-28 18:42:13,483 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:13,483 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 18:42:13,483 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11229
2018-06-28 18:42:13,483 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:13,483 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11229
2018-06-28 18:42:13,484 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11231
2018-06-28 18:42:13,484 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:13,484 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11231
2018-06-28 18:42:13,484 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testSeekForRwServer
2018-06-28 18:42:13,484 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:13,485 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:13,485 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:13,485 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:13,485 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:13,485 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:13,485 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:13,485 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:13,485 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:13,485 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:13,486 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11227 is no longer accepting client connections
2018-06-28 18:42:13,486 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11229
2018-06-28 18:42:13,486 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11229 is no longer accepting client connections
2018-06-28 18:42:13,486 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11231
2018-06-28 18:42:13,486 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11231 is no longer accepting client connections
2018-06-28 18:42:13,486 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11227
2018-06-28 18:42:13,486 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:13,487 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 18:42:13,487 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:13,488 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:13,489 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12228
2018-06-28 18:42:13,489 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11229
2018-06-28 18:42:13,490 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:13,490 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11229
2018-06-28 18:42:13,490 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 18:42:13,490 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:13,490 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2
2018-06-28 18:42:13,491 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:13,491 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 18:42:13,491 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:13,491 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:13,491 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12230
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:13,492 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,492 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:13,492 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,493 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12230
2018-06-28 18:42:13,493 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:13,494 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63901
2018-06-28 18:42:13,494 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@909] - LOOKING
2018-06-28 18:42:13,494 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63901
2018-06-28 18:42:13,494 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:13,494 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5226238606660475917.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5226238606660475917.junit.dir/version-2
2018-06-28 18:42:13,495 [myid:] - INFO  [Thread-69:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63901 (no session established for client)
2018-06-28 18:42:13,495 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 18:42:13,496 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63902
2018-06-28 18:42:13,496 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:13,497 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:13,497 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:13,497 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:13,498 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:13,497 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:13,498 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,498 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:13,498 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,708 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@991] - LEADING
2018-06-28 18:42:13,708 [myid:] - INFO  [Thread-68:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:13,708 [myid:] - INFO  [Thread-70:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:13,708 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 18:42:13,708 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5226238606660475917.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5226238606660475917.junit.dir/version-2
2018-06-28 18:42:13,709 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2
2018-06-28 18:42:13,709 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 218
2018-06-28 18:42:13,709 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Leader@380] - LEADING - LEADER ELECTION TOOK - 214
2018-06-28 18:42:13,710 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,711 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63905:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@24059118
2018-06-28 18:42:13,713 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63905:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 18:42:13,713 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63905:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 18:42:13,713 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63905:LearnerHandler@475] - Sending DIFF
2018-06-28 18:42:13,713 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 18:42:13,715 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63905:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 18:42:13,715 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 18:42:13,745 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:13,746 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63906
2018-06-28 18:42:13,746 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63906
2018-06-28 18:42:13,747 [myid:] - INFO  [Thread-72:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:13,747 [myid:] - INFO  [Thread-72:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63906 (no session established for client)
2018-06-28 18:42:13,748 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11229
2018-06-28 18:42:13,748 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63907
2018-06-28 18:42:13,748 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63907
2018-06-28 18:42:13,749 [myid:] - INFO  [Thread-73:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:13,750 [myid:] - INFO  [Thread-73:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63907 (no session established for client)
2018-06-28 18:42:13,750 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testSeekForRwServer
2018-06-28 18:42:13,750 [myid:] - INFO  [Time-limited test:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229
2018-06-28 18:42:13,751 [myid:] - INFO  [Time-limited test:Leader@520] - Shutting down
2018-06-28 18:42:13,751 [myid:] - INFO  [Time-limited test:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.ReadOnlyModeTest.testSeekForRwServer(ReadOnlyModeTest.java:250)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:13,751 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:13,751 [myid:] - INFO  [Time-limited test:2018-06-28 18:42:13,751 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12229:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:42:13,751 [myid:] - INFO  [Time-limited test:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:13,752 [myid:] - INFO  [Time-limited test:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:13,752 [myid:] - INFO  [Time-limited test:ProposalRequestProcessor@88] - Shutting down
2018-06-28 18:42:13,752 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:13,752 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 18:42:13,753 [myid:] - INFO  [Time-limited test:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 18:42:13,753 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:13,753 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:13,753 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:13,753 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:13,754 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 18:42:13,754 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:13,754 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63905:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63905 ********
2018-06-28 18:42:13,755 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63905:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:42:13,755 [myid:] - ERROR [/127.0.0.1:12230:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:13,755 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:13,756 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:13,756 [myid:] - INFO  [Time-limited test:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229
2018-06-28 18:42:13,755 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:13,755 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:13,755 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:42:13,757 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:13,756 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229 to exit thread
2018-06-28 18:42:13,756 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:13,756 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:13,757 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Leader@520] - Shutting down
2018-06-28 18:42:13,758 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:13,757 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:13,758 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:13,758 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:42:13,758 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:CommitProcessor@184] - Shutting down
2018-06-28 18:42:13,758 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:42:13,758 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:13,758 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:13,759 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:MBeanRegistry@121] - Failed to unregister MBean InMemoryDataTree
ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11227,127.0.0.1:11229,127.0.0.1:11231 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@7a55eee2
2018-06-28 18:42:13,759 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:MBeanRegistry@138] - Error during unregister
javax.management.InstanceNotFoundException: org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1095)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.exclusiveUnregisterMBean(DefaultMBeanServerInterceptor.java:427)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.unregisterMBean(DefaultMBeanServerInterceptor.java:415)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.unregisterMBean(JmxMBeanServer.java:546)
	at org.apache.zookeeper.jmx.MBeanRegistry.unregister(MBeanRegistry.java:119)
	at org.apache.zookeeper.jmx.MBeanRegistry.unregister(MBeanRegistry.java:136)
	at org.apache.zookeeper.server.quorum.LearnerZooKeeperServer.unregisterJMX(LearnerZooKeeperServer.java:127)
	at org.apache.zookeeper.server.ZooKeeperServer.shutdown(ZooKeeperServer.java:535)
	at org.apache.zookeeper.server.ZooKeeperServer.shutdown(ZooKeeperServer.java:490)
	at org.apache.zookeeper.server.quorum.FollowerZooKeeperServer.shutdown(FollowerZooKeeperServer.java:142)
	at org.apache.zookeeper.server.quorum.Learner.shutdown(Learner.java:563)
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:170)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:13,759 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:13,759 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:13,759 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 18:42:13,759 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:13,760 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2
2018-06-28 18:42:13,760 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 18:42:13,760 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:13,760 [myid:2018-06-28 18:42:13,760 [myid:] - INFO  [] - Time-limited test-SendThread(localhost:11227):WARN ClientCnxn$SendThread [@WorkerSender[myid=1]1029:] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:13,760 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12230
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:13,7612018-06-28 18:42:13,761 [myid: [myid:] - ] - INFOINFO   [ [Time-limited test-SendThread(localhost:11227)WorkerSender[myid=1]::QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 18:42:13,761 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63909
] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@383] - 2018-06-28 18:42:13,761Exception causing close of session 0x0: ZooKeeperServer not running [myid:
2018-06-28 18:42:13,761 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:13,761 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63909 (no session established for client)
2018-06-28 18:42:13,761 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,761 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x0, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:13,970 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12230
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:13,971 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,971 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:13,971 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:13,971 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@847] - Notification time out: 400
2018-06-28 18:42:14,264 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:14,264 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:14,264 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:14,264 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:14,382 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12230
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:14,383 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:14,383 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:14,383 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:14,383 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@847] - Notification time out: 800
2018-06-28 18:42:14,394 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:14,395 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11229: Connection refused
2018-06-28 18:42:14,475 [myid:] - INFO  [/127.0.0.1:12222:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:14,475 [myid:] - INFO  [/127.0.0.1:12224:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:14,552 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:14,552 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:14,648 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:14,649 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11231: Connection refused
2018-06-28 18:42:14,766 [myid:] - INFO  [/127.0.0.1:12230:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:15,194 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12230
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:15,195 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:15,195 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:15,195 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:15,195 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 18:42:15,771 [myid:] - INFO  [Thread-74:ReadOnlyZooKeeperServer@67] - Read-only server started
2018-06-28 18:42:15,957 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:15,957 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 18:42:15,957 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63919
2018-06-28 18:42:15,958 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:63919
2018-06-28 18:42:15,958 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::ZooKeeperServer@694] - Established session 0x100066adf190000 with negotiated timeout 30000 for client /127.0.0.1:63919
2018-06-28 18:42:15,959 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11227, sessionid = 0x100066adf190000, negotiated timeout = 30000 (READ-ONLY mode)
2018-06-28 18:42:15,959 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11229 for being r/w. Timeout 200
2018-06-28 18:42:15,965 [myid:] - INFO  [Time-limited test:QuorumUtil@186] - Creating QuorumPeer 2; public port 11229
2018-06-28 18:42:15,966 [myid:] - INFO  [Time-limited test:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:15,966 [myid:] - INFO  [Time-limited test:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11229
2018-06-28 18:42:15,968 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12230
2018-06-28 18:42:15,968 [myid:] - INFO  [Time-limited test:QuorumUtil@186] - Creating QuorumPeer 3; public port 11231
2018-06-28 18:42:15,969 [myid:] - INFO  [Time-limited test:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:15,969 [myid:] - INFO  [Time-limited test:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11231
2018-06-28 18:42:15,969 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@909] - LOOKING
2018-06-28 18:42:15,969 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:15,969 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5226238606660475917.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5226238606660475917.junit.dir/version-2
2018-06-28 18:42:15,969 [myid:] - INFO  [Time-limited test:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:15,970 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 18:42:15,970 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63921
2018-06-28 18:42:15,970 [myid:] - INFO  [Time-limited test:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:15,971 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,971 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,972184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:15,972 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12232
  [Time-limited test:2018-06-28 18:42:15,972 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,973 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:15,973 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,973 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,973 [myid:] - INFO  [2018-06-28 18:42:15,973 [myid:WorkerReceiver[myid=2]:FastLeaderElection@] - 595] - INFO  [/127.0.0.1:12232:Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,973 [myid:] - INFO  [/127.0.0.1:12232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63923
2018-06-28 18:42:15,973 [myid:] - INFO  [WorkerSender[myid=2]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (3, 2)
2018-06-28 18:42:15,973 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63924
2018-06-28 18:42:15,974 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63924
2018-06-28 18:42:15,974 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer@909] - LOOKING
2018-06-28 18:42:15,974 [myid:] - INFO  [/127.0.0.1:12230:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63925
2018-06-28 18:42:15,974 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:15,975 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6260959525489452321.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6260959525489452321.junit.dir/version-2
2018-06-28 18:42:15,975 [myid:] - INFO  [Thread-76:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:15,975 [myid:] - INFO  [Thread-76:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63924 (no session established for client)
2018-06-28 18:42:15,976 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:FastLeaderElection@813] - New election. My id =  3, proposed zxid=0x0
2018-06-28 18:42:15,976 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,976 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63926
2018-06-28 18:42:15,977 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,977 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,978 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,978 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,978 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,978 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,979 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,979 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:15,979 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:16,162 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11231 for being r/w. Timeout 400
2018-06-28 18:42:16,164 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63927
2018-06-28 18:42:16,164 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:NIOServerCnxn@908] - Processing isro command from /127.0.0.1:63927
2018-06-28 18:42:16,165 [myid:] - INFO  [Thread-78:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63927 (no session established for client)
2018-06-28 18:42:16,190 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer@979] - FOLLOWING
2018-06-28 18:42:16,190 [myid:] - INFO  [Thread-77:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:16,190 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6260959525489452321.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6260959525489452321.junit.dir/version-2
2018-06-28 18:42:16,190 [myid:] - INFO  [Thread-75:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:16,190 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@991] - LEADING
2018-06-28 18:42:16,191 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 215
2018-06-28 18:42:16,191 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5226238606660475917.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5226238606660475917.junit.dir/version-2
2018-06-28 18:42:16,191 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Leader@380] - LEADING - LEADER ELECTION TOOK - 221
2018-06-28 18:42:16,191 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:16,192 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63928:LearnerHandler@346] - Follower sid: 3 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@63fa8938
2018-06-28 18:42:16,195 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63928:LearnerHandler@401] - Synchronizing with Follower sid: 3 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 18:42:16,195 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63928:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 18:42:16,195 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63928:LearnerHandler@475] - Sending DIFF
2018-06-28 18:42:16,195 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 18:42:16,197 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63928:LearnerHandler@535] - Received NEWLEADER-ACK message from 3
2018-06-28 18:42:16,197 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Leader@964] - Have quorum of supporters, sids: [ 2,3 ]; starting up and setting last processed zxid: 0x200000000
2018-06-28 18:42:16,236 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:16,237 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63929
2018-06-28 18:42:16,237 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63929
2018-06-28 18:42:16,238 [myid:] - INFO  [Thread-80:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:16,238 [myid:] - INFO  [Thread-80:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63929 (no session established for client)
2018-06-28 18:42:16,491 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:16,492 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63930
2018-06-28 18:42:16,492 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63930
2018-06-28 18:42:16,492 [myid:] - INFO  [Thread-81:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:16,493 [myid:] - INFO  [Thread-81:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63930 (no session established for client)
] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@2018-06-28 18:42:16,501409] - WorkerReceiver is down
2018-06-28 18:42:16,501 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:16,569 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11227 for being r/w. Timeout 800
2018-06-28 18:42:16,571 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63931
2018-06-28 18:42:16,571 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing isro command from /127.0.0.1:63931
2018-06-28 18:42:16,571 [myid:] - INFO  [Thread-82:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63931 (no session established for client)
2018-06-28 18:42:16,752 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:16,753 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63932
2018-06-28 18:42:16,753 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63932
2018-06-28 18:42:16,754 [myid:] - INFO  [Thread-83:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:16,754 [myid:] - INFO  [Thread-83:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63932 (no session established for client)
2018-06-28 18:42:17,014 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:17,015 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63933
2018-06-28 18:42:17,016 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63933
2018-06-28 18:42:17,016 [myid:] - INFO  [Thread-84:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:17,016 [myid:] - INFO  [Thread-84:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63933 (no session established for client)
2018-06-28 18:42:17,277 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:17,278 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63934
2018-06-28 18:42:17,278 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63934
2018-06-28 18:42:17,278 [myid:] - INFO  [Thread-85:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:17,279 [myid:] - INFO  [Thread-85:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63934 (no session established for client)
2018-06-28 18:42:17,374 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11229 for being r/w. Timeout 1600
2018-06-28 18:42:17,376 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63935
2018-06-28 18:42:17,376 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxn@908] - Processing isro command from /127.0.0.1:63935
2018-06-28 18:42:17,377 [myid:] - INFO  [Thread-86:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63935 (no session established for client)
2018-06-28 18:42:17,377 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1164] - Majority server found at localhost:11229
2018-06-28 18:42:17,377 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@376] - Unable to read additional data from client sessionid 0x100066adf190000, likely client has closed socket
2018-06-28 18:42:17,378 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63919 which had sessionid 0x100066adf190000
2018-06-28 18:42:17,535 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:17,536 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63936
2018-06-28 18:42:17,536 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63936
2018-06-28 18:42:17,537 [myid:] - INFO  [Thread-87:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:17,537 [myid:] - INFO  [Thread-87:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63936 (no session established for client)
2018-06-28 18:42:17,794 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:17,795 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63937
2018-06-28 18:42:17,796 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63937
2018-06-28 18:42:17,796 [myid:] - INFO  [Thread-88:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:17,796 [myid:] - INFO  [Thread-88:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63937 (no session established for client)
2018-06-28 18:42:17,811 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:17,811 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11229, initiating session
2018-06-28 18:42:17,811 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63938
2018-06-28 18:42:17,812 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:63938
2018-06-28 18:42:17,813 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.200000001
2018-06-28 18:42:17,813 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:Follower@119] - Got zxid 0x200000001 expected 0x1
2018-06-28 18:42:17,813 [myid:] - INFO  [SyncThread:3:FileTxnLog@213] - Creating new log file: log.200000001
2018-06-28 18:42:17,822 [myid:] - INFO  [CommitProcessor:2:ZooKeeperServer@694] - Established session 0x200066ae0c40000 with negotiated timeout 30000 for client /127.0.0.1:63938
2018-06-28 18:42:17,822 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11229, sessionid = 0x200066ae0c40000, negotiated timeout = 30000
2018-06-28 18:42:18,057 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:18,058 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63939
2018-06-28 18:42:18,058 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63939
2018-06-28 18:42:18,058 [myid:] - INFO  [Thread-89:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:18,059 [myid:] - INFO  [Thread-89:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63939 (no session established for client)
2018-06-28 18:42:18,062 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,062 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 18:42:18,062 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 18:42:18,063 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), LEADING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,063 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 3 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,064 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:18,064 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:18,064 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:18,064 [myid:] - INFO  [ReadOnlyRequestProcessor:1:ReadOnlyRequestProcessor@111] - ReadOnlyRequestProcessor exited loop!
2018-06-28 18:42:18,064 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:18,064 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:18,065 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 18:42:18,065 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2
2018-06-28 18:42:18,065 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4305
2018-06-28 18:42:18,065 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,066 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63940:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@24059118
2018-06-28 18:42:18,068 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63940:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x200000002 minCommittedLog=0x200000001 peerLastZxid=0x1
2018-06-28 18:42:18,068 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63940:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 18:42:18,068 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63940:LearnerHandler@475] - Sending SNAP
2018-06-28 18:42:18,068 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63940:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x1  zxid of leader is 0x200000002sent zxid of db as 0x200000002
2018-06-28 18:42:18,069 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Learner@336] - Getting a snapshot from leader 0x200000002
2018-06-28 18:42:18,070 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FileTxnSnapLog@301] - Snapshotting: 0x200000002 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1266078135627052598.junit.dir/version-2/snapshot.200000002
2018-06-28 18:42:18,072 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63940:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 18:42:18,074 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 23120
2018-06-28 18:42:18,074 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 58
2018-06-28 18:42:18,074 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testSeekForRwServer
2018-06-28 18:42:18,074 [myid:] - INFO  [main:QuorumUtil@251] - TearDown started
2018-06-28 18:42:18,074 [myid:] - INFO  [main:QuorumUtil@255] - fdcount after test is: 132
2018-06-28 18:42:18,074 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227
2018-06-28 18:42:18,074 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.QuorumUtil.tearDown(QuorumUtil.java:258)
	at org.apache.zookeeper.test.ReadOnlyModeTest.tearDown(ReadOnlyModeTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 18:42:18,075 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:18,075 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:18,075 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:42:18,075 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 18:42:18,075 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:42:18,075 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:18,075 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:18,076 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:18,076 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:18,076 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:18,077 [myid:] - ERROR [/127.0.0.1:12228:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:18,077 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:18,078 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:18,077 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227
2018-06-28 18:42:18,078 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:18,078 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:18,077 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:18,078 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:18,077 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:18,078 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:18,077 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:18,079 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:18,077 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:18,079 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:18,077 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:18,079 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:18,078 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227 to exit thread
2018-06-28 18:42:18,079 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:18,079 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:18,215 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:18,215 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:18,215 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:18,216 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:18,217 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229
2018-06-28 18:42:18,217 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 18:42:18,217 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.QuorumUtil.tearDown(QuorumUtil.java:258)
	at org.apache.zookeeper.test.ReadOnlyModeTest.tearDown(ReadOnlyModeTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 18:42:18,218 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12229:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:42:18,218 [myid:] - INFO  [main:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63938 which had sessionid 0x200066ae0c40000
2018-06-28 18:42:18,218 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:18,218 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x200066ae0c40000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:18,219 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:18,219 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:18,219 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 18:42:18,219 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 18:42:18,219 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:18,219 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:18,219 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 18:42:18,220 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:18,220 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:18,220 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:18,221 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 18:42:18,221 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63940:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63940 ********
2018-06-28 18:42:18,221 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:18,221 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:18,222 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:18,221 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63928:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63928 ********
2018-06-28 18:42:18,222 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:18,222 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:42:18,221 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63940:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:42:18,223 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:18,224 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:18,223 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229
2018-06-28 18:42:18,223 [myid:] - INFO  [FollowerRequestProcessor:3:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:42:18,223 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:CommitProcessor@184] - Shutting down
2018-06-28 18:42:18,222 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:18,224 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:18,223 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:18,222 [myid:] - ERROR [/127.0.0.1:12230:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:18,222 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:42:18,225 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Leader@520] - Shutting down
2018-06-28 18:42:18,222 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63928:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:42:18,225 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:18,225 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:18,225 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:18,225 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:18,224 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:18,224 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:18,224 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229 to exit thread
2018-06-28 18:42:18,226 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231
2018-06-28 18:42:18,226 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.QuorumUtil.tearDown(QuorumUtil.java:258)
	at org.apache.zookeeper.test.ReadOnlyModeTest.tearDown(ReadOnlyModeTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 18:42:18,226 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:18,226 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:18,226 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:18,226 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:18,226 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:18,227 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:18,228 [myid:] - ERROR [/127.0.0.1:12232:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:18,228 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231
2018-06-28 18:42:18,228 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231 to exit thread
2018-06-28 18:42:18,228 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 18:42:18,228 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11227 is no longer accepting client connections
2018-06-28 18:42:18,229 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11229
2018-06-28 18:42:18,229 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11229 is no longer accepting client connections
2018-06-28 18:42:18,229 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11231
2018-06-28 18:42:18,229 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11231 is no longer accepting client connections
2018-06-28 18:42:18,230 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testSeekForRwServer
2018-06-28 18:42:18,230 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testSeekForRwServer
2018-06-28 18:42:18,237 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11233
2018-06-28 18:42:18,237 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11234
2018-06-28 18:42:18,237 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,238 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11235
2018-06-28 18:42:18,238 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11236
2018-06-28 18:42:18,238 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,239 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11237
2018-06-28 18:42:18,239 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11238
2018-06-28 18:42:18,239 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,239 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11233
2018-06-28 18:42:18,240 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:18,240 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 18:42:18,240 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11235
2018-06-28 18:42:18,241 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:18,241 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11235
2018-06-28 18:42:18,241 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11237
2018-06-28 18:42:18,242 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:18,242 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11237
2018-06-28 18:42:18,243 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testReadOnlyClient
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:18,243 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:18,243 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 18:42:18,244 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11233 is no longer accepting client connections
2018-06-28 18:42:18,244 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11235
2018-06-28 18:42:18,244 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11235 is no longer accepting client connections
2018-06-28 18:42:18,244 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11237
2018-06-28 18:42:18,244 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11237 is no longer accepting client connections
2018-06-28 18:42:18,244 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11233
2018-06-28 18:42:18,245 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:18,245 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 18:42:18,245 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:18,246 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:18,247 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12234
2018-06-28 18:42:18,247 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11235
2018-06-28 18:42:18,248 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:18,248 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11235
2018-06-28 18:42:18,249 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 18:42:18,249 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:18,249 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8834467247970250689.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8834467247970250689.junit.dir/version-2
2018-06-28 18:42:18,249 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:18,249 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 18:42:18,249 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,250 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12236
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:18,250 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:18,250 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,251 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:18,251 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,251 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12236
2018-06-28 18:42:18,252 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 18:42:18,252 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63949
2018-06-28 18:42:18,252 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@909] - LOOKING
2018-06-28 18:42:18,252 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63949
2018-06-28 18:42:18,252 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:18,253 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2792444674345998224.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2792444674345998224.junit.dir/version-2
2018-06-28 18:42:18,253 [myid:] - INFO  [Thread-93:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63949 (no session established for client)
2018-06-28 18:42:18,253 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 18:42:18,254 [myid:] - INFO  [/127.0.0.1:12234:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63950
2018-06-28 18:42:18,254 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,255 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:18,255 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,255 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,255 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,255 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,255 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,255 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:18,256 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,463 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@991] - LEADING
2018-06-28 18:42:18,463 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 18:42:18,463 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2792444674345998224.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2792444674345998224.junit.dir/version-2
2018-06-28 18:42:18,463 [myid:] - INFO  [Thread-92:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:18,463 [myid:] - INFO  [Thread-94:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:18,463 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Leader@380] - LEADING - LEADER ELECTION TOOK - 210
2018-06-28 18:42:18,463 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8834467247970250689.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8834467247970250689.junit.dir/version-2
2018-06-28 18:42:18,464 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 215
2018-06-28 18:42:18,464 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,465 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63953:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@47abf43f
2018-06-28 18:42:18,467 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63953:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 18:42:18,467 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63953:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 18:42:18,467 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63953:LearnerHandler@475] - Sending DIFF
2018-06-28 18:42:18,467 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 18:42:18,469 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63953:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 18:42:18,469 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 18:42:18,506 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 18:42:18,507 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63954
2018-06-28 18:42:18,507 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63954
2018-06-28 18:42:18,507 [myid:] - INFO  [Thread-96:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:18,508 [myid:] - INFO  [Thread-96:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63954 (no session established for client)
2018-06-28 18:42:18,508 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11235
2018-06-28 18:42:18,509 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63955
2018-06-28 18:42:18,509 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63955
2018-06-28 18:42:18,509 [myid:] - INFO  [Thread-97:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:18,511 [myid:] - INFO  [Thread-97:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63955 (no session established for client)
2018-06-28 18:42:18,511 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testReadOnlyClient
2018-06-28 18:42:18,511 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11233,127.0.0.1:11235,127.0.0.1:11237 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@34c36966
2018-06-28 18:42:18,513 [myid:] - INFO  [Time-limited test-SendThread(localhost:11237):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11237. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:18,513 [myid:] - INFO  [Time-limited test-SendThread(localhost:11237):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11237: Connection refused
2018-06-28 18:42:18,552 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:18,552 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:18,624 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:18,625 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11233, initiating session
2018-06-28 18:42:18,625 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63957
2018-06-28 18:42:18,625 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:63957
2018-06-28 18:42:18,627 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 18:42:18,627 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 18:42:18,627 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 18:42:18,629 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x100066ae9a20000 with negotiated timeout 30000 for client /127.0.0.1:63957
2018-06-28 18:42:18,629 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11233, sessionid = 0x100066ae9a20000, negotiated timeout = 30000
2018-06-28 18:42:18,632 [myid:] - INFO  [Time-limited test:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235
2018-06-28 18:42:18,632 [myid:] - INFO  [Time-limited test:Leader@520] - Shutting down
2018-06-28 18:42:18,632 [myid:] - INFO  [Time-limited test:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.ReadOnlyModeTest.testReadOnlyClient(ReadOnlyModeTest.java:126)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:18,633 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:18,633 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12235:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:42:18,633 [myid:] - INFO  [Time-limited test:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:18,633 [myid:] - INFO  [Time-limited test:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:18,633 [myid:] - INFO  [Time-limited test:ProposalRequestProcessor@88] - Shutting down
2018-06-28 18:42:18,633 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 18:42:18,633 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:18,633 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:18,633 [myid:] - INFO  [Time-limited test:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 18:42:18,634 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:18,634 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:18,634 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:18,635 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 18:42:18,636 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:18,636 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63953:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63953 ********
2018-06-28 18:42:18,636 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:18,636 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63953:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:42:18,637 [myid:] - INFO  [Time-limited test:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235
2018-06-28 18:42:18,637 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:42:18,638 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Leader@520] - Shutting down
2018-06-28 18:42:18,637 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63957 which had sessionid 0x100066ae9a20000
2018-06-28 18:42:18,637 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:18,638 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:18,637 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:18,639 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:18,637 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:18,639 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:18,637 [myid:] - ERROR [/127.0.0.1:12236:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:18,640 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:18,640 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:18,638 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100066ae9a20000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:18,638 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:18,640 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:18,640 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:42:18,638 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:18,638 [myid:] - INFO  [Time-limited test:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235 to exit thread
2018-06-28 18:42:18,640 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:42:18,640 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:CommitProcessor@184] - Shutting down
2018-06-28 18:42:18,640 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:18,641 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:18,641 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:18,641 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:18,641 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 18:42:18,641 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:18,641 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8834467247970250689.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8834467247970250689.junit.dir/version-2
2018-06-28 18:42:18,642 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000002
2018-06-28 18:42:18,642 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:18,642 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12236
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:18,643 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,643 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:18,643 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,851 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12236
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:18,851 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,852 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:18,852 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:18,852 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@847] - Notification time out: 400
2018-06-28 18:42:18,913 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:18,914 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11231: Connection refused
2018-06-28 18:42:19,085 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:19,104 [myid:] - INFO  [Time-limited test-SendThread(localhost:11235):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11235. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:19,105 [myid:] - INFO  [Time-limited test-SendThread(localhost:11235):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11235: Connection refused
2018-06-28 18:42:19,234 [myid:] - INFO  [/127.0.0.1:12232:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:19,234 [myid:] - INFO  [/127.0.0.1:12230:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:19,253 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12236
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:19,254 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:19,254 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:19,255 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:19,255 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@847] - Notification time out: 800
2018-06-28 18:42:19,648 [myid:] - INFO  [/127.0.0.1:12236:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:19,660 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:19,661 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 18:42:19,832 [myid:] - INFO  [Time-limited test-SendThread(localhost:11237):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11237. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:19,833 [myid:] - INFO  [Time-limited test-SendThread(localhost:11237):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11237: Connection refused
2018-06-28 18:42:20,065 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12236
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:20,066 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:20,067 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:20,067 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:20,067 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 18:42:20,552 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:20,647 [myid:] - INFO  [Thread-98:ReadOnlyZooKeeperServer@67] - Read-only server started
2018-06-28 18:42:20,937 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:20,937 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11229: Connection refused
2018-06-28 18:42:21,072 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:21,072 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:21,072 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:21,072 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:21,072 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:21,072 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:21,265 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:21,265 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:21,407 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:21,408 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11233, initiating session
2018-06-28 18:42:21,408 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63971
2018-06-28 18:42:21,408 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:ZooKeeperServer@942] - Client attempting to renew session 0x100066ae9a20000 at /127.0.0.1:63971
2018-06-28 18:42:21,409 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:ZooKeeperServer@694] - Established session 0x100066ae9a20000 with negotiated timeout 30000 for client /127.0.0.1:63971
2018-06-28 18:42:21,409 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11233, sessionid = 0x100066ae9a20000, negotiated timeout = 30000 (READ-ONLY mode)
2018-06-28 18:42:21,409 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11235 for being r/w. Timeout 200
2018-06-28 18:42:21,415 [myid:] - INFO  [Time-limited test:QuorumUtil@186] - Creating QuorumPeer 2; public port 11235
2018-06-28 18:42:21,415 [myid:] - INFO  [Time-limited test:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:21,415 [myid:] - INFO  [Time-limited test:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11235
2018-06-28 18:42:21,418 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12236
2018-06-28 18:42:21,418 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11235
2018-06-28 18:42:21,419 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63973
2018-06-28 18:42:21,419 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@909] - LOOKING
2018-06-28 18:42:21,419 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:21,419 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63973
2018-06-28 18:42:21,419 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2792444674345998224.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2792444674345998224.junit.dir/version-2
2018-06-28 18:42:21,419 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x100000002
2018-06-28 18:42:21,419 [myid:] - INFO  [Thread-99:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63973 (no session established for client)
2018-06-28 18:42:21,420 [myid:] - INFO  [/127.0.0.1:12234:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63974
2018-06-28 18:42:21,420 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000002 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:21,421 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:21,421 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:21,421 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000002 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:21,421 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:21,421 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:21,421 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:21,422 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:21,422 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:21,422 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:21,422 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:21,422 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:21,422 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:21,422 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:21,553 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:21,554 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11231: Connection refused
2018-06-28 18:42:21,614 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11237 for being r/w. Timeout 400
2018-06-28 18:42:21,630 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@991] - LEADING
2018-06-28 18:42:21,630 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2792444674345998224.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test2792444674345998224.junit.dir/version-2
2018-06-28 18:42:21,630 [myid:] - INFO  [Thread-100:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:21,630 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63971 which had sessionid 0x100066ae9a20000
2018-06-28 18:42:21,631 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Leader@380] - LEADING - LEADER ELECTION TOOK - 211
2018-06-28 18:42:21,631 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100066ae9a20000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:21,631 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:21,631 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:21,631 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:21,631 [myid:] - INFO  [ReadOnlyRequestProcessor:1:ReadOnlyRequestProcessor@111] - ReadOnlyRequestProcessor exited loop!
2018-06-28 18:42:21,631 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:21,631 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:21,632 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 18:42:21,632 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8834467247970250689.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8834467247970250689.junit.dir/version-2
2018-06-28 18:42:21,632 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 2991
2018-06-28 18:42:21,633 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:21,634 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63980:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@47abf43f
2018-06-28 18:42:21,663 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63980:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 peerLastZxid=0x100000002
2018-06-28 18:42:21,663 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63980:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000002
2018-06-28 18:42:21,663 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63980:LearnerHandler@475] - Sending DIFF
2018-06-28 18:42:21,664 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Learner@332] - Getting a diff from the leader 0x100000002
2018-06-28 18:42:21,665 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63980:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 18:42:21,665 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x200000000
2018-06-28 18:42:21,673 [myid:] - INFO  [Time-limited test:FourLetterWordMain@65] - connecting to 127.0.0.1 11235
2018-06-28 18:42:21,674 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63981
2018-06-28 18:42:21,674 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63981
2018-06-28 18:42:21,675 [myid:] - INFO  [Thread-102:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:21,676 [myid:] - INFO  [Thread-102:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63981 (no session established for client)
2018-06-28 18:42:22,549 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:22,649 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:22,650 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 18:42:23,560 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:23,561 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11233, initiating session
2018-06-28 18:42:23,561 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63983
2018-06-28 18:42:23,561 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:ZooKeeperServer@942] - Client attempting to renew session 0x100066ae9a20000 at /127.0.0.1:63983
2018-06-28 18:42:23,561 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:Learner@108] - Revalidating client: 0x100066ae9a20000
2018-06-28 18:42:23,563 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@694] - Established session 0x100066ae9a20000 with negotiated timeout 30000 for client /127.0.0.1:63983
2018-06-28 18:42:23,563 [myid:] - INFO  [Time-limited test-SendThread(localhost:11233):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11233, sessionid = 0x100066ae9a20000, negotiated timeout = 30000
2018-06-28 18:42:23,565 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.200000001
2018-06-28 18:42:23,565 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x200000001 expected 0x1
2018-06-28 18:42:23,575 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x100066ae9a20000
2018-06-28 18:42:23,576 [myid:] - INFO  [Time-limited test:ZooKeeper@693] - Session: 0x100066ae9a20000 closed
2018-06-28 18:42:23,576 [myid:] - INFO  [Time-limited test-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x100066ae9a20000
2018-06-28 18:42:23,576 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 31237
2018-06-28 18:42:23,576 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63983 which had sessionid 0x100066ae9a20000
2018-06-28 18:42:23,576 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 40
2018-06-28 18:42:23,576 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testReadOnlyClient
2018-06-28 18:42:23,576 [myid:] - INFO  [main:QuorumUtil@251] - TearDown started
2018-06-28 18:42:23,577 [myid:] - INFO  [main:QuorumUtil@255] - fdcount after test is: 125
2018-06-28 18:42:23,577 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233
2018-06-28 18:42:23,577 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.QuorumUtil.tearDown(QuorumUtil.java:258)
	at org.apache.zookeeper.test.ReadOnlyModeTest.tearDown(ReadOnlyModeTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 18:42:23,577 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:23,577 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:23,577 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:42:23,577 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 18:42:23,578 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:42:23,578 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:23,578 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:23,579 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:23,579 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:23,579 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:23,580 [myid:] - ERROR [/127.0.0.1:12234:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:23,580 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:23,580 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:23,580 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:23,581 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:23,581 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:23,580 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:23,581 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:23,580 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233
2018-06-28 18:42:23,581 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:23,581 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233 to exit thread
2018-06-28 18:42:23,678 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:23,678 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:23,678 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:23,678 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:23,679 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235
2018-06-28 18:42:23,679 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 18:42:23,679 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.QuorumUtil.tearDown(QuorumUtil.java:258)
	at org.apache.zookeeper.test.ReadOnlyModeTest.tearDown(ReadOnlyModeTest.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 18:42:23,680 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:23,680 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:23,680 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:23,680 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12235:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:42:23,680 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:23,680 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 18:42:23,681 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 18:42:23,681 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 18:42:23,681 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:23,681 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:23,681 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:23,681 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:23,682 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:23,682 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63980:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63980 ********
2018-06-28 18:42:23,682 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63980:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:42:23,683 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:42:23,684 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Leader@520] - Shutting down
2018-06-28 18:42:23,684 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235
2018-06-28 18:42:23,683 [myid:] - ERROR [/127.0.0.1:12236:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:23,684 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235 to exit thread
2018-06-28 18:42:23,684 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:23,684 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:23,684 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:23,684 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:23,684 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 18:42:23,685 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11233 is no longer accepting client connections
2018-06-28 18:42:23,685 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11235
2018-06-28 18:42:23,685 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11235 is no longer accepting client connections
2018-06-28 18:42:23,685 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11237
2018-06-28 18:42:23,686 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11237 is no longer accepting client connections
2018-06-28 18:42:23,687 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testReadOnlyClient
2018-06-28 18:42:23,687 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testReadOnlyClient
2018-06-28 18:42:23,695 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11239
2018-06-28 18:42:23,695 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11240
2018-06-28 18:42:23,695 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:23,696 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11241
2018-06-28 18:42:23,696 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11242
2018-06-28 18:42:23,696 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:23,696 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11243
2018-06-28 18:42:23,696 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11244
2018-06-28 18:42:23,696 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:23,696 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11239
2018-06-28 18:42:23,696 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:23,697 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11239
2018-06-28 18:42:23,697 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11241
2018-06-28 18:42:23,697 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:23,697 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11241
2018-06-28 18:42:23,698 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11243
2018-06-28 18:42:23,698 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:23,698 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11243
2018-06-28 18:42:23,698 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testConnectionEvents
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:23,699 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:23,699 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 18:42:23,700 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11239 is no longer accepting client connections
2018-06-28 18:42:23,700 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11241
2018-06-28 18:42:23,700 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11241 is no longer accepting client connections
2018-06-28 18:42:23,700 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11243
2018-06-28 18:42:23,700 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11243 is no longer accepting client connections
2018-06-28 18:42:23,700 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11239
2018-06-28 18:42:23,701 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:23,701 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11239
2018-06-28 18:42:23,701 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:23,702 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:23,703 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12240
2018-06-28 18:42:23,703 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11241
2018-06-28 18:42:23,704 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:23,704 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11241
2018-06-28 18:42:23,704 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@909] - LOOKING
2018-06-28 18:42:23,704 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:23,704 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6116887215123556874.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6116887215123556874.junit.dir/version-2
2018-06-28 18:42:23,704 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:23,704 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 18:42:23,705 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:23,705 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12242
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:23,705 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:23,705 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:23,706 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:23,707 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:23,707 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12242
2018-06-28 18:42:23,707 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 18:42:23,708 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63992
2018-06-28 18:42:23,708 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@909] - LOOKING
2018-06-28 18:42:23,708 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63992
2018-06-28 18:42:23,708 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:23,708 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8267516813351934575.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8267516813351934575.junit.dir/version-2
2018-06-28 18:42:23,708 [myid:] - INFO  [Thread-105:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63992 (no session established for client)
2018-06-28 18:42:23,708 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 18:42:23,709 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:63993
2018-06-28 18:42:23,709 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:23,710 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:23,710 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:23,710 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:23,710 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:23,710 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:23,710 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:23,711 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:23,711 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:23,919 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@979] - FOLLOWING
2018-06-28 18:42:23,920 [myid:] - INFO  [Thread-106:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:23,920 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6116887215123556874.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6116887215123556874.junit.dir/version-2
2018-06-28 18:42:23,920 [myid:] - INFO  [Thread-104:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:23,919 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@991] - LEADING
2018-06-28 18:42:23,920 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 215
2018-06-28 18:42:23,920 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8267516813351934575.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8267516813351934575.junit.dir/version-2
2018-06-28 18:42:23,921 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:Leader@380] - LEADING - LEADER ELECTION TOOK - 212
2018-06-28 18:42:23,921 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:23,922 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63996:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@3baf049f
2018-06-28 18:42:23,924 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63996:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 18:42:23,924 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63996:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 18:42:23,924 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63996:LearnerHandler@475] - Sending DIFF
2018-06-28 18:42:23,924 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 18:42:23,926 [myid:] - INFO  [LearnerHandler-/127.0.0.1:63996:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 18:42:23,926 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 18:42:23,969 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 18:42:23,970 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63997
2018-06-28 18:42:23,970 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63997
2018-06-28 18:42:23,970 [myid:] - INFO  [Thread-108:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:23,971 [myid:] - INFO  [Thread-108:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63997 (no session established for client)
2018-06-28 18:42:23,971 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11241
2018-06-28 18:42:23,972 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11241:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:63998
2018-06-28 18:42:23,972 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11241:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:63998
2018-06-28 18:42:23,972 [myid:] - INFO  [Thread-109:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:23,973 [myid:] - INFO  [Thread-109:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:63998 (no session established for client)
2018-06-28 18:42:23,973 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testConnectionEvents
2018-06-28 18:42:23,974 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11239,127.0.0.1:11241,127.0.0.1:11243 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@8628cf6
2018-06-28 18:42:23,975 [myid:] - INFO  [Time-limited test-SendThread(localhost:11243):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11243. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:23,976 [myid:] - INFO  [Time-limited test-SendThread(localhost:11243):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11243: Connection refused
2018-06-28 18:42:24,079 [myid:] - INFO  [Time-limited test-SendThread(localhost:11241):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11241. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:24,080 [myid:] - INFO  [Time-limited test-SendThread(localhost:11241):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11241, initiating session
2018-06-28 18:42:24,080 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11241:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:64000
2018-06-28 18:42:24,080 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11241:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:64000
2018-06-28 18:42:24,081 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 18:42:24,081 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 18:42:24,081 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 18:42:24,083 [myid:] - INFO  [CommitProcessor:2:ZooKeeperServer@694] - Established session 0x200066afef50000 with negotiated timeout 30000 for client /127.0.0.1:64000
2018-06-28 18:42:24,083 [myid:] - INFO  [Time-limited test-SendThread(localhost:11241):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11241, sessionid = 0x200066afef50000, negotiated timeout = 30000
2018-06-28 18:42:24,381 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:24,381 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11229: Connection refused
2018-06-28 18:42:24,430 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:24,430 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:24,430 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:24,430 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:24,552 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:24,590 [myid:] - INFO  [/127.0.0.1:12234:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:24,694 [myid:] - INFO  [/127.0.0.1:12236:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:24,715 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:24,716 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11231: Connection refused
2018-06-28 18:42:25,094 [myid:] - INFO  [Time-limited test:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241
2018-06-28 18:42:25,094 [myid:] - INFO  [Time-limited test:Leader@520] - Shutting down
2018-06-28 18:42:25,095 [myid:] - INFO  [Time-limited test:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.ReadOnlyModeTest.testConnectionEvents(ReadOnlyModeTest.java:175)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:25,095 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12241:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:42:25,095 [myid:] - INFO  [Time-limited test:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:64000 which had sessionid 0x200066afef50000
2018-06-28 18:42:25,096 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:25,096 [myid:] - INFO  [Time-limited test-SendThread(localhost:11241):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x200066afef50000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:25,096 [myid:] - INFO  [Time-limited test:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:25,096 [myid:] - INFO  [Time-limited test:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:25,096 [myid:] - INFO  [Time-limited test:ProposalRequestProcessor@88] - Shutting down
2018-06-28 18:42:25,096 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 18:42:25,096 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:25,096 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:25,096 [myid:] - INFO  [Time-limited test:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 18:42:25,097 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:25,097 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:25,097 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:25,098 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 18:42:25,098 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63996:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:63996 ********
2018-06-28 18:42:25,098 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:25,098 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11241:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:25,098 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:25,098 [myid:] - WARN  [LearnerHandler-/127.0.0.1:63996:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:42:25,099 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:42:25,100 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:Leader@520] - Shutting down
2018-06-28 18:42:25,100 [myid:] - INFO  [Time-limited test:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241
2018-06-28 18:42:25,099 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:25,100 [myid:] - INFO  [Time-limited test:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241 to exit thread
2018-06-28 18:42:25,100 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:25,100 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:25,101 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:25,100 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:25,101 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:25,099 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:25,101 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:25,099 [myid:] - ERROR [/127.0.0.1:12242:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:25,101 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:25,102 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:25,100 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:42:25,102 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:CommitProcessor@184] - Shutting down
2018-06-28 18:42:25,102 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:42:25,102 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:25,102 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:25,103 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:25,103 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:25,103 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@909] - LOOKING
2018-06-28 18:42:25,103 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:25,103 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6116887215123556874.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6116887215123556874.junit.dir/version-2
2018-06-28 18:42:25,104 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000002
2018-06-28 18:42:25,104 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:25,104 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12242
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:25,105 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:25,105 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:25,105 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:25,312 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12242
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:25,312 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:25,313 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:25,313 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:25,313 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@847] - Notification time out: 400
2018-06-28 18:42:25,630 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:25,631 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 18:42:25,719 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12242
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:25,720 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:25,720 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:25,720 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:25,720 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@847] - Notification time out: 800
2018-06-28 18:42:25,877 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:25,877 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11239, initiating session
2018-06-28 18:42:25,877 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:64010
2018-06-28 18:42:25,877 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 18:42:25,877 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:64010 (no session established for client)
2018-06-28 18:42:25,878 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x200066afef50000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:26,112 [myid:] - INFO  [/127.0.0.1:12242:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:26,530 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12242
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:26,530 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:26,531 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:26,531 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:26,531 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 18:42:26,550 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:26,660 [myid:] - INFO  [Time-limited test-SendThread(localhost:11243):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11243. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:26,661 [myid:] - INFO  [Time-limited test-SendThread(localhost:11243):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11243: Connection refused
2018-06-28 18:42:26,719 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:26,719 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:27,115 [myid:] - INFO  [Thread-110:ReadOnlyZooKeeperServer@67] - Read-only server started
2018-06-28 18:42:27,311 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:27,311 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11229: Connection refused
2018-06-28 18:42:27,523 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:27,523 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11231: Connection refused
2018-06-28 18:42:28,137 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12242
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:28,137 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:28,137 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:28,138 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:28,138 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@847] - Notification time out: 3200
2018-06-28 18:42:28,457 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:28,457 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 18:42:28,586 [myid:] - INFO  [Time-limited test-SendThread(localhost:11241):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11241. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:28,586 [myid:] - INFO  [Time-limited test-SendThread(localhost:11241):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11241: Connection refused
2018-06-28 18:42:29,189 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:29,189 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11239, initiating session
2018-06-28 18:42:29,189 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:64020
2018-06-28 18:42:29,189 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:ZooKeeperServer@942] - Client attempting to renew session 0x200066afef50000 at /127.0.0.1:64020
2018-06-28 18:42:29,190 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:ZooKeeperServer@694] - Established session 0x200066afef50000 with negotiated timeout 30000 for client /127.0.0.1:64020
2018-06-28 18:42:29,190 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11239, sessionid = 0x200066afef50000, negotiated timeout = 30000 (READ-ONLY mode)
2018-06-28 18:42:29,190 [myid:] - INFO  [Time-limited test-SendThread(localhost:11239):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11243 for being r/w. Timeout 200
2018-06-28 18:42:29,260 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x200066afef50000
2018-06-28 18:42:29,260 [myid:] - INFO  [Time-limited test:ZooKeeper@693] - Session: 0x200066afef50000 closed
2018-06-28 18:42:29,261 [myid:] - INFO  [Time-limited test-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x200066afef50000
2018-06-28 18:42:29,261 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:64020 which had sessionid 0x200066afef50000
2018-06-28 18:42:29,261 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 37506
2018-06-28 18:42:29,261 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 24
2018-06-28 18:42:29,261 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testConnectionEvents
2018-06-28 18:42:29,261 [myid:] - INFO  [main:QuorumUtil@251] - TearDown started
2018-06-28 18:42:29,261 [myid:] - INFO  [main:QuorumUtil@255] - fdcount after test is: 115
2018-06-28 18:42:29,262 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 18:42:29,262 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:29,262 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:29,262 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:29,262 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:29,262 [myid:] - INFO  [ReadOnlyRequestProcessor:1:ReadOnlyRequestProcessor@111] - ReadOnlyRequestProcessor exited loop!
2018-06-28 18:42:29,262 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:29,262 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:29,264 [myid:] - ERROR [/127.0.0.1:12240:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:29,264 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 18:42:29,264 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@946] - Unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:467)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:827)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:29,264 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239 to exit thread
2018-06-28 18:42:29,264 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:29,265 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241
2018-06-28 18:42:29,265 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241
2018-06-28 18:42:29,265 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241 to exit thread
2018-06-28 18:42:29,265 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:29,265 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:29,265 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:29,265 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 18:42:29,266 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11239 is no longer accepting client connections
2018-06-28 18:42:29,266 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11241
2018-06-28 18:42:29,267 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11241 is no longer accepting client connections
2018-06-28 18:42:29,267 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11243
2018-06-28 18:42:29,267 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11243 is no longer accepting client connections
2018-06-28 18:42:29,270 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testConnectionEvents
2018-06-28 18:42:29,271 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testConnectionEvents
2018-06-28 18:42:29,279 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11245
2018-06-28 18:42:29,280 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11246
2018-06-28 18:42:29,280 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,280 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11247
2018-06-28 18:42:29,280 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11248
2018-06-28 18:42:29,280 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,289 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11249
2018-06-28 18:42:29,289 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11250
2018-06-28 18:42:29,289 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,289 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11245
2018-06-28 18:42:29,289 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:29,289 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11245
2018-06-28 18:42:29,290 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11247
2018-06-28 18:42:29,290 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:29,290 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11247
2018-06-28 18:42:29,291 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11249
2018-06-28 18:42:29,291 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:29,291 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11249
2018-06-28 18:42:29,292 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testMultiTransaction
2018-06-28 18:42:29,292 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:29,293 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:29,293 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:29,293 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:29,293 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:29,293 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:29,293 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:29,293 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:29,293 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:29,293 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11245
2018-06-28 18:42:29,294 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11245 is no longer accepting client connections
2018-06-28 18:42:29,294 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11247
2018-06-28 18:42:29,294 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11247 is no longer accepting client connections
2018-06-28 18:42:29,294 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11249
2018-06-28 18:42:29,294 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11249 is no longer accepting client connections
2018-06-28 18:42:29,295 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11245
2018-06-28 18:42:29,295 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:29,295 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11245
2018-06-28 18:42:29,295 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:29,296 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:29,297 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12246
2018-06-28 18:42:29,298 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11247
2018-06-28 18:42:29,298 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 18:42:29,298 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11247
2018-06-28 18:42:29,299 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:29,299 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@909] - LOOKING
2018-06-28 18:42:29,299 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:29,299 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5590150671612909052.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5590150671612909052.junit.dir/version-2
2018-06-28 18:42:29,299 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 18:42:29,300 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 18:42:29,300 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:29,301 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12248
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:29,301 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12248
2018-06-28 18:42:29,301 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11245
2018-06-28 18:42:29,301 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,302 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:64031
2018-06-28 18:42:29,302 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:29,302 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:QuorumPeer@909] - LOOKING
2018-06-28 18:42:29,302 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:29,302 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,302 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:64031
2018-06-28 18:42:29,302 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4113075540483876483.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4113075540483876483.junit.dir/version-2
2018-06-28 18:42:29,303 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 18:42:29,303 [myid:] - INFO  [Thread-113:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:64031 (no session established for client)
2018-06-28 18:42:29,304 [myid:] - INFO  [/127.0.0.1:12246:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:64033
2018-06-28 18:42:29,304 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:29,305 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:29,305 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:29,305 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:29,305 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,305 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:29,305 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:29,305 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:29,306 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,516 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@979] - FOLLOWING
2018-06-28 18:42:29,516 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:QuorumPeer@991] - LEADING
2018-06-28 18:42:29,516 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4113075540483876483.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4113075540483876483.junit.dir/version-2
2018-06-28 18:42:29,516 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5590150671612909052.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5590150671612909052.junit.dir/version-2
2018-06-28 18:42:29,516 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:Leader@380] - LEADING - LEADER ELECTION TOOK - 214
2018-06-28 18:42:29,516 [myid:] - INFO  [Thread-114:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:29,516 [myid:] - INFO  [Thread-112:QuorumPeer$1@935] - Interrupted while attempting to start ReadOnlyZooKeeperServer, not started
2018-06-28 18:42:29,516 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 217
2018-06-28 18:42:29,519 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,520 [myid:] - INFO  [LearnerHandler-/127.0.0.1:64036:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@599672bd
2018-06-28 18:42:29,521 [myid:] - INFO  [LearnerHandler-/127.0.0.1:64036:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 18:42:29,522 [myid:] - INFO  [LearnerHandler-/127.0.0.1:64036:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 18:42:29,522 [myid:] - INFO  [LearnerHandler-/127.0.0.1:64036:LearnerHandler@475] - Sending DIFF
2018-06-28 18:42:29,522 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 18:42:29,523 [myid:] - INFO  [LearnerHandler-/127.0.0.1:64036:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 18:42:29,524 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 18:42:29,563 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11245
2018-06-28 18:42:29,564 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:64037
2018-06-28 18:42:29,565 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:64037
2018-06-28 18:42:29,565 [myid:] - INFO  [Thread-116:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:29,565 [myid:] - INFO  [Thread-116:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:64037 (no session established for client)
2018-06-28 18:42:29,566 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11247
2018-06-28 18:42:29,566 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11247:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:64038
2018-06-28 18:42:29,566 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11247:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:64038
2018-06-28 18:42:29,567 [myid:] - INFO  [Thread-117:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 18:42:29,568 [myid:] - INFO  [Thread-117:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:64038 (no session established for client)
2018-06-28 18:42:29,568 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testMultiTransaction
2018-06-28 18:42:29,568 [myid:] - INFO  [Time-limited test:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11245,127.0.0.1:11247,127.0.0.1:11249 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@60870479
2018-06-28 18:42:29,570 [myid:] - INFO  [Time-limited test-SendThread(localhost:11249):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11249. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:29,570 [myid:] - INFO  [Time-limited test-SendThread(localhost:11249):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11249: Connection refused
2018-06-28 18:42:29,678 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11245. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:29,678 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11245, initiating session
2018-06-28 18:42:29,678 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:64040
2018-06-28 18:42:29,679 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:64040
2018-06-28 18:42:29,680 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 18:42:29,680 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 18:42:29,680 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 18:42:29,685 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x100066b14d10000 with negotiated timeout 30000 for client /127.0.0.1:64040
2018-06-28 18:42:29,685 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11245, sessionid = 0x100066b14d10000, negotiated timeout = 30000
2018-06-28 18:42:29,687 [myid:] - INFO  [Time-limited test:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247
2018-06-28 18:42:29,688 [myid:] - INFO  [Time-limited test:Leader@520] - Shutting down
2018-06-28 18:42:29,688 [myid:] - INFO  [Time-limited test:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.ReadOnlyModeTest.testMultiTransaction(ReadOnlyModeTest.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:29,688 [myid:] - INFO  [Time-limited test:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:29,688 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12247:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 18:42:29,688 [myid:] - INFO  [Time-limited test:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:29,689 [myid:] - INFO  [Time-limited test:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:29,689 [myid:] - INFO  [Time-limited test:ProposalRequestProcessor@88] - Shutting down
2018-06-28 18:42:29,689 [myid:] - INFO  [Time-limited test:CommitProcessor@184] - Shutting down
2018-06-28 18:42:29,689 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:29,689 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:29,689 [myid:] - INFO  [Time-limited test:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 18:42:29,689 [myid:] - INFO  [Time-limited test:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:29,689 [myid:] - INFO  [Time-limited test:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:29,689 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:29,690 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 18:42:29,690 [myid:] - WARN  [LearnerHandler-/127.0.0.1:64036:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:64036 ********
2018-06-28 18:42:29,690 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11247:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:29,691 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 18:42:29,691 [myid:] - WARN  [LearnerHandler-/127.0.0.1:64036:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 18:42:29,691 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 18:42:29,692 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:29,693 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:29,692 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:64040 which had sessionid 0x100066b14d10000
2018-06-28 18:42:29,692 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:29,692 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 18:42:29,694 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 18:42:29,691 [myid:] - ERROR [/127.0.0.1:12248:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:29,694 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 18:42:29,694 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:29,693 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 18:42:29,693 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100066b14d10000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:29,693 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 18:42:29,694 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:29,693 [myid:] - INFO  [Time-limited test:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247
2018-06-28 18:42:29,692 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:Leader@520] - Shutting down
2018-06-28 18:42:29,695 [myid:] - INFO  [Time-limited test:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247 to exit thread
2018-06-28 18:42:29,695 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FollowerRequestProcessor@107] - Shutting down
2018-06-28 18:42:29,695 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:29,695 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 18:42:29,695 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:CommitProcessor@184] - Shutting down
2018-06-28 18:42:29,695 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:29,695 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 18:42:29,696 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:SyncRequestProcessor@208] - Shutting down
2018-06-28 18:42:29,696 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 18:42:29,696 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@909] - LOOKING
2018-06-28 18:42:29,696 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@912] - Attempting to start ReadOnlyZooKeeperServer
2018-06-28 18:42:29,696 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5590150671612909052.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5590150671612909052.junit.dir/version-2
2018-06-28 18:42:29,696 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000002
2018-06-28 18:42:29,696 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000002 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 18:42:29,697 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12248
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:29,697 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,697 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 18:42:29,697 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,908 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12248
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:29,908 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,908 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:29,909 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:29,909 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FastLeaderElection@847] - Notification time out: 400
2018-06-28 18:42:29,969 [myid:] - INFO  [Time-limited test-SendThread(localhost:11247):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11247. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:29,970 [myid:] - INFO  [Time-limited test-SendThread(localhost:11247):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11247: Connection refused
2018-06-28 18:42:30,248 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:30,248 [myid:] - INFO  [Time-limited test-SendThread(localhost:11229):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11229: Connection refused
2018-06-28 18:42:30,274 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:30,313 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12248
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:30,313 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:30,313 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:30,314 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:30,314 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FastLeaderElection@847] - Notification time out: 800
2018-06-28 18:42:30,552 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:30,552 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 18:42:30,647 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:30,648 [myid:] - INFO  [Time-limited test-SendThread(localhost:11231):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11231: Connection refused
2018-06-28 18:42:30,703 [myid:] - INFO  [/127.0.0.1:12248:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 18:42:30,766 [myid:] - INFO  [Time-limited test-SendThread(localhost:11249):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11249. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:30,766 [myid:] - INFO  [Time-limited test-SendThread(localhost:11249):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11249: Connection refused
2018-06-28 18:42:31,124 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:31,124 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:31,125 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12248
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:31,125 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:31,125 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:610)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:838)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:31,125 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 18:42:31,125 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FastLeaderElection@847] - Notification time out: 1600
2018-06-28 18:42:31,547 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:31,548 [myid:] - INFO  [Time-limited test-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 18:42:31,708 [myid:] - INFO  [Thread-118:ReadOnlyZooKeeperServer@67] - Read-only server started
2018-06-28 18:42:32,315 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 18:42:32,315 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 18:42:32,654 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11245. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 18:42:32,655 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11245, initiating session
2018-06-28 18:42:32,655 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:64054
2018-06-28 18:42:32,655 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:ZooKeeperServer@942] - Client attempting to renew session 0x100066b14d10000 at /127.0.0.1:64054
2018-06-28 18:42:32,656 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:ZooKeeperServer@694] - Established session 0x100066b14d10000 with negotiated timeout 30000 for client /127.0.0.1:64054
2018-06-28 18:42:32,656 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11245, sessionid = 0x100066b14d10000, negotiated timeout = 30000 (READ-ONLY mode)
2018-06-28 18:42:32,656 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@1200] - Checking server /127.0.0.1:11247 for being r/w. Timeout 200
2018-06-28 18:42:32,674 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 11050
2018-06-28 18:42:32,674 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 26
2018-06-28 18:42:32,674 [myid:] - INFO  [Time-limited test:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testMultiTransaction
2018-06-28 18:42:32,674 [myid:] - INFO  [main:QuorumUtil@251] - TearDown started
2018-06-28 18:42:32,674 [myid:] - INFO  [main:QuorumUtil@255] - fdcount after test is: 116
2018-06-28 18:42:32,674 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245
2018-06-28 18:42:32,675 [myid:] - INFO  [main:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:64054 which had sessionid 0x100066b14d10000
2018-06-28 18:42:32,675 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 18:42:32,675 [myid:] - INFO  [Time-limited test-SendThread(localhost:11245):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x100066b14d10000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 18:42:32,675 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 18:42:32,675 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 18:42:32,675 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 18:42:32,675 [myid:] - INFO  [ReadOnlyRequestProcessor:1:ReadOnlyRequestProcessor@111] - ReadOnlyRequestProcessor exited loop!
2018-06-28 18:42:32,676 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 18:42:32,676 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 18:42:32,676 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@946] - Unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:467)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:827)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:944)
2018-06-28 18:42:32,677 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245
2018-06-28 18:42:32,677 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 18:42:32,677 [myid:] - ERROR [/127.0.0.1:12246:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 18:42:32,677 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245 to exit thread
2018-06-28 18:42:32,677 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247
2018-06-28 18:42:32,678 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247
2018-06-28 18:42:32,678 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247 to exit thread
2018-06-28 18:42:32,678 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 18:42:32,678 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 18:42:32,678 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 18:42:32,678 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11245
2018-06-28 18:42:32,678 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11245 is no longer accepting client connections
2018-06-28 18:42:32,679 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11247
2018-06-28 18:42:32,679 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11247 is no longer accepting client connections
2018-06-28 18:42:32,679 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11249
2018-06-28 18:42:32,679 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11249 is no longer accepting client connections
2018-06-28 18:42:32,680 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testMultiTransaction
2018-06-28 18:42:32,680 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testMultiTransaction
------------- ---------------- ---------------

Testcase: testSessionEstablishment took 18.404 sec
Testcase: testSeekForRwServer took 4.746 sec
Testcase: testReadOnlyClient took 5.444 sec
Testcase: testConnectionEvents took 5.573 sec
Testcase: testMultiTransaction took 3.388 sec
