Testsuite: org.apache.zookeeper.server.quorum.CnxManagerTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 29.96 sec
------------- Standard Output ---------------
2018-06-28 17:41:59,918 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testCnxFromFutureVersion
2018-06-28 17:41:59,925 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11221
2018-06-28 17:41:59,925 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11222
2018-06-28 17:41:59,926 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11223
2018-06-28 17:41:59,942 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:41:59,954 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11224
2018-06-28 17:41:59,954 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11225
2018-06-28 17:41:59,955 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11226
2018-06-28 17:41:59,955 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:41:59,955 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11227
2018-06-28 17:41:59,955 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11228
2018-06-28 17:41:59,956 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11229
2018-06-28 17:41:59,956 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:41:59,956 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testCnxFromFutureVersion
2018-06-28 17:41:59,968 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:41:59,979 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11225
2018-06-28 17:42:00,010 [myid:] - INFO  [main:CnxManagerTest@304] - Election port: 11226
2018-06-28 17:42:00,011 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11226
2018-06-28 17:42:01,019 [myid:] - INFO  [/0.0.0.0:11226:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51148
2018-06-28 17:42:02,045 [myid:] - ERROR [/0.0.0.0:11226:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:02,046 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:02,046 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 21314
2018-06-28 17:42:02,045 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:02,048 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 7
2018-06-28 17:42:02,048 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:02,048 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testCnxFromFutureVersion
2018-06-28 17:42:02,048 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:02,048 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testCnxFromFutureVersion
2018-06-28 17:42:02,048 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testCnxFromFutureVersion
2018-06-28 17:42:02,052 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testCnxManagerTimeout
2018-06-28 17:42:02,053 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11230
2018-06-28 17:42:02,053 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11231
2018-06-28 17:42:02,053 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11232
2018-06-28 17:42:02,053 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:02,054 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11233
2018-06-28 17:42:02,054 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11234
2018-06-28 17:42:02,054 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11235
2018-06-28 17:42:02,054 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:02,054 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11236
2018-06-28 17:42:02,055 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11237
2018-06-28 17:42:02,055 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11238
2018-06-28 17:42:02,055 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:02,055 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testCnxManagerTimeout
2018-06-28 17:42:02,055 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11239
2018-06-28 17:42:02,056 [myid:] - INFO  [main:CnxManagerTest@171] - This is the dead address I'm trying: 192.0.2.230
2018-06-28 17:42:02,056 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11240
2018-06-28 17:42:02,056 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 192.0.2.230 to address: /192.0.2.230
2018-06-28 17:42:02,056 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:02,056 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11234
2018-06-28 17:42:02,057 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11235
2018-06-28 17:42:03,048 [myid:] - INFO  [/0.0.0.0:11226:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:07,064 [myid:] - WARN  [main:QuorumCnxManager@584] - Cannot open channel to 2 at election address /192.0.2.230:11240
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testCnxManagerTimeout(CnxManagerTest.java:187)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:07,066 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 192.0.2.230 to address: /192.0.2.230
2018-06-28 17:42:07,066 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 22660
2018-06-28 17:42:07,066 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 5
2018-06-28 17:42:07,066 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testCnxManagerTimeout
2018-06-28 17:42:07,066 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testCnxManagerTimeout
2018-06-28 17:42:07,066 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testCnxManagerTimeout
2018-06-28 17:42:07,067 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testCnxManagerSpinLock
2018-06-28 17:42:07,067 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11241
2018-06-28 17:42:07,067 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11242
2018-06-28 17:42:07,068 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11243
2018-06-28 17:42:07,068 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:07,068 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11244
2018-06-28 17:42:07,068 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11245
2018-06-28 17:42:07,069 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11246
2018-06-28 17:42:07,069 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:07,069 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11247
2018-06-28 17:42:07,072 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11248
2018-06-28 17:42:07,072 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11249
2018-06-28 17:42:07,072 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:07,073 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testCnxManagerSpinLock
2018-06-28 17:42:07,073 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:07,074 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11245
2018-06-28 17:42:07,074 [myid:] - INFO  [main:CnxManagerTest@214] - Election port: 11246
2018-06-28 17:42:07,074 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11246
2018-06-28 17:42:08,081 [myid:] - INFO  [/0.0.0.0:11246:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51150
2018-06-28 17:42:08,082 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.IOException: Received packet with invalid packet: -20
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1012)
2018-06-28 17:42:08,082 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:08,083 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:08,083 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,085 [myid:] - INFO  [main:CnxManagerTest@249] - Socket has been closed as expected
2018-06-28 17:42:09,086 [myid:] - ERROR [/0.0.0.0:11246:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:09,086 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 24657
2018-06-28 17:42:09,087 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 6
2018-06-28 17:42:09,087 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testCnxManagerSpinLock
2018-06-28 17:42:09,087 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testCnxManagerSpinLock
2018-06-28 17:42:09,087 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testCnxManagerSpinLock
2018-06-28 17:42:09,088 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testWorkerThreads
2018-06-28 17:42:09,088 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11250
2018-06-28 17:42:09,088 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11251
2018-06-28 17:42:09,089 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11252
2018-06-28 17:42:09,089 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:09,089 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11253
2018-06-28 17:42:09,090 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11254
2018-06-28 17:42:09,090 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11255
2018-06-28 17:42:09,090 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:09,091 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11256
2018-06-28 17:42:09,091 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11257
2018-06-28 17:42:09,091 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11258
2018-06-28 17:42:09,091 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:09,092 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testWorkerThreads
2018-06-28 17:42:09,092 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:09,092 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11251
2018-06-28 17:42:09,093 [myid:] - INFO  [main:CnxManagerTest@396] - Starting peer 0
2018-06-28 17:42:09,096 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:42:09,099 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:42:09,102 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11252
2018-06-28 17:42:09,104 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:09,105 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11254
2018-06-28 17:42:09,105 [myid:] - INFO  [main:CnxManagerTest@396] - Starting peer 1
2018-06-28 17:42:09,106 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:42:09,106 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:42:09,108 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11255
2018-06-28 17:42:09,108 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:09,108 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11257
2018-06-28 17:42:09,109 [myid:] - INFO  [main:CnxManagerTest@396] - Starting peer 2
2018-06-28 17:42:09,109 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:42:09,110 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:42:09,111 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11258
2018-06-28 17:42:09,173 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@909] - LOOKING
2018-06-28 17:42:09,173 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@909] - LOOKING
2018-06-28 17:42:09,173 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@909] - LOOKING
2018-06-28 17:42:09,175 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:42:09,175 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:42:09,175 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:42:09,182 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51151
2018-06-28 17:42:09,182 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51153
2018-06-28 17:42:09,183 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,184 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:42:09,184 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51154
2018-06-28 17:42:09,184 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:42:09,185 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51152
2018-06-28 17:42:09,185 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,185 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51155
2018-06-28 17:42:09,186 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:42:09,186 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,186 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:09,187 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:09,186 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,187 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51157
2018-06-28 17:42:09,186 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,187 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:09,189 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:09,186 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:09,188 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,188 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,189 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,189 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,188 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51156
2018-06-28 17:42:09,190 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,188 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@946] - Exception when using channel: for id 2 my id = 0 error = java.net.SocketException: Broken pipe (Write failed)
2018-06-28 17:42:09,187 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,190 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:09,190 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:09,191 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51158
2018-06-28 17:42:09,190 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:286)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345)
	at java.io.DataInputStream.readFully(DataInputStream.java:195)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1020)
2018-06-28 17:42:09,190 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,189 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,192 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:09,191 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:09,191 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,191 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,192 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,192 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,191 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:09,191 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,190 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,192 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,193 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,193 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,193 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:09,399 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:09,399 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:09,399 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@991] - LEADING
2018-06-28 17:42:09,402 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Leader@64] - TCP NoDelay set to: true
2018-06-28 17:42:09,405 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Learner@86] - TCP NoDelay set to: true
2018-06-28 17:42:09,411 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT
2018-06-28 17:42:09,411 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:host.name=10.0.0.10
2018-06-28 17:42:09,411 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:java.version=1.8.0_172
2018-06-28 17:42:09,411 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:java.vendor=Oracle Corporation
2018-06-28 17:42:09,411 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre
2018-06-28 17:42:09,411 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:java.class.path=/Users/hanm/Desktop/projects/git/apache/zookeeper/build/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ant-eclipse-1.0-jvm1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ivy-2.4.0.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr-2.7.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-annotations-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-runtime-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-api-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-avl-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-constants-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-i18n-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-event-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm1-2.0.0-M2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-ldif-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-all-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-ber-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-i18n-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-client-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-codec-core-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-aci-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-sp-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-model-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/audience-annotations-0.5.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/bcprov-jdk15-140.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/checkstyle-6.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-beanutils-core-1.8.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-cli-1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-collections-3.2.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-io-2.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-lang-2.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-logging-1.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-pool-1.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/ehcache-core-2.4.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/guava-18.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-all-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-core-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/jline-0.9.94.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/junit-4.12.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/log4j-1.2.17.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mavibot-1.0.0-M1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mina-core-2.0.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mockito-all-1.8.5.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/netty-3.10.6.Final.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/org.abego.treelayout.core-1.0.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-api-1.7.25.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-log4j12-1.7.25.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-launcher.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit4.jar
2018-06-28 17:42:09,411 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:java.library.path=/Users/hanm/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2018-06-28 17:42:09,412 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:java.io.tmpdir=/var/folders/wv/j6wmf1nj5h7c36qz9b81kmfw0000gn/T/
2018-06-28 17:42:09,412 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:java.compiler=<NA>
2018-06-28 17:42:09,412 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:os.name=Mac OS X
2018-06-28 17:42:09,412 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:os.arch=x86_64
2018-06-28 17:42:09,412 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:os.version=10.13.5
2018-06-28 17:42:09,412 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:user.name=hanm
2018-06-28 17:42:09,412 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:user.home=/Users/hanm
2018-06-28 17:42:09,412 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Environment@100] - Server environment:user.dir=/Users/hanm/Desktop/projects/git/apache/zookeeper
2018-06-28 17:42:09,415 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2
2018-06-28 17:42:09,415 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2
2018-06-28 17:42:09,415 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2
2018-06-28 17:42:09,415 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 239
2018-06-28 17:42:09,415 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 240
2018-06-28 17:42:09,416 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Leader@380] - LEADING - LEADER ELECTION TOOK - 241
2018-06-28 17:42:09,417 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:09,421 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:09,428 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51160:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@7a76c4b0
2018-06-28 17:42:09,428 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51159:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2325c77b
2018-06-28 17:42:09,430 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51159:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:42:09,430 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51160:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:42:09,430 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51159:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:42:09,430 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51160:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:42:09,430 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51159:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:09,430 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51160:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:09,431 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:42:09,431 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:42:09,435 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51159:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:42:09,435 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51160:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:42:09,436 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Leader@964] - Have quorum of supporters, sids: [ 0,2 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:42:09,617 [myid:] - INFO  [main:CnxManagerTest@408] - Round 0, halting peer 0
2018-06-28 17:42:09,617 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:09,618 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:09,618 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:09,618 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:09,619 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:09,619 [myid:] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:09,620 [myid:] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:09,620 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:09,621 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:09,621 [myid:] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:09,622 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11251:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:09,623 [myid:] - ERROR [/0.0.0.0:11252:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:09,624 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:09,623 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:09,624 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:09,623 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:09,625 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:09,623 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:09,623 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:09,625 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:09,623 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:09,625 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,625 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,625 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:09,624 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:09,627 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:09,627 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,626 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:09,958 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:09,959 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:09,959 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:09,959 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:10,087 [myid:] - INFO  [/0.0.0.0:11246:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:10,128 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:10,128 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11251
2018-06-28 17:42:10,129 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@59e84876
2018-06-28 17:42:10,131 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11252
2018-06-28 17:42:10,132 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@909] - LOOKING
2018-06-28 17:42:10,132 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x0
2018-06-28 17:42:10,132 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:10,133 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51161
2018-06-28 17:42:10,133 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:42:10,133 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:42:10,133 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51163
2018-06-28 17:42:10,133 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51162
2018-06-28 17:42:10,135 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:10,135 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51164
2018-06-28 17:42:10,135 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:10,136 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:10,136 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:10,136 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:10,136 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:10,137 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:10,137 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2
2018-06-28 17:42:10,137 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 5
2018-06-28 17:42:10,137 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:10,138 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51165:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2325c77b
2018-06-28 17:42:10,139 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51165:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:42:10,139 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51165:LearnerHandler@475] - Sending SNAP
2018-06-28 17:42:10,139 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51165:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x100000000sent zxid of db as 0x100000000
2018-06-28 17:42:10,139 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Learner@336] - Getting a snapshot from leader 0x100000000
2018-06-28 17:42:10,141 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FileTxnSnapLog@301] - Snapshotting: 0x100000000 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:10,150 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51165:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:42:10,626 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:10,632 [myid:] - INFO  [main:CnxManagerTest@408] - Round 1, halting peer 0
2018-06-28 17:42:10,632 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:10,633 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:10,633 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:10,633 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:10,634 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:10,634 [myid:] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:10,634 [myid:] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:10,634 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:10,635 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:10,635 [myid:] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:10,636 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11251:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:10,636 [myid:] - ERROR [/0.0.0.0:11252:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:10,637 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:10,637 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:10,637 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:10,637 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:10,637 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:10,637 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:10,637 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:10,638 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:10,638 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:10,638 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:10,638 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:10,638 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:10,639 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:10,639 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:10,640 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:10,640 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:10,961 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:10,962 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:10,962 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:10,962 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:11,143 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:11,143 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11251
2018-06-28 17:42:11,144 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@6276ae34
2018-06-28 17:42:11,145 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:11,147 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11252
2018-06-28 17:42:11,148 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@909] - LOOKING
2018-06-28 17:42:11,148 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x100000000
2018-06-28 17:42:11,149 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:11,149 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:42:11,149 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51166
2018-06-28 17:42:11,149 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51167
2018-06-28 17:42:11,149 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51168
2018-06-28 17:42:11,149 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:42:11,150 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51169
2018-06-28 17:42:11,151 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:11,151 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:11,152 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:11,152 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:11,152 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:11,152 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:11,152 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2
2018-06-28 17:42:11,152 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4
2018-06-28 17:42:11,152 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:11,153 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:11,154 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51170:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2325c77b
2018-06-28 17:42:11,154 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51170:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:11,154 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51170:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:11,154 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51170:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:11,154 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:11,162 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51170:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:42:11,640 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:11,652 [myid:] - INFO  [main:CnxManagerTest@408] - Round 2, halting peer 0
2018-06-28 17:42:11,653 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:11,653 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:11,654 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:11,654 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:11,654 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:11,654 [myid:] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:11,654 [myid:] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:11,654 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:11,655 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:11,656 [myid:] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:11,656 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11251:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:11,657 [myid:] - ERROR [/0.0.0.0:11252:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:11,658 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:11,658 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:11,658 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:11,657 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:11,657 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:11,659 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:11,657 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:11,659 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:11,659 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:11,660 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:11,659 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:11,659 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:11,658 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:11,658 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:11,660 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:11,660 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:11,963 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51159:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:11,964 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:11,964 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51159:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51159 ********
2018-06-28 17:42:11,964 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:11,964 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:11,964 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:12,159 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:12,159 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11251
2018-06-28 17:42:12,160 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@5cc7c2a6
2018-06-28 17:42:12,160 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:12,162 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11252
2018-06-28 17:42:12,163 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@909] - LOOKING
2018-06-28 17:42:12,164 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x100000000
2018-06-28 17:42:12,164 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:12,164 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51171
2018-06-28 17:42:12,164 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:42:12,165 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51172
2018-06-28 17:42:12,165 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51173
2018-06-28 17:42:12,165 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:42:12,166 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51174
2018-06-28 17:42:12,166 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:12,166 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:12,167 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:12,168 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:12,168 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:12,168 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:12,168 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2
2018-06-28 17:42:12,168 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:12,168 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 5
2018-06-28 17:42:12,169 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:12,170 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51175:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2325c77b
2018-06-28 17:42:12,170 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51175:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:12,170 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51175:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:12,170 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51175:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:12,170 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:12,178 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51175:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:42:12,191 [myid:] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:12,197 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:12,660 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:12,663 [myid:] - INFO  [main:CnxManagerTest@408] - Round 3, halting peer 0
2018-06-28 17:42:12,663 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:12,663 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:12,664 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:12,664 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:12,664 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:12,664 [myid:] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:12,664 [myid:] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:12,664 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:12,665 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:12,665 [myid:] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:12,665 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11251:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:12,666 [myid:] - ERROR [/0.0.0.0:11252:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:12,666 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:12,666 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:12,667 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:12,666 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:12,667 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:12,666 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:12,667 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:12,667 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:12,667 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:12,666 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:12,668 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:12,666 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:12,668 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:12,668 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:12,668 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:12,669 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:12,963 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51165:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:12,963 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51165:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51165 ********
2018-06-28 17:42:12,967 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:12,967 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:12,967 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:12,968 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:13,134 [myid:] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:13,139 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:13,168 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:13,168 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11251
2018-06-28 17:42:13,169 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@32e6e9c3
2018-06-28 17:42:13,169 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:13,174 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11252
2018-06-28 17:42:13,175 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@909] - LOOKING
2018-06-28 17:42:13,175 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x100000000
2018-06-28 17:42:13,175 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:13,177 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:42:13,177 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51176
2018-06-28 17:42:13,178 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51177
2018-06-28 17:42:13,178 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51178
2018-06-28 17:42:13,178 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:42:13,179 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51179
2018-06-28 17:42:13,179 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:13,179 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:13,180 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:13,180 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:13,180 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:13,180 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:13,181 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2
2018-06-28 17:42:13,181 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:13,181 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 5
2018-06-28 17:42:13,181 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:13,182 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51180:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2325c77b
2018-06-28 17:42:13,182 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51180:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:13,182 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51180:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:13,183 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51180:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:13,183 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:13,184 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51180:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:42:13,667 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:13,678 [myid:] - INFO  [main:CnxManagerTest@408] - Round 4, halting peer 0
2018-06-28 17:42:13,678 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:13,679 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:13,679 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:13,679 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:13,680 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:13,680 [myid:] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:13,680 [myid:] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:13,680 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:13,681 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:13,681 [myid:] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:13,682 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11251:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:13,682 [myid:] - ERROR [/0.0.0.0:11252:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:13,683 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:13,683 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:13,683 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:13,683 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:13,684 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:13,684 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:13,683 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:13,683 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:13,685 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:13,683 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:13,685 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:13,683 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:13,685 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:13,684 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:13,686 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:13,686 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:13,968 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51170:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:13,969 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51170:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51170 ********
2018-06-28 17:42:13,970 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:13,970 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:13,970 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:13,971 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:14,155 [myid:] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:14,156 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:14,187 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:14,188 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11251
2018-06-28 17:42:14,188 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@2669b199
2018-06-28 17:42:14,188 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:14,190 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11252
2018-06-28 17:42:14,192 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@909] - LOOKING
2018-06-28 17:42:14,192 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x100000000
2018-06-28 17:42:14,192 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:14,193 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:42:14,193 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51181
2018-06-28 17:42:14,193 [myid:] - INFO  [WorkerSender[myid=0]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 0)
2018-06-28 17:42:14,194 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51183
2018-06-28 17:42:14,194 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51182
2018-06-28 17:42:14,194 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51184
2018-06-28 17:42:14,195 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:14,195 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:14,196 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:14,196 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:14,196 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:14,197 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:14,197 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:14,197 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2
2018-06-28 17:42:14,197 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4
2018-06-28 17:42:14,197 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:14,199 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51185:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2325c77b
2018-06-28 17:42:14,199 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51185:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:14,199 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51185:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:14,199 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51185:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:14,199 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:14,201 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51185:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:42:14,686 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:14,695 [myid:] - INFO  [main:CnxManagerTest@408] - Round 0, halting peer 1
2018-06-28 17:42:14,696 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:14,697 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:14,697 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:14,697 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:14,697 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:14,697 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:14,698 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:14,698 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:14,698 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:14,699 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:14,699 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11254:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:14,700 [myid:] - ERROR [/0.0.0.0:11255:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:14,700 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:14,701 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:14,700 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:14,701 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:14,700 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:14,701 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:14,700 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:14,702 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:14,700 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:14,702 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:14,700 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:14,702 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:14,702 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:14,703 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:14,703 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:14,703 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:14,969 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51175:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:14,970 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51175:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51175 ********
2018-06-28 17:42:14,973 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:14,974 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:14,974 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:14,974 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:15,167 [myid:] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:15,168 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:15,206 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:15,206 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11254
2018-06-28 17:42:15,206 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@5afa04c
2018-06-28 17:42:15,208 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11255
2018-06-28 17:42:15,209 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@909] - LOOKING
2018-06-28 17:42:15,209 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:42:15,210 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51186
2018-06-28 17:42:15,210 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:15,211 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:15,211 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:15,211 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51187
2018-06-28 17:42:15,211 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:42:15,212 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:15,212 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:15,212 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:15,212 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51188
2018-06-28 17:42:15,212 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:42:15,213 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51189
2018-06-28 17:42:15,212 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:15,213 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:15,213 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:15,213 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:15,213 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:286)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345)
	at java.io.DataInputStream.readFully(DataInputStream.java:195)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1020)
2018-06-28 17:42:15,214 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:15,213 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:15,215 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:15,214 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:15,215 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:15,214 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51190
2018-06-28 17:42:15,216 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:15,216 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:15,216 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:15,217 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:15,217 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2
2018-06-28 17:42:15,217 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 8
2018-06-28 17:42:15,217 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:15,218 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51191:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@7a76c4b0
2018-06-28 17:42:15,218 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51191:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:42:15,219 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51191:LearnerHandler@475] - Sending SNAP
2018-06-28 17:42:15,219 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51191:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x100000000sent zxid of db as 0x100000000
2018-06-28 17:42:15,219 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Learner@336] - Getting a snapshot from leader 0x100000000
2018-06-28 17:42:15,220 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FileTxnSnapLog@301] - Snapshotting: 0x100000000 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:15,227 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51191:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:42:15,704 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:15,711 [myid:] - INFO  [main:CnxManagerTest@408] - Round 1, halting peer 1
2018-06-28 17:42:15,712 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:15,712 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:15,712 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:15,713 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:15,713 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:15,713 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:15,713 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:15,713 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:15,714 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:15,714 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:15,715 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11254:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:15,715 [myid:] - ERROR [/0.0.0.0:11255:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:15,717 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:15,717 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:15,716 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:15,717 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:15,716 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:15,717 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:15,716 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:15,718 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:15,716 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:15,718 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:15,716 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:15,719 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:15,718 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:15,719 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:15,718 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:15,719 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:15,970 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51180:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:15,971 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51180:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51180 ********
2018-06-28 17:42:15,979 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:15,979 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:15,979 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:15,979 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:16,183 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:16,183 [myid:] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:16,217 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:16,218 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11254
2018-06-28 17:42:16,218 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@7921b0a2
2018-06-28 17:42:16,219 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:16,220 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11255
2018-06-28 17:42:16,221 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@909] - LOOKING
2018-06-28 17:42:16,222 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000000
2018-06-28 17:42:16,222 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51192
2018-06-28 17:42:16,224 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:16,224 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:16,224 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51193
2018-06-28 17:42:16,224 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:16,224 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:42:16,224 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:16,224 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51194
2018-06-28 17:42:16,225 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:16,225 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:16,226 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:16,226 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:16,226 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2
2018-06-28 17:42:16,226 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 5
2018-06-28 17:42:16,227 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:16,228 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51195:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@7a76c4b0
2018-06-28 17:42:16,228 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51195:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:16,228 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51195:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:16,228 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51195:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:16,228 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:16,230 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51195:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:42:16,720 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:16,724 [myid:] - INFO  [main:CnxManagerTest@408] - Round 2, halting peer 1
2018-06-28 17:42:16,725 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:16,725 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:16,725 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:16,726 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:16,726 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:16,726 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:16,726 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:16,726 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:16,727 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:16,727 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:16,728 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11254:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:16,729 [myid:] - ERROR [/0.0.0.0:11255:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:16,729 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:16,729 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:16,730 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:16,729 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:16,730 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:16,729 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:16,731 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:16,731 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:16,731 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:16,730 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:16,731 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:16,729 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:16,731 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:16,729 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:16,729 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:16,732 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:16,978 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51160:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:16,979 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51160:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51160 ********
2018-06-28 17:42:16,984 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:16,985 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:16,985 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:16,985 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:17,196 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:17,196 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:17,230 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:17,231 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11254
2018-06-28 17:42:17,231 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@1efbd816
2018-06-28 17:42:17,232 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:17,233 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11255
2018-06-28 17:42:17,234 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@909] - LOOKING
2018-06-28 17:42:17,235 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000000
2018-06-28 17:42:17,235 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51196
2018-06-28 17:42:17,236 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:17,236 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:42:17,236 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:17,236 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:17,236 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51197
2018-06-28 17:42:17,237 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:17,237 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51198
2018-06-28 17:42:17,238 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:17,238 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:17,238 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:17,238 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:17,238 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2
2018-06-28 17:42:17,239 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4
2018-06-28 17:42:17,239 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:17,240 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51199:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@7a76c4b0
2018-06-28 17:42:17,240 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51199:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:17,240 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51199:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:17,240 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51199:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:17,240 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:17,242 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51199:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:42:17,729 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:17,735 [myid:] - INFO  [main:CnxManagerTest@408] - Round 3, halting peer 1
2018-06-28 17:42:17,735 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:17,735 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:17,735 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:17,736 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:17,736 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:17,736 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:17,736 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:17,736 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:17,736 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:17,737 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:17,737 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11254:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:17,737 [myid:] - ERROR [/0.0.0.0:11255:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:17,738 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:17,738 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:17,738 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:17,738 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:17,738 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:17,738 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:17,738 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:17,739 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:17,738 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:17,739 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:17,738 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:17,739 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:17,738 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:17,740 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:17,738 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:17,740 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:17,981 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51191:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:17,981 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51191:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51191 ********
2018-06-28 17:42:17,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:17,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:17,991 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:17,991 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:18,217 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:18,220 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:18,242 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:18,242 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11254
2018-06-28 17:42:18,242 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@3c756e4d
2018-06-28 17:42:18,243 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:18,244 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11255
2018-06-28 17:42:18,245 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@909] - LOOKING
2018-06-28 17:42:18,246 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000000
2018-06-28 17:42:18,248 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51200
2018-06-28 17:42:18,248 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:18,249 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:18,249 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:18,249 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:42:18,249 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51201
2018-06-28 17:42:18,249 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:18,250 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51202
2018-06-28 17:42:18,251 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:18,251 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:18,251 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:18,251 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:18,251 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2
2018-06-28 17:42:18,251 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 6
2018-06-28 17:42:18,252 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:18,253 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51203:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@7a76c4b0
2018-06-28 17:42:18,253 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51203:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:18,253 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51203:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:18,253 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51203:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:18,254 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:18,256 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51203:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:42:18,740 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:18,749 [myid:] - INFO  [main:CnxManagerTest@408] - Round 4, halting peer 1
2018-06-28 17:42:18,749 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:18,749 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:18,750 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:18,750 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:18,750 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:18,750 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:18,750 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:18,750 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:18,751 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:18,751 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:18,752 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11254:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:18,752 [myid:] - ERROR [/0.0.0.0:11255:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:18,752 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:18,752 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:18,752 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:18,753 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:18,752 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:18,753 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:18,752 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:18,754 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:18,752 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:18,754 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:18,752 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:18,754 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:18,754 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:18,754 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:18,755 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:18,754 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:18,989 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51195:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:18,989 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51195:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51195 ********
2018-06-28 17:42:18,997 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:18,998 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:18,998 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:18,998 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:19,229 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:19,229 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:19,253 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:19,254 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11254
2018-06-28 17:42:19,254 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@573f2bb1
2018-06-28 17:42:19,255 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2/snapshot.100000000
2018-06-28 17:42:19,259 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11255
2018-06-28 17:42:19,260 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@909] - LOOKING
2018-06-28 17:42:19,260 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000000
2018-06-28 17:42:19,261 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51204
2018-06-28 17:42:19,262 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,262 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:19,262 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,262 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51205
2018-06-28 17:42:19,262 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:42:19,262 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,263 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51206
2018-06-28 17:42:19,264 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:19,264 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,264 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:19,264 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:19,264 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2
2018-06-28 17:42:19,265 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4
2018-06-28 17:42:19,265 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:19,266 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51207:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@7a76c4b0
2018-06-28 17:42:19,267 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51207:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:19,267 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51207:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:19,267 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51207:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:19,267 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:19,269 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51207:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:42:19,755 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:19,762 [myid:] - INFO  [main:CnxManagerTest@408] - Round 0, halting peer 2
2018-06-28 17:42:19,763 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 17:42:19,763 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:19,763 [myid:] - INFO  [LearnerCnxAcceptor-/0.0.0.0:11256:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:42:19,763 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:19,764 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:42:19,764 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:42:19,764 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:42:19,764 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:42:19,764 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:19,765 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:42:19,765 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:19,765 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:19,765 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:19,765 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:19,766 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:42:19,766 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51207:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51207 ********
2018-06-28 17:42:19,766 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:42:19,766 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51203:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51203 ********
2018-06-28 17:42:19,766 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51185:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51185 ********
2018-06-28 17:42:19,766 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51203:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:42:19,766 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11257:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:19,766 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51207:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:42:19,766 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51199:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51199 ********
2018-06-28 17:42:19,767 [myid:] - ERROR [/0.0.0.0:11258:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:19,766 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:19,767 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:19,768 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:19,767 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:19,768 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:19,767 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:19,768 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:19,767 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:19,768 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:19,767 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:19,769 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:19,767 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:19,769 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:19,767 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51199:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:42:19,767 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:42:19,767 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51185:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:42:19,767 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:19,769 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Leader@520] - Shutting down
2018-06-28 17:42:19,770 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:19,769 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:19,770 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:19,768 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:19,771 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:19,768 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:19,771 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:19,771 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:19,770 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:19,771 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:19,771 [myid:] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:19,771 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:CommitProcessor@184] - Shutting down
2018-06-28 17:42:19,771 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:19,771 [myid:] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:19,772 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:19,771 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:19,772 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:CommitProcessor@184] - Shutting down
2018-06-28 17:42:19,772 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:19,772 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:19,772 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:19,772 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:19,772 [myid:] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:19,772 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:19,772 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@909] - LOOKING
2018-06-28 17:42:19,772 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@909] - LOOKING
2018-06-28 17:42:19,773 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000000
2018-06-28 17:42:19,773 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FastLeaderElection@813] - New election. My id =  0, proposed zxid=0x100000000
2018-06-28 17:42:19,773 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,773 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,773 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,773 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 0 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,774 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /0.0.0.0:11258
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:204)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:42:19,774 [myid:] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /0.0.0.0:11258
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:204)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:42:19,774 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:19,774 [myid:] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:19,774 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,774 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:19,775 [myid:] - WARN  [WorkerSender[myid=0]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /0.0.0.0:11258
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:204)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:42:19,775 [myid:] - INFO  [WorkerSender[myid=0]:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:19,978 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@991] - LEADING
2018-06-28 17:42:19,978 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:19,978 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8375981356614903133.junit.dir/version-2
2018-06-28 17:42:19,978 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6774186357876806145.junit.dir/version-2
2018-06-28 17:42:19,978 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 206
2018-06-28 17:42:19,978 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Leader@380] - LEADING - LEADER ELECTION TOOK - 206
2018-06-28 17:42:19,979 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:19,984 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51211:LearnerHandler@346] - Follower sid: 0 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2325c77b
2018-06-28 17:42:19,986 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51211:LearnerHandler@401] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x100000000
2018-06-28 17:42:19,986 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51211:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000000
2018-06-28 17:42:19,986 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51211:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:19,986 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Learner@332] - Getting a diff from the leader 0x100000000
2018-06-28 17:42:19,988 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51211:LearnerHandler@535] - Received NEWLEADER-ACK message from 0
2018-06-28 17:42:19,988 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Leader@964] - Have quorum of supporters, sids: [ 0,1 ]; starting up and setting last processed zxid: 0x200000000
2018-06-28 17:42:20,240 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:20,240 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:20,272 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:20,273 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11257
2018-06-28 17:42:20,273 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@548b7f67
2018-06-28 17:42:20,275 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11258
2018-06-28 17:42:20,276 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@909] - LOOKING
2018-06-28 17:42:20,277 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:42:20,277 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51212
2018-06-28 17:42:20,278 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51213
2018-06-28 17:42:20,278 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 0 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:20,278 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:20,278 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:20,279 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:20,279 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:20,279 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:20,279 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:20,279 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:20,279 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:20,279 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:20,280 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:20,280 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:20,280 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:20,280 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:20,280 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2
2018-06-28 17:42:20,280 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4
2018-06-28 17:42:20,280 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:20,282 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51214:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@61e41ff9
2018-06-28 17:42:20,283 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51214:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:42:20,283 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51214:LearnerHandler@475] - Sending SNAP
2018-06-28 17:42:20,284 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51214:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x200000000sent zxid of db as 0x200000000
2018-06-28 17:42:20,284 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Learner@336] - Getting a snapshot from leader 0x200000000
2018-06-28 17:42:20,285 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FileTxnSnapLog@301] - Snapshotting: 0x200000000 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2/snapshot.200000000
2018-06-28 17:42:20,287 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51214:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:42:20,663 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:42:20,772 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:20,775 [myid:] - INFO  [main:CnxManagerTest@408] - Round 1, halting peer 2
2018-06-28 17:42:20,775 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:20,775 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:20,776 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:20,776 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:20,776 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:20,776 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:20,776 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:20,776 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:20,777 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:20,777 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:20,778 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11257:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:20,778 [myid:] - ERROR [/0.0.0.0:11258:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:20,779 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:20,779 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:20,779 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:20,779 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:20,780 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:20,779 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:20,778 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:20,780 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:20,778 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:20,780 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:20,780 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:20,780 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:20,780 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:20,781 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:20,779 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:20,781 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:20,996 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:20,997 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:20,997 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:20,997 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:21,252 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:21,252 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:21,284 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:21,285 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11257
2018-06-28 17:42:21,285 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@50c87b21
2018-06-28 17:42:21,286 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2/snapshot.200000000
2018-06-28 17:42:21,287 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11258
2018-06-28 17:42:21,289 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@909] - LOOKING
2018-06-28 17:42:21,289 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x200000000
2018-06-28 17:42:21,289 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51215
2018-06-28 17:42:21,290 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51216
2018-06-28 17:42:21,290 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:21,290 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:21,291 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:21,291 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:21,291 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:21,291 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:21,291 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:21,291 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2
2018-06-28 17:42:21,291 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 2
2018-06-28 17:42:21,291 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:21,292 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:21,293 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51217:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@61e41ff9
2018-06-28 17:42:21,293 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51217:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x200000000
2018-06-28 17:42:21,293 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51217:LearnerHandler@410] - leader and follower are in sync, zxid=0x200000000
2018-06-28 17:42:21,293 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51217:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:21,293 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Learner@332] - Getting a diff from the leader 0x200000000
2018-06-28 17:42:21,295 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51217:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:42:21,780 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:21,788 [myid:] - INFO  [main:CnxManagerTest@408] - Round 2, halting peer 2
2018-06-28 17:42:21,789 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:21,789 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:21,789 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:21,790 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:21,790 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:21,790 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:21,790 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:21,790 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:21,791 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:21,791 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:21,792 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11257:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:21,792 [myid:] - ERROR [/0.0.0.0:11258:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:21,792 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:21,792 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:21,793 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:21,792 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:21,792 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:21,793 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:21,792 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:21,793 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:21,792 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:21,793 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:21,793 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:21,792 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:21,794 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:21,793 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:21,794 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:21,794 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:22,001 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:22,002 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:22,002 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:22,002 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:22,264 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:22,264 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:22,296 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:22,296 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11257
2018-06-28 17:42:22,297 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@32d992b2
2018-06-28 17:42:22,297 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2/snapshot.200000000
2018-06-28 17:42:22,298 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11258
2018-06-28 17:42:22,299 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@909] - LOOKING
2018-06-28 17:42:22,299 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x200000000
2018-06-28 17:42:22,299 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51218
2018-06-28 17:42:22,300 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51219
2018-06-28 17:42:22,300 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:22,300 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:22,300 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:22,300 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:22,301 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:22,301 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:22,301 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:22,301 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:22,301 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2
2018-06-28 17:42:22,301 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 2
2018-06-28 17:42:22,301 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:22,302 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51220:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@61e41ff9
2018-06-28 17:42:22,302 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51220:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x200000000
2018-06-28 17:42:22,302 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51220:LearnerHandler@410] - leader and follower are in sync, zxid=0x200000000
2018-06-28 17:42:22,302 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51220:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:22,302 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Learner@332] - Getting a diff from the leader 0x200000000
2018-06-28 17:42:22,304 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51220:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:42:22,795 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:22,802 [myid:] - INFO  [main:CnxManagerTest@408] - Round 3, halting peer 2
2018-06-28 17:42:22,802 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:22,803 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:22,803 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:22,803 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:22,803 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:22,803 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:22,803 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:22,803 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:22,804 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:22,804 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:22,804 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11257:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:22,805 [myid:] - ERROR [/0.0.0.0:11258:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:22,805 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:22,805 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:22,805 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:22,805 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:22,805 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:22,805 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:22,805 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:22,806 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:22,805 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:22,806 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:22,805 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:22,806 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:22,806 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:22,806 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:22,806 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:22,806 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:22,997 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51214:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:22,997 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51214:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51214 ********
2018-06-28 17:42:23,008 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:23,008 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:23,009 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:23,009 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:23,280 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:23,280 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:23,306 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:23,307 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11257
2018-06-28 17:42:23,307 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@5dfcfece
2018-06-28 17:42:23,308 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2/snapshot.200000000
2018-06-28 17:42:23,309 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11258
2018-06-28 17:42:23,310 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@909] - LOOKING
2018-06-28 17:42:23,310 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x200000000
2018-06-28 17:42:23,312 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51222
2018-06-28 17:42:23,312 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51223
2018-06-28 17:42:23,312 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:23,312 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:23,313 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:23,313 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:23,313 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:23,313 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:23,313 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:23,314 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:23,314 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2
2018-06-28 17:42:23,314 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 3
2018-06-28 17:42:23,314 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:23,315 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51224:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@61e41ff9
2018-06-28 17:42:23,315 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51224:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x200000000
2018-06-28 17:42:23,315 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51224:LearnerHandler@410] - leader and follower are in sync, zxid=0x200000000
2018-06-28 17:42:23,315 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51224:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:23,315 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Learner@332] - Getting a diff from the leader 0x200000000
2018-06-28 17:42:23,323 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51224:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:42:23,809 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:23,813 [myid:] - INFO  [main:CnxManagerTest@408] - Round 4, halting peer 2
2018-06-28 17:42:23,814 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:410)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:23,814 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:23,814 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:23,814 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:23,814 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:23,814 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:23,815 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:23,815 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:23,815 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:23,816 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:23,816 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11257:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:23,816 [myid:] - ERROR [/0.0.0.0:11258:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:23,817 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:23,817 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:23,817 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:23,817 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:23,817 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:23,817 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:23,817 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:23,817 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:23,817 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:23,818 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:23,817 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:23,818 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:23,818 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:23,818 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:23,818 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:23,818 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:24,004 [myid:] - ERROR [LearnerHandler-/10.0.0.10:51217:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:42:24,004 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51217:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51217 ********
2018-06-28 17:42:24,015 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:24,016 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:24,016 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:24,016 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:24,293 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:24,293 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:24,320 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:24,320 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11257
2018-06-28 17:42:24,321 [myid:] - INFO  [main:CnxManagerTest@417] - Round {}, restarting peer {}[Ljava.lang.Object;@56f4468b
2018-06-28 17:42:24,321 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2/snapshot.200000000
2018-06-28 17:42:24,323 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11258
2018-06-28 17:42:24,324 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@909] - LOOKING
2018-06-28 17:42:24,324 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x200000000
2018-06-28 17:42:24,325 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51225
2018-06-28 17:42:24,326 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51226
2018-06-28 17:42:24,326 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:24,326 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:24,326 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:24,326 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), FOLLOWING (n.state), 0 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:24,327 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:42:24,327 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x200000000 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LEADING (my state)
2018-06-28 17:42:24,327 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@979] - FOLLOWING
2018-06-28 17:42:24,327 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:ZooKeeperServer@174] - Created server with tickTime 1000 minSessionTimeout 2000 maxSessionTimeout 20000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test76082990460733998.junit.dir/version-2
2018-06-28 17:42:24,327 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000000 (n.zxid), 0x2 (n.round), LEADING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:42:24,327 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 3
2018-06-28 17:42:24,328 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:24,329 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51227:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@61e41ff9
2018-06-28 17:42:24,329 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51227:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x200000000
2018-06-28 17:42:24,329 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51227:LearnerHandler@410] - leader and follower are in sync, zxid=0x200000000
2018-06-28 17:42:24,329 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51227:LearnerHandler@475] - Sending DIFF
2018-06-28 17:42:24,330 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Learner@332] - Getting a diff from the leader 0x200000000
2018-06-28 17:42:24,332 [myid:] - INFO  [LearnerHandler-/10.0.0.10:51227:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:42:24,818 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:24,825 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:427)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:24,825 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:24,826 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:24,826 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:24,826 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:24,826 [myid:] - INFO  [FollowerRequestProcessor:0:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:24,826 [myid:] - INFO  [CommitProcessor:0:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:24,826 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:24,827 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:24,827 [myid:] - INFO  [SyncThread:0:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:24,827 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11251:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:24,827 [myid:] - ERROR [/0.0.0.0:11252:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:24,828 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:24,828 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:24,828 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:24,828 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:24,828 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:24,828 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:24,828 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:24,828 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:24,828 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:24,828 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:24,828 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:24,828 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 17:42:24,828 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:24,829 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:24,829 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:427)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:24,828 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:24,829 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:24,829 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:24,829 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:24,829 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:42:24,829 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:42:24,829 [myid:] - INFO  [LearnerCnxAcceptor-/0.0.0.0:11253:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:42:24,829 [myid:] - INFO  [ProcessThread(sid:1 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:42:24,829 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:42:24,830 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:42:24,830 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:42:24,830 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:24,830 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:24,830 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:24,830 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:24,831 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:42:24,831 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:42:24,831 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51227:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51227 ********
2018-06-28 17:42:24,831 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11254:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:24,831 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:24,831 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:42:24,831 [myid:] - ERROR [/0.0.0.0:11255:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:24,832 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:24,832 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:24,831 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51220:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51220 ********
2018-06-28 17:42:24,831 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51211:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51211 ********
2018-06-28 17:42:24,831 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51224:LearnerHandler@661] - ******* GOODBYE /10.0.0.10:51224 ********
2018-06-28 17:42:24,832 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51211:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:42:24,832 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51220:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:42:24,831 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.server.quorum.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:427)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:42:24,831 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:24,833 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:24,831 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:24,833 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:24,831 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:24,831 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:42:24,833 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:Leader@520] - Shutting down
2018-06-28 17:42:24,833 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11254:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:24,831 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:24,833 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:ZooKeeperServer@502] - shutting down
2018-06-28 17:42:24,831 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51227:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:42:24,833 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:42:24,834 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:CommitProcessor@184] - Shutting down
2018-06-28 17:42:24,833 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:24,833 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:24,834 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:24,833 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:42:24,832 [myid:] - WARN  [LearnerHandler-/10.0.0.10:51224:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:42:24,834 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11251:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:24,834 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:42:24,834 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:42:24,834 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:42:24,835 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:24,835 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:42:24,835 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:42:24,835 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11257:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:42:24,835 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11257:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:42:24,836 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 13705
2018-06-28 17:42:24,836 [myid:] - ERROR [/0.0.0.0:11258:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:42:24,836 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 19
2018-06-28 17:42:24,836 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testWorkerThreads
2018-06-28 17:42:24,836 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testWorkerThreads
2018-06-28 17:42:24,836 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testWorkerThreads
2018-06-28 17:42:24,837 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testSocketTimeout
2018-06-28 17:42:24,837 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11259
2018-06-28 17:42:24,837 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11260
2018-06-28 17:42:24,837 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11261
2018-06-28 17:42:24,837 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:24,837 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11262
2018-06-28 17:42:24,837 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11263
2018-06-28 17:42:24,837 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11264
2018-06-28 17:42:24,837 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:24,838 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11265
2018-06-28 17:42:24,838 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11266
2018-06-28 17:42:24,838 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11267
2018-06-28 17:42:24,838 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:24,839 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testSocketTimeout
2018-06-28 17:42:24,840 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:24,840 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11263
2018-06-28 17:42:24,840 [myid:] - INFO  [main:CnxManagerTest@373] - Election port: 11264
2018-06-28 17:42:24,840 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11264
2018-06-28 17:42:25,303 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:25,306 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:25,667 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:42:25,829 [myid:] - INFO  [/0.0.0.0:11252:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:25,836 [myid:] - INFO  [/0.0.0.0:11255:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:25,838 [myid:] - INFO  [/0.0.0.0:11258:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:42:25,844 [myid:] - INFO  [/0.0.0.0:11264:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51232
2018-06-28 17:42:26,313 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:26,318 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:27,328 [myid:] - INFO  [WorkerSender[myid=0]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:27,328 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:27,328 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:27,328 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:42:27,328 [myid:] - INFO  [WorkerReceiver[myid=0]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:27,328 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:42:29,847 [myid:] - WARN  [/0.0.0.0:11264:QuorumCnxManager@461] - Exception reading or writing challenge: java.net.SocketTimeoutException: Read timed out
2018-06-28 17:42:29,847 [myid:] - WARN  [main:QuorumCnxManager@461] - Exception reading or writing challenge: java.io.EOFException
2018-06-28 17:42:29,847 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 14111
2018-06-28 17:42:29,847 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 6
2018-06-28 17:42:29,847 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testSocketTimeout
2018-06-28 17:42:29,847 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testSocketTimeout
2018-06-28 17:42:29,848 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testSocketTimeout
2018-06-28 17:42:29,848 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testCnxManager
2018-06-28 17:42:29,849 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11268
2018-06-28 17:42:29,849 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11269
2018-06-28 17:42:29,849 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11270
2018-06-28 17:42:29,849 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:29,850 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11271
2018-06-28 17:42:29,850 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11272
2018-06-28 17:42:29,850 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11273
2018-06-28 17:42:29,850 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:29,851 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11274
2018-06-28 17:42:29,852 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11275
2018-06-28 17:42:29,852 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11276
2018-06-28 17:42:29,852 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 0.0.0.0 to address: /0.0.0.0
2018-06-28 17:42:29,853 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testCnxManager
2018-06-28 17:42:29,854 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:29,854 [myid:] - INFO  [Thread-19:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:42:29,855 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11272
2018-06-28 17:42:29,855 [myid:] - INFO  [Thread-19:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11269
2018-06-28 17:42:29,856 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11273
2018-06-28 17:42:29,856 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /0.0.0.0:11270
2018-06-28 17:42:29,857 [myid:] - INFO  [/0.0.0.0:11273:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51242
2018-06-28 17:42:29,857 [myid:] - INFO  [Thread-19:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:42:29,857 [myid:] - INFO  [/0.0.0.0:11270:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51241
2018-06-28 17:42:29,858 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:29,858 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:29,859 [myid:] - INFO  [/0.0.0.0:11270:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51243
2018-06-28 17:42:29,859 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:29,859 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:29,859 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:29,859 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:29,860 [myid:] - INFO  [/0.0.0.0:11273:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51244
2018-06-28 17:42:29,860 [myid:] - INFO  [Thread-19:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (1, 0)
2018-06-28 17:42:29,860 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 0, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:29,860 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:29,860 [myid:] - WARN  [SendWorker:0:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:29,860 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:29,860 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 0, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:42:29,861 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:42:29,861 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:42:29,861 [myid:] - WARN  [RecvWorker:0:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:42:29,860 [myid:] - INFO  [/0.0.0.0:11270:QuorumCnxManager$Listener@743] - Received connection request /10.0.0.10:51245
2018-06-28 17:42:29,863 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 14977
2018-06-28 17:42:29,863 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 12
2018-06-28 17:42:29,863 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testCnxManager
2018-06-28 17:42:29,863 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testCnxManager
2018-06-28 17:42:29,863 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testCnxManager
------------- ---------------- ---------------

Testcase: testCnxFromFutureVersion took 2.132 sec
Testcase: testCnxManagerTimeout took 5.014 sec
Testcase: testCnxManagerSpinLock took 2.02 sec
Testcase: testWorkerThreads took 15.748 sec
Testcase: testSocketTimeout took 5.012 sec
Testcase: testCnxManager took 0.015 sec
