Testsuite: org.apache.zookeeper.test.FollowerResyncConcurrencyTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 83.764 sec
------------- Standard Output ---------------
2018-06-28 17:57:17,483 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testLaggingFollowerResyncsUnderNewEpoch
2018-06-28 17:57:17,490 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testLaggingFollowerResyncsUnderNewEpoch
2018-06-28 17:57:17,664 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11221
2018-06-28 17:57:17,665 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11222
2018-06-28 17:57:17,672 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:17,672 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11223
2018-06-28 17:57:17,673 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11224
2018-06-28 17:57:17,673 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:17,673 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11225
2018-06-28 17:57:17,673 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11226
2018-06-28 17:57:17,674 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:17,674 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11221
2018-06-28 17:57:17,681 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:17,691 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11221
2018-06-28 17:57:17,704 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11223
2018-06-28 17:57:17,704 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:17,705 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11223
2018-06-28 17:57:17,705 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11225
2018-06-28 17:57:17,706 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:17,706 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11225
2018-06-28 17:57:17,706 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:17,707 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:17,707 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:17,707 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:17,707 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:17,708 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:17,708 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:17,710 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:17,710 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:17,711 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:57:17,713 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11221 is no longer accepting client connections
2018-06-28 17:57:17,713 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 17:57:17,713 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11223 is no longer accepting client connections
2018-06-28 17:57:17,713 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11225
2018-06-28 17:57:17,713 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11225 is no longer accepting client connections
2018-06-28 17:57:17,714 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11221
2018-06-28 17:57:17,714 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:17,714 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11221
2018-06-28 17:57:17,716 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:17,718 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:17,722 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12222
2018-06-28 17:57:17,725 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11223
2018-06-28 17:57:17,725 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:17,725 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11223
2018-06-28 17:57:17,725 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:17,726 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:17,727 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12224
2018-06-28 17:57:17,727 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:57:17,730 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@909] - LOOKING
2018-06-28 17:57:17,730 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@909] - LOOKING
2018-06-28 17:57:17,731 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55090
2018-06-28 17:57:17,731 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:57:17,731 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:57:17,733 [myid:] - INFO  [/127.0.0.1:12222:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55091
2018-06-28 17:57:17,734 [myid:] - INFO  [/127.0.0.1:12224:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55092
2018-06-28 17:57:17,734 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:57:17,734 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:17,735 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:17,736 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:17,736 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:17,736 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:17,738 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ServerCnxn@324] - The list of known four letter word commands is : [{1936881266=srvr, 1937006964=stat, 2003003491=wchc, 1685417328=dump, 1668445044=crst, 1936880500=srst, 1701738089=envi, 1668247142=conf, 2003003507=wchs, 2003003504=wchp, 1668247155=cons, 1835955314=mntr, 1769173615=isro, 1920298859=ruok, 1735683435=gtmk, 1937010027=stmk}]
2018-06-28 17:57:17,738 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:17,737 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:17,738 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ServerCnxn@325] - The list of enabled four letter word commands is : [[wchs, stat, wchp, stmk, conf, ruok, mntr, srvr, wchc, envi, srst, isro, dump, gtmk, crst, cons]]
2018-06-28 17:57:17,739 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:17,739 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55090
2018-06-28 17:57:17,738 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:17,739 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:17,739 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:17,740 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:17,741 [myid:] - INFO  [Thread-2:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55090 (no session established for client)
2018-06-28 17:57:17,940 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:17,943 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@991] - LEADING
2018-06-28 17:57:17,944 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Learner@86] - TCP NoDelay set to: true
2018-06-28 17:57:17,945 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@64] - TCP NoDelay set to: true
2018-06-28 17:57:17,950 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT
2018-06-28 17:57:17,950 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:host.name=10.0.0.10
2018-06-28 17:57:17,950 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.version=1.8.0_172
2018-06-28 17:57:17,950 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.vendor=Oracle Corporation
2018-06-28 17:57:17,950 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre
2018-06-28 17:57:17,950 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.class.path=/Users/hanm/Desktop/projects/git/apache/zookeeper/build/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ant-eclipse-1.0-jvm1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ivy-2.4.0.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr-2.7.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-annotations-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-runtime-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-api-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-avl-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-constants-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-i18n-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-event-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm1-2.0.0-M2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-ldif-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-all-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-ber-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-i18n-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-client-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-codec-core-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-aci-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-sp-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-model-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/audience-annotations-0.5.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/bcprov-jdk15-140.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/checkstyle-6.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-beanutils-core-1.8.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-cli-1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-collections-3.2.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-io-2.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-lang-2.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-logging-1.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-pool-1.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/ehcache-core-2.4.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/guava-18.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-all-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-core-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/jline-0.9.94.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/junit-4.12.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/log4j-1.2.17.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mavibot-1.0.0-M1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mina-core-2.0.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mockito-all-1.8.5.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/netty-3.10.6.Final.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/org.abego.treelayout.core-1.0.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-api-1.7.25.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-log4j12-1.7.25.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-launcher.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit4.jar
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.library.path=/Users/hanm/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.io.tmpdir=/var/folders/wv/j6wmf1nj5h7c36qz9b81kmfw0000gn/T/
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:java.compiler=<NA>
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:os.name=Mac OS X
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:os.arch=x86_64
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:os.version=10.13.5
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:user.name=hanm
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:user.home=/Users/hanm
2018-06-28 17:57:17,951 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Environment@100] - Server environment:user.dir=/Users/hanm/Desktop/projects/git/apache/zookeeper
2018-06-28 17:57:17,953 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4747815924659913754.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4747815924659913754.junit.dir/version-2
2018-06-28 17:57:17,953 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test790259358225753602.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test790259358225753602.junit.dir/version-2
2018-06-28 17:57:17,953 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 222
2018-06-28 17:57:17,954 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@380] - LEADING - LEADER ELECTION TOOK - 223
2018-06-28 17:57:17,955 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:17,960 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55096:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@4d71aa0a
2018-06-28 17:57:17,962 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55096:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:57:17,962 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55096:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:57:17,962 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55096:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:17,963 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:57:17,965 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55096:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:17,965 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:57:18,002 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:57:18,003 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55097
2018-06-28 17:57:18,003 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55097
2018-06-28 17:57:18,004 [myid:] - INFO  [Thread-4:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:18,005 [myid:] - INFO  [Thread-4:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55097 (no session established for client)
2018-06-28 17:57:18,005 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 17:57:18,006 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55098
2018-06-28 17:57:18,006 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55098
2018-06-28 17:57:18,006 [myid:] - INFO  [Thread-5:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:18,007 [myid:] - INFO  [Thread-5:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55098 (no session established for client)
2018-06-28 17:57:18,010 [myid:] - INFO  [main:Environment@100] - Client environment:zookeeper.version=3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03, built on 06/29/2018 00:39 GMT
2018-06-28 17:57:18,010 [myid:] - INFO  [main:Environment@100] - Client environment:host.name=10.0.0.10
2018-06-28 17:57:18,011 [myid:] - INFO  [main:Environment@100] - Client environment:java.version=1.8.0_172
2018-06-28 17:57:18,011 [myid:] - INFO  [main:Environment@100] - Client environment:java.vendor=Oracle Corporation
2018-06-28 17:57:18,011 [myid:] - INFO  [main:Environment@100] - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home/jre
2018-06-28 17:57:18,011 [myid:] - INFO  [main:Environment@100] - Client environment:java.class.path=/Users/hanm/Desktop/projects/git/apache/zookeeper/build/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ant-eclipse-1.0-jvm1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/src/java/lib/ivy-2.4.0.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/classes:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr-2.7.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-annotations-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/antlr4-runtime-4.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-api-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-avl-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-constants-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-core-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-i18n-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-event-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-jdbm1-2.0.0-M2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-ldif-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-protocol-shared-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-all-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-asn1-ber-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-i18n-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-client-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-codec-core-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-aci-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-sp-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-extras-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-ldap-model-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/api-util-1.0.0-M20.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/audience-annotations-0.5.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/bcprov-jdk15-140.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/checkstyle-6.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-beanutils-core-1.8.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-cli-1.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-collections-3.2.2.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-io-2.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-lang-2.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-logging-1.1.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/commons-pool-1.6.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/ehcache-core-2.4.4.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/guava-18.0.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-all-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/hamcrest-core-1.3.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/jline-0.9.94.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/junit-4.12.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/log4j-1.2.17.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mavibot-1.0.0-M1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mina-core-2.0.7.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/mockito-all-1.8.5.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/netty-3.10.6.Final.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/org.abego.treelayout.core-1.0.1.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-api-1.7.25.jar:/Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/lib/slf4j-log4j12-1.7.25.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-launcher.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit.jar:/usr/local/Cellar/ant/1.10.3/libexec/lib/ant-junit4.jar
2018-06-28 17:57:18,011 [myid:] - INFO  [main:Environment@100] - Client environment:java.library.path=/Users/hanm/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2018-06-28 17:57:18,011 [myid:] - INFO  [main:Environment@100] - Client environment:java.io.tmpdir=/var/folders/wv/j6wmf1nj5h7c36qz9b81kmfw0000gn/T/
2018-06-28 17:57:18,011 [myid:] - INFO  [main:Environment@100] - Client environment:java.compiler=<NA>
2018-06-28 17:57:18,011 [myid:] - INFO  [main:Environment@100] - Client environment:os.name=Mac OS X
2018-06-28 17:57:18,012 [myid:] - INFO  [main:Environment@100] - Client environment:os.arch=x86_64
2018-06-28 17:57:18,012 [myid:] - INFO  [main:Environment@100] - Client environment:os.version=10.13.5
2018-06-28 17:57:18,012 [myid:] - INFO  [main:Environment@100] - Client environment:user.name=hanm
2018-06-28 17:57:18,012 [myid:] - INFO  [main:Environment@100] - Client environment:user.home=/Users/hanm
2018-06-28 17:57:18,012 [myid:] - INFO  [main:Environment@100] - Client environment:user.dir=/Users/hanm/Desktop/projects/git/apache/zookeeper
2018-06-28 17:57:18,013 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@7085bdee
2018-06-28 17:57:18,027 [myid:] - INFO  [main-SendThread(localhost:11221):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:18,028 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55099
2018-06-28 17:57:18,028 [myid:] - INFO  [main-SendThread(localhost:11221):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11221, initiating session
2018-06-28 17:57:18,030 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55099
2018-06-28 17:57:18,032 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:18,032 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:57:18,033 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:18,041 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x100066365720000 with negotiated timeout 30000 for client /127.0.0.1:55099
2018-06-28 17:57:18,041 [myid:] - INFO  [main-SendThread(localhost:11221):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11221, sessionid = 0x100066365720000, negotiated timeout = 30000
2018-06-28 17:57:18,043 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@90] - zk1 has session id 0x100066365720000
2018-06-28 17:57:18,052 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x100066365720000
2018-06-28 17:57:18,053 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x100066365720000 closed
2018-06-28 17:57:18,053 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x100066365720000
2018-06-28 17:57:18,053 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221
2018-06-28 17:57:18,053 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55099 which had sessionid 0x100066365720000
2018-06-28 17:57:18,053 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testLaggingFollowerResyncsUnderNewEpoch(FollowerResyncConcurrencyTest.java:96)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:18,053 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:18,054 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:18,054 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:18,054 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:18,054 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:18,054 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:18,054 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:18,055 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:18,055 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:18,055 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:18,056 [myid:] - ERROR [/127.0.0.1:12222:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:18,056 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:18,056 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:18,056 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:18,056 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:18,056 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221
2018-06-28 17:57:18,056 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:18,057 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221 to exit thread
2018-06-28 17:57:18,057 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:18,057 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:18,057 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:18,977 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:18,977 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:18,977 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:18,977 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:18,979 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223
2018-06-28 17:57:18,979 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 17:57:18,979 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testLaggingFollowerResyncsUnderNewEpoch(FollowerResyncConcurrencyTest.java:97)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:18,980 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:18,980 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12223:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:57:18,980 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:57:18,980 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:57:18,980 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:57:18,980 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:18,980 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:57:18,981 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:18,980 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:57:18,981 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:18,981 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:18,981 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:18,982 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55096:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55096 ********
2018-06-28 17:57:18,982 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:18,982 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55096:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:57:18,982 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223
2018-06-28 17:57:18,982 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:57:18,983 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223 to exit thread
2018-06-28 17:57:18,982 [myid:] - ERROR [/127.0.0.1:12224:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:18,983 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@520] - Shutting down
2018-06-28 17:57:18,983 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:18,983 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:57:18,984 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 17:57:18,984 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11221
2018-06-28 17:57:18,984 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:18,985 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11221
2018-06-28 17:57:18,987 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12222
2018-06-28 17:57:18,987 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11223
2018-06-28 17:57:18,987 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:18,987 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11223
2018-06-28 17:57:18,988 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@909] - LOOKING
2018-06-28 17:57:18,988 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100000003
2018-06-28 17:57:18,988 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:18,988 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12224
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:18,989 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:18,989 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12224
2018-06-28 17:57:18,989 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:18,989 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:57:18,989 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:18,990 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@909] - LOOKING
2018-06-28 17:57:18,990 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55104
2018-06-28 17:57:18,990 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x100000003
2018-06-28 17:57:18,990 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55104
2018-06-28 17:57:18,991 [myid:] - INFO  [/127.0.0.1:12222:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55105
2018-06-28 17:57:18,991 [myid:] - INFO  [Thread-6:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55104 (no session established for client)
2018-06-28 17:57:18,991 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:18,991 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:18,991 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:18,991 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:18,992 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:18,992 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:18,992 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:18,992 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12226
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:18,992 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:19,060 [myid:] - INFO  [/127.0.0.1:12222:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:19,194 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@991] - LEADING
2018-06-28 17:57:19,195 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test790259358225753602.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test790259358225753602.junit.dir/version-2
2018-06-28 17:57:19,194 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:19,195 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4747815924659913754.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4747815924659913754.junit.dir/version-2
2018-06-28 17:57:19,195 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@380] - LEADING - LEADER ELECTION TOOK - 205
2018-06-28 17:57:19,195 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 207
2018-06-28 17:57:19,195 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:19,196 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55108:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@4d71aa0a
2018-06-28 17:57:19,199 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55108:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x100000003 minCommittedLog=0x100000001 peerLastZxid=0x100000003
2018-06-28 17:57:19,199 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55108:LearnerHandler@410] - leader and follower are in sync, zxid=0x100000003
2018-06-28 17:57:19,199 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55108:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:19,199 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Learner@332] - Getting a diff from the leader 0x100000003
2018-06-28 17:57:19,200 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55108:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:19,201 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@964] - Have quorum of supporters, sids: [ 1,2 ]; starting up and setting last processed zxid: 0x200000000
2018-06-28 17:57:19,251 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:57:19,252 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55109
2018-06-28 17:57:19,253 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55109
2018-06-28 17:57:19,253 [myid:] - INFO  [Thread-8:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:19,253 [myid:] - INFO  [Thread-8:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55109 (no session established for client)
2018-06-28 17:57:19,254 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 17:57:19,254 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55110
2018-06-28 17:57:19,255 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55110
2018-06-28 17:57:19,255 [myid:] - INFO  [Thread-9:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:19,255 [myid:] - INFO  [Thread-9:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55110 (no session established for client)
2018-06-28 17:57:19,256 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 3; public port 11225
2018-06-28 17:57:19,256 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:19,256 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11225
2018-06-28 17:57:19,257 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:19,258 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:19,259 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12226
2018-06-28 17:57:19,259 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11225
2018-06-28 17:57:19,260 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11225:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55111
2018-06-28 17:57:19,260 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:QuorumPeer@909] - LOOKING
2018-06-28 17:57:19,260 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11225:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55111
2018-06-28 17:57:19,260 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:FastLeaderElection@813] - New election. My id =  3, proposed zxid=0x0
2018-06-28 17:57:19,261 [myid:] - INFO  [Thread-10:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55111 (no session established for client)
2018-06-28 17:57:19,261 [myid:] - INFO  [/127.0.0.1:12222:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55112
2018-06-28 17:57:19,262 [myid:] - INFO  [/127.0.0.1:12224:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55113
2018-06-28 17:57:19,262 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:19,262 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:19,262 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:19,263 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LEADING (my state)
2018-06-28 17:57:19,263 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:19,263 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:19,263 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:57:19,263 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:19,263 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:19,264 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:19,264 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 1 (n.sid), 0x2 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:19,264 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x100000003 (n.zxid), 0x1 (n.round), LEADING (n.state), 2 (n.sid), 0x2 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:19,264 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:19,264 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test871563181052195744.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test871563181052195744.junit.dir/version-2
2018-06-28 17:57:19,265 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 5
2018-06-28 17:57:19,265 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:19,266 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55114:LearnerHandler@346] - Follower sid: 3 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2aafc368
2018-06-28 17:57:19,267 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55114:LearnerHandler@401] - Synchronizing with Follower sid: 3 maxCommittedLog=0x100000003 minCommittedLog=0x100000001 peerLastZxid=0x0
2018-06-28 17:57:19,267 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55114:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:57:19,267 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55114:LearnerHandler@475] - Sending SNAP
2018-06-28 17:57:19,267 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55114:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x200000000sent zxid of db as 0x200000000
2018-06-28 17:57:19,267 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:Learner@336] - Getting a snapshot from leader 0x200000000
2018-06-28 17:57:19,269 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:FileTxnSnapLog@301] - Snapshotting: 0x200000000 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test871563181052195744.junit.dir/version-2/snapshot.200000000
2018-06-28 17:57:19,271 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55114:LearnerHandler@535] - Received NEWLEADER-ACK message from 3
2018-06-28 17:57:19,521 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11225
2018-06-28 17:57:19,522 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11225:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55115
2018-06-28 17:57:19,523 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11225:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55115
2018-06-28 17:57:19,523 [myid:] - INFO  [Thread-12:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:19,523 [myid:] - INFO  [Thread-12:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55115 (no session established for client)
2018-06-28 17:57:19,524 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@7085bdee
2018-06-28 17:57:19,524 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@115] - zk1 has session id 0x0
2018-06-28 17:57:19,525 [myid:] - INFO  [main-SendThread(localhost:11221):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:19,526 [myid:] - INFO  [main-SendThread(localhost:11221):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11221, initiating session
2018-06-28 17:57:19,526 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55116
2018-06-28 17:57:19,526 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55116
2018-06-28 17:57:19,527 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@119] - Got zxid 0x200000001 expected 0x1
2018-06-28 17:57:19,527 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.200000001
2018-06-28 17:57:19,527 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:Follower@119] - Got zxid 0x200000001 expected 0x1
2018-06-28 17:57:19,527 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.200000001
2018-06-28 17:57:19,527 [myid:] - INFO  [SyncThread:3:FileTxnLog@213] - Creating new log file: log.200000001
2018-06-28 17:57:19,529 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x10006636a450000 with negotiated timeout 30000 for client /127.0.0.1:55116
2018-06-28 17:57:19,530 [myid:] - INFO  [main-SendThread(localhost:11221):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11221, sessionid = 0x10006636a450000, negotiated timeout = 30000
2018-06-28 17:57:19,532 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11223 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@5f2108b5
2018-06-28 17:57:19,536 [myid:] - INFO  [main-SendThread(localhost:11223):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11223. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:19,537 [myid:] - INFO  [main-SendThread(localhost:11223):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11223, initiating session
2018-06-28 17:57:19,537 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55117
2018-06-28 17:57:19,537 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55117
2018-06-28 17:57:19,538 [myid:] - INFO  [CommitProcessor:2:ZooKeeperServer@694] - Established session 0x20006636a470000 with negotiated timeout 30000 for client /127.0.0.1:55117
2018-06-28 17:57:19,538 [myid:] - INFO  [main-SendThread(localhost:11223):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11223, sessionid = 0x20006636a470000, negotiated timeout = 30000
2018-06-28 17:57:19,539 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@121] - zk2 has session id 0x20006636a470000
2018-06-28 17:57:19,539 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11225 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@31a5c39e
2018-06-28 17:57:19,540 [myid:] - INFO  [main-SendThread(localhost:11225):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:19,541 [myid:] - INFO  [main-SendThread(localhost:11225):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11225, initiating session
2018-06-28 17:57:19,541 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11225:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55118
2018-06-28 17:57:19,541 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11225:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55118
2018-06-28 17:57:19,542 [myid:] - INFO  [CommitProcessor:3:ZooKeeperServer@694] - Established session 0x30006636a8b0000 with negotiated timeout 30000 for client /127.0.0.1:55118
2018-06-28 17:57:19,543 [myid:] - INFO  [main-SendThread(localhost:11225):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11225, sessionid = 0x30006636a8b0000, negotiated timeout = 30000
2018-06-28 17:57:19,543 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@127] - zk3 has session id 0x30006636a8b0000
2018-06-28 17:57:19,544 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x10006636a450000
2018-06-28 17:57:19,544 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x10006636a450000 closed
2018-06-28 17:57:19,544 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55116 which had sessionid 0x10006636a450000
2018-06-28 17:57:19,544 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x10006636a450000
2018-06-28 17:57:19,545 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x20006636a470000
2018-06-28 17:57:19,546 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x20006636a470000 closed
2018-06-28 17:57:19,546 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55117 which had sessionid 0x20006636a470000
2018-06-28 17:57:19,546 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x20006636a470000
2018-06-28 17:57:19,546 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x30006636a8b0000
2018-06-28 17:57:19,547 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x30006636a8b0000 closed
2018-06-28 17:57:19,547 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11225:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55118 which had sessionid 0x30006636a8b0000
2018-06-28 17:57:19,547 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x30006636a8b0000
2018-06-28 17:57:19,547 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221
2018-06-28 17:57:19,547 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testLaggingFollowerResyncsUnderNewEpoch(FollowerResyncConcurrencyTest.java:135)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:19,548 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:19,548 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:19,548 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:19,548 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:19,548 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:19,548 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:19,548 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:19,549 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:19,549 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:19,549 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:19,549 [myid:] - ERROR [/127.0.0.1:12222:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:19,549 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:19,550 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:19,549 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221
2018-06-28 17:57:19,549 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:19,550 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:19,549 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:19,550 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:19,549 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:19,550 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:19,549 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:19,550 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:19,550 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:19,551 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:19,550 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:19,551 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:19,550 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221 to exit thread
2018-06-28 17:57:19,549 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:19,551 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:19,990 [myid:] - INFO  [/127.0.0.1:12224:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:20,206 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:20,206 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:20,206 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:20,207 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:20,208 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223
2018-06-28 17:57:20,208 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 17:57:20,208 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testLaggingFollowerResyncsUnderNewEpoch(FollowerResyncConcurrencyTest.java:135)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:20,209 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:20,209 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:57:20,209 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12223:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:57:20,209 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:57:20,209 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:57:20,209 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:20,209 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:57:20,210 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:20,210 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:57:20,210 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:20,210 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:20,210 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:20,211 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:Follower@90] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:153)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:86)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:57:20,211 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55114:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55114 ********
2018-06-28 17:57:20,212 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:20,211 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11223:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:20,211 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55108:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55108 ********
2018-06-28 17:57:20,212 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55108:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:57:20,212 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:20,212 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:20,212 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:20,213 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:20,213 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:20,212 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55114:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:57:20,213 [myid:] - INFO  [FollowerRequestProcessor:3:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:20,213 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:CommitProcessor@184] - Shutting down
2018-06-28 17:57:20,212 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:20,212 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:20,213 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:20,212 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223
2018-06-28 17:57:20,212 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:20,212 [myid:] - ERROR [/127.0.0.1:12224:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:20,212 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:57:20,214 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:Leader@520] - Shutting down
2018-06-28 17:57:20,214 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:20,214 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223 to exit thread
2018-06-28 17:57:20,213 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:20,213 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:20,213 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:20,214 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11223:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:20,215 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225
2018-06-28 17:57:20,215 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testLaggingFollowerResyncsUnderNewEpoch(FollowerResyncConcurrencyTest.java:135)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:20,215 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:20,215 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:20,215 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:20,215 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:20,216 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:20,216 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11225:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:20,216 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225
2018-06-28 17:57:20,216 [myid:] - ERROR [/127.0.0.1:12226:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:20,216 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11225 to exit thread
2018-06-28 17:57:20,216 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11221
2018-06-28 17:57:20,217 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11221 is no longer accepting client connections
2018-06-28 17:57:20,217 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11223
2018-06-28 17:57:20,217 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11223 is no longer accepting client connections
2018-06-28 17:57:20,217 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11225
2018-06-28 17:57:20,218 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11225 is no longer accepting client connections
2018-06-28 17:57:20,218 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 13421
2018-06-28 17:57:20,218 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 27
2018-06-28 17:57:20,218 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testLaggingFollowerResyncsUnderNewEpoch
2018-06-28 17:57:20,218 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testLaggingFollowerResyncsUnderNewEpoch
2018-06-28 17:57:20,218 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testLaggingFollowerResyncsUnderNewEpoch
2018-06-28 17:57:20,222 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testResyncByDiffAfterFollowerCrashes
2018-06-28 17:57:20,222 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testResyncByDiffAfterFollowerCrashes
2018-06-28 17:57:20,229 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11227
2018-06-28 17:57:20,229 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11228
2018-06-28 17:57:20,229 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,230 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11229
2018-06-28 17:57:20,230 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11230
2018-06-28 17:57:20,230 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,230 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11231
2018-06-28 17:57:20,230 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11232
2018-06-28 17:57:20,231 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,231 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11227
2018-06-28 17:57:20,231 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:20,231 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 17:57:20,233 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11229
2018-06-28 17:57:20,233 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:20,233 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11229
2018-06-28 17:57:20,233 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11231
2018-06-28 17:57:20,234 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:20,234 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11231
2018-06-28 17:57:20,234 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:20,234 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:20,234 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:20,234 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:20,234 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:20,235 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:20,235 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:20,235 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:20,235 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:20,235 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:57:20,235 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11227 is no longer accepting client connections
2018-06-28 17:57:20,235 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11229
2018-06-28 17:57:20,236 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11229 is no longer accepting client connections
2018-06-28 17:57:20,236 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11231
2018-06-28 17:57:20,236 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11231 is no longer accepting client connections
2018-06-28 17:57:20,236 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11227
2018-06-28 17:57:20,236 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:20,236 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 17:57:20,237 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:20,237 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:20,238 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12228
2018-06-28 17:57:20,239 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 1
2018-06-28 17:57:20,239 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11229
2018-06-28 17:57:20,239 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:20,239 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11229
2018-06-28 17:57:20,239 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:57:20,240 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:20,240 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:57:20,240 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,240 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12230
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:20,240 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:20,241 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,241 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:20,241 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,242 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12230
2018-06-28 17:57:20,242 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 2
2018-06-28 17:57:20,242 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 3; public port 11231
2018-06-28 17:57:20,242 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:20,243 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11231
2018-06-28 17:57:20,243 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@909] - LOOKING
2018-06-28 17:57:20,243 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:57:20,243 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:20,244 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55127
2018-06-28 17:57:20,244 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,244 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,244 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,245 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:20,245 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,245 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12232
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:20,245 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,245 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,245 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:20,245 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,247 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12232
2018-06-28 17:57:20,247 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 3
2018-06-28 17:57:20,247 [myid:] - INFO  [main:QuorumUtil@135] - Checking ports 127.0.0.1:11227,127.0.0.1:11229,127.0.0.1:11231
2018-06-28 17:57:20,247 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:57:20,248 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer@909] - LOOKING
2018-06-28 17:57:20,248 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55130
2018-06-28 17:57:20,248 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:FastLeaderElection@813] - New election. My id =  3, proposed zxid=0x0
2018-06-28 17:57:20,248 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55130
2018-06-28 17:57:20,248 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55131
2018-06-28 17:57:20,249 [myid:] - INFO  [Thread-14:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55130 (no session established for client)
2018-06-28 17:57:20,249 [myid:] - INFO  [/127.0.0.1:12230:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55132
2018-06-28 17:57:20,249 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,249 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,249 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,249 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,250 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,250 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,250 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,250 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,250 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,250 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,250 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:20,461 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:20,461 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer@991] - LEADING
2018-06-28 17:57:20,461 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5831667665780543227.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test5831667665780543227.junit.dir/version-2
2018-06-28 17:57:20,461 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:20,462 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test74502219848299349.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test74502219848299349.junit.dir/version-2
2018-06-28 17:57:20,461 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3376796198270458139.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3376796198270458139.junit.dir/version-2
2018-06-28 17:57:20,462 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 219
2018-06-28 17:57:20,462 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:Leader@380] - LEADING - LEADER ELECTION TOOK - 214
2018-06-28 17:57:20,462 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 222
2018-06-28 17:57:20,462 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,462 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:20,463 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55133:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@1d975ef8
2018-06-28 17:57:20,463 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55134:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2095ca87
2018-06-28 17:57:20,465 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55133:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:57:20,465 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55133:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:57:20,465 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55133:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:20,466 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:57:20,466 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55134:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:57:20,466 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55134:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:57:20,466 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55134:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:20,466 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:57:20,467 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55133:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:57:20,467 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:Leader@964] - Have quorum of supporters, sids: [ 2,3 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:57:20,468 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55134:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:20,506 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:57:20,507 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55135
2018-06-28 17:57:20,508 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55135
2018-06-28 17:57:20,508 [myid:] - INFO  [Thread-17:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:20,508 [myid:] - INFO  [Thread-17:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55135 (no session established for client)
2018-06-28 17:57:20,508 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11227 is accepting client connections
2018-06-28 17:57:20,509 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11229
2018-06-28 17:57:20,509 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55136
2018-06-28 17:57:20,509 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55136
2018-06-28 17:57:20,510 [myid:] - INFO  [Thread-18:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:20,510 [myid:] - INFO  [Thread-18:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55136 (no session established for client)
2018-06-28 17:57:20,510 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11229 is accepting client connections
2018-06-28 17:57:20,510 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11231
2018-06-28 17:57:20,511 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55137
2018-06-28 17:57:20,511 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55137
2018-06-28 17:57:20,511 [myid:] - INFO  [Thread-19:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:20,512 [myid:] - INFO  [Thread-19:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55137 (no session established for client)
2018-06-28 17:57:20,512 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11231 is accepting client connections
2018-06-28 17:57:20,512 [myid:] - INFO  [main:JMXEnv@199] - JMXEnv.dump() follows
2018-06-28 17:57:20,519 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:20,520 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2018-06-28 17:57:20,521 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:20,521 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:20,521 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:20,521 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2018-06-28 17:57:20,521 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2018-06-28 17:57:20,521 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2018-06-28 17:57:20,524 [myid:] - INFO  [main:JMXEnv@118] - expect:InMemoryDataTree
2018-06-28 17:57:20,524 [myid:] - INFO  [main:JMXEnv@121] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:20,524 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2018-06-28 17:57:20,524 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2018-06-28 17:57:20,524 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2018-06-28 17:57:20,524 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:20,524 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:20,525 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2
2018-06-28 17:57:20,526 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2018-06-28 17:57:20,527 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3
2018-06-28 17:57:20,527 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2018-06-28 17:57:20,527 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@337] - Connecting to follower:1
2018-06-28 17:57:20,527 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11227 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@617faa95
2018-06-28 17:57:20,528 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:20,529 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:57:20,529 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55138
2018-06-28 17:57:20,529 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55138
2018-06-28 17:57:20,529 [myid:] - INFO  [SyncThread:3:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:20,529 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:57:20,529 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:57:20,530 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:20,530 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:20,531 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x10006636f390000 with negotiated timeout 30000 for client /127.0.0.1:55138
2018-06-28 17:57:20,531 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11227, sessionid = 0x10006636f390000, negotiated timeout = 30000
2018-06-28 17:57:20,531 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@341] - zk1 has session id 0x10006636f390000
2018-06-28 17:57:20,532 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11227 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@1e127982
2018-06-28 17:57:20,532 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:20,533 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:57:20,533 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55139
2018-06-28 17:57:20,533 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55139
2018-06-28 17:57:20,534 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x10006636f390001 with negotiated timeout 30000 for client /127.0.0.1:55139
2018-06-28 17:57:20,534 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11227, sessionid = 0x10006636f390001, negotiated timeout = 30000
2018-06-28 17:57:20,534 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@345] - zk2 has session id 0x10006636f390001
2018-06-28 17:57:20,534 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11231 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@60c6f5b
2018-06-28 17:57:20,535 [myid:] - INFO  [main-SendThread(localhost:11231):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:20,536 [myid:] - INFO  [main-SendThread(localhost:11231):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11231, initiating session
2018-06-28 17:57:20,538 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55140
2018-06-28 17:57:20,538 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55140
2018-06-28 17:57:20,539 [myid:] - INFO  [CommitProcessor:3:ZooKeeperServer@694] - Established session 0x30006636f390000 with negotiated timeout 30000 for client /127.0.0.1:55140
2018-06-28 17:57:20,539 [myid:] - INFO  [main-SendThread(localhost:11231):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11231, sessionid = 0x30006636f390000, negotiated timeout = 30000
2018-06-28 17:57:20,539 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@349] - zk3 has session id 0x30006636f390000
2018-06-28 17:57:20,558 [myid:] - INFO  [/127.0.0.1:12222:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:20,634 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:57:20,634 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:57:20,681 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:57:20,681 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncByDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:405)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:20,682 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:20,682 [myid:] - INFO  [main:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55139 which had sessionid 0x10006636f390001
2018-06-28 17:57:20,682 [myid:] - INFO  [main:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55138 which had sessionid 0x10006636f390000
2018-06-28 17:57:20,683 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:20,683 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x10006636f390000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:57:20,683 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:20,683 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:20,683 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:20,683 [myid:] - WARN  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1168] - Session 0x10006636f390001 for server localhost/127.0.0.1:11227, unexpected error, closing socket connection and attempting reconnect
java.io.IOException: Broken pipe
	at sun.nio.ch.FileDispatcherImpl.write0(Native Method)
	at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:47)
	at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93)
	at sun.nio.ch.IOUtil.write(IOUtil.java:65)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:471)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:117)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:366)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1145)
2018-06-28 17:57:20,683 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:20,683 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:20,684 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:20,684 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:20,690 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:20,690 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:20,691 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:20,691 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:20,691 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:20,691 [myid:] - ERROR [/127.0.0.1:12228:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:20,691 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:20,691 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:20,691 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:20,691 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:20,692 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:20,692 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:20,692 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:20,692 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:20,692 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:20,692 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:57:20,691 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:20,693 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:20,691 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:20,693 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:20,691 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:20,693 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:20,692 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227 to exit thread
2018-06-28 17:57:20,692 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:20,740 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:20,740 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:20,740 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:20,740 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:21,220 [myid:] - INFO  [/127.0.0.1:12224:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:21,220 [myid:] - INFO  [/127.0.0.1:12226:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:21,700 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:21,800 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@407] - Shutting down s1
2018-06-28 17:57:21,868 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:21,868 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:21,890 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:21,890 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:22,270 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:22,270 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:22,270 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:22,270 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:22,270 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:22,270 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:23,120 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:23,120 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:23,253 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:23,260 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:23,861 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:23,861 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:24,802 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:24,802 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:25,360 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:25,361 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:25,945 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:25,946 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:26,682 [myid:] - ERROR [LearnerHandler-/127.0.0.1:55134:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:57:26,683 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55134:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55134 ********
2018-06-28 17:57:26,847 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:26,848 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:27,144 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:27,144 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:27,852 [myid:] - INFO  [main:QuorumUtil@202] - Creating QuorumPeer 1; public port 11227
2018-06-28 17:57:27,852 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:27,852 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 17:57:27,866 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12228
2018-06-28 17:57:27,866 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:57:27,867 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55150
2018-06-28 17:57:27,868 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:57:27,868 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55150
2018-06-28 17:57:27,868 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x10000016d
2018-06-28 17:57:27,868 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x10000016d (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:27,869 [myid:] - INFO  [Thread-21:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55150 (no session established for client)
2018-06-28 17:57:27,869 [myid:] - INFO  [/127.0.0.1:12230:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55151
2018-06-28 17:57:27,869 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:57:27,869 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55152
2018-06-28 17:57:27,869 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (3, 1)
2018-06-28 17:57:27,869 [myid:] - INFO  [/127.0.0.1:12232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55153
2018-06-28 17:57:27,870 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55154
2018-06-28 17:57:27,871 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x10000016d (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:27,871 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:27,872 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:27,872 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x10000016d (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:57:27,872 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:27,872 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:27,872 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:27,872 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3376796198270458139.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3376796198270458139.junit.dir/version-2
2018-06-28 17:57:27,872 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4
2018-06-28 17:57:27,872 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:27,873 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55155:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2095ca87
2018-06-28 17:57:27,873 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55155:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x1000001df minCommittedLog=0x100000001 peerLastZxid=0x10000016d
2018-06-28 17:57:27,874 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55155:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:27,874 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Learner@332] - Getting a diff from the leader 0x1000001df
2018-06-28 17:57:27,881 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Learner@387] - Got zxid 0x10000016e expected 0x1
2018-06-28 17:57:27,883 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55155:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:27,884 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.10000016e
2018-06-28 17:57:28,128 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:57:28,129 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55156
2018-06-28 17:57:28,129 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55156
2018-06-28 17:57:28,129 [myid:] - INFO  [Thread-23:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:28,131 [myid:] - INFO  [Thread-23:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55156 (no session established for client)
2018-06-28 17:57:28,131 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:57:28,131 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.startThenShutdown(QuorumUtil.java:210)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncByDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:414)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:28,131 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:28,132 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:28,132 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:28,132 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:28,132 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:28,132 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:28,132 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:28,134 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:28,134 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:28,135 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:28,136 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:28,137 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:57:28,137 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:28,137 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:28,138 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:28,137 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:28,138 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:28,137 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:28,139 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:28,136 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:28,139 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:28,136 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:28,136 [myid:] - ERROR [/127.0.0.1:12228:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:28,139 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:28,138 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:28,138 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:28,137 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227 to exit thread
2018-06-28 17:57:28,140 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:28,140 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:28,169 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:28,170 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11227: Connection refused
2018-06-28 17:57:28,520 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:28,520 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:28,520 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:28,520 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:28,521 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11227
2018-06-28 17:57:28,521 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:28,522 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11227
2018-06-28 17:57:28,537 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12228
2018-06-28 17:57:28,537 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:57:28,538 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55158
2018-06-28 17:57:28,538 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55158
2018-06-28 17:57:28,540 [myid:] - INFO  [Thread-24:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55158 (no session established for client)
2018-06-28 17:57:28,540 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@909] - LOOKING
2018-06-28 17:57:28,540 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x1000001df
2018-06-28 17:57:28,540 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1000001df (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:28,541 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:57:28,541 [myid:] - INFO  [/127.0.0.1:12230:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55159
2018-06-28 17:57:28,541 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (3, 1)
2018-06-28 17:57:28,541 [myid:] - INFO  [/127.0.0.1:12232:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55160
2018-06-28 17:57:28,541 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55161
2018-06-28 17:57:28,542 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55162
2018-06-28 17:57:28,542 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:28,542 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1000001df (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:28,544 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:28,544 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x1000001df (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:57:28,544 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:28,544 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:28,544 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3376796198270458139.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3376796198270458139.junit.dir/version-2
2018-06-28 17:57:28,544 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:28,544 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 3
2018-06-28 17:57:28,545 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:28,546 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55163:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@2095ca87
2018-06-28 17:57:28,546 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55163:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x1000001e1 minCommittedLog=0x100000001 peerLastZxid=0x1000001df
2018-06-28 17:57:28,546 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55163:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:28,546 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Learner@332] - Getting a diff from the leader 0x1000001e1
2018-06-28 17:57:28,547 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Learner@387] - Got zxid 0x1000001e0 expected 0x1
2018-06-28 17:57:28,548 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55163:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:28,549 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.1000001e0
2018-06-28 17:57:28,550 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@119] - Got zxid 0x1000001e2 expected 0x1
2018-06-28 17:57:28,638 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:28,638 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:57:28,638 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55164
2018-06-28 17:57:28,639 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:ZooKeeperServer@942] - Client attempting to renew session 0x10006636f390000 at /127.0.0.1:55164
2018-06-28 17:57:28,639 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:Learner@108] - Revalidating client: 0x10006636f390000
2018-06-28 17:57:28,641 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@694] - Established session 0x10006636f390000 with negotiated timeout 30000 for client /127.0.0.1:55164
2018-06-28 17:57:28,641 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11227, sessionid = 0x10006636f390000, negotiated timeout = 30000
2018-06-28 17:57:28,800 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:57:28,801 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55165
2018-06-28 17:57:28,801 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55165
2018-06-28 17:57:28,802 [myid:] - INFO  [Thread-26:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:28,802 [myid:] - INFO  [Thread-26:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55165 (no session established for client)
2018-06-28 17:57:28,802 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@417] - Setting up server: 1
2018-06-28 17:57:29,139 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:29,708 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:29,708 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11227, initiating session
2018-06-28 17:57:29,709 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55166
2018-06-28 17:57:29,709 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:ZooKeeperServer@942] - Client attempting to renew session 0x10006636f390001 at /127.0.0.1:55166
2018-06-28 17:57:29,709 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:Learner@108] - Revalidating client: 0x10006636f390001
2018-06-28 17:57:29,710 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:ZooKeeperServer@694] - Established session 0x10006636f390001 with negotiated timeout 30000 for client /127.0.0.1:55166
2018-06-28 17:57:29,710 [myid:] - INFO  [main-SendThread(localhost:11227):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11227, sessionid = 0x10006636f390001, negotiated timeout = 30000
2018-06-28 17:57:30,874 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:30,874 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:34,523 [myid:] - ERROR [LearnerHandler-/127.0.0.1:55155:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:57:34,523 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55155:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55155 ********
2018-06-28 17:57:34,685 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x10006636f390000
2018-06-28 17:57:34,693 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x10006636f390000 closed
2018-06-28 17:57:34,693 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x10006636f390000
2018-06-28 17:57:34,693 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55164 which had sessionid 0x10006636f390000
2018-06-28 17:57:34,695 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x10006636f390001
2018-06-28 17:57:34,719 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x10006636f390001 closed
2018-06-28 17:57:34,719 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x10006636f390001
2018-06-28 17:57:34,719 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55166 which had sessionid 0x10006636f390001
2018-06-28 17:57:34,720 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x30006636f390000
2018-06-28 17:57:34,728 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x30006636f390000 closed
2018-06-28 17:57:34,728 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55140 which had sessionid 0x30006636f390000
2018-06-28 17:57:34,728 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x30006636f390000
2018-06-28 17:57:34,728 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:57:34,728 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncByDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:458)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:34,729 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:34,729 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:34,729 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:34,729 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:34,729 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:34,729 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:34,729 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:34,742 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:34,742 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:34,742 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11227:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:34,743 [myid:] - ERROR [/127.0.0.1:12228:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:34,743 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:34,744 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:34,744 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:34,745 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:34,744 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:34,745 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:34,744 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:34,745 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:34,743 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:34,745 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:34,743 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:34,746 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:34,745 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:34,746 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:34,745 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:34,746 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:34,744 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227
2018-06-28 17:57:34,746 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227 to exit thread
2018-06-28 17:57:35,560 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:35,560 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:35,560 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:35,560 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11227:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:35,560 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229
2018-06-28 17:57:35,560 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncByDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:458)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:35,561 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:35,561 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:35,561 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:35,561 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:35,561 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:35,561 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:35,561 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:35,574 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:35,574 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:35,574 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11229:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:35,574 [myid:] - ERROR [/127.0.0.1:12230:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:35,574 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:35,575 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:35,574 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:35,575 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:35,574 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229
2018-06-28 17:57:35,574 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:35,575 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229 to exit thread
2018-06-28 17:57:35,575 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:35,575 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:35,575 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:35,748 [myid:] - INFO  [/127.0.0.1:12228:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:36,568 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:36,568 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:36,568 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:36,568 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11229:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:36,568 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231
2018-06-28 17:57:36,569 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 17:57:36,569 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncByDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:458)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:36,569 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:36,569 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12231:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:57:36,569 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:57:36,569 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:57:36,570 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:57:36,570 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:36,570 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:57:36,570 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:36,570 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:57:36,570 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:36,570 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:36,570 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:36,579 [myid:] - INFO  [/127.0.0.1:12230:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:36,582 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55133:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55133 ********
2018-06-28 17:57:36,582 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11231:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:36,582 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55163:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55163 ********
2018-06-28 17:57:36,582 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55133:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:57:36,582 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231
2018-06-28 17:57:36,582 [myid:] - ERROR [/127.0.0.1:12232:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:36,582 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:57:36,582 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:Leader@520] - Shutting down
2018-06-28 17:57:36,582 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55163:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:57:36,582 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:36,582 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11231 to exit thread
2018-06-28 17:57:36,583 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11227
2018-06-28 17:57:36,583 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11227 is no longer accepting client connections
2018-06-28 17:57:36,583 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11229
2018-06-28 17:57:36,583 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11229 is no longer accepting client connections
2018-06-28 17:57:36,584 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11231
2018-06-28 17:57:36,584 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11231 is no longer accepting client connections
2018-06-28 17:57:36,584 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 60784
2018-06-28 17:57:36,584 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 22
2018-06-28 17:57:36,584 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testResyncByDiffAfterFollowerCrashes
2018-06-28 17:57:36,584 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testResyncByDiffAfterFollowerCrashes
2018-06-28 17:57:36,584 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testResyncByDiffAfterFollowerCrashes
2018-06-28 17:57:36,585 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testFollowerSendsLastZxid
2018-06-28 17:57:36,585 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testFollowerSendsLastZxid
2018-06-28 17:57:36,592 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11233
2018-06-28 17:57:36,592 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11234
2018-06-28 17:57:36,592 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,593 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11235
2018-06-28 17:57:36,593 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11236
2018-06-28 17:57:36,593 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,594 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11237
2018-06-28 17:57:36,594 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11238
2018-06-28 17:57:36,594 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,594 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11233
2018-06-28 17:57:36,594 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,594 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:57:36,595 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11235
2018-06-28 17:57:36,595 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,595 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11235
2018-06-28 17:57:36,596 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11237
2018-06-28 17:57:36,596 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,596 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11237
2018-06-28 17:57:36,597 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:36,597 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:36,597 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:36,597 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:36,597 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:36,597 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:36,598 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:36,598 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:36,598 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:36,598 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:57:36,598 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11233 is no longer accepting client connections
2018-06-28 17:57:36,598 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11235
2018-06-28 17:57:36,599 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11235 is no longer accepting client connections
2018-06-28 17:57:36,599 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11237
2018-06-28 17:57:36,599 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11237 is no longer accepting client connections
2018-06-28 17:57:36,599 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11233
2018-06-28 17:57:36,599 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,599 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11233
2018-06-28 17:57:36,600 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,601 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,602 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12234
2018-06-28 17:57:36,602 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 1
2018-06-28 17:57:36,602 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11235
2018-06-28 17:57:36,603 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,603 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11235
2018-06-28 17:57:36,603 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@909] - LOOKING
2018-06-28 17:57:36,603 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:57:36,603 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,604 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,604 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12236
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:36,604 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,605 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,605 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:36,605 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,606 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12236
2018-06-28 17:57:36,607 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 2
2018-06-28 17:57:36,607 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 3; public port 11237
2018-06-28 17:57:36,607 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,607 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11237
2018-06-28 17:57:36,607 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@909] - LOOKING
2018-06-28 17:57:36,608 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:57:36,608 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,608 [myid:] - INFO  [/127.0.0.1:12234:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55177
2018-06-28 17:57:36,609 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,609 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,609 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,609 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:36,610 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12238
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:36,609 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,609 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,610 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,610 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,611 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12238
2018-06-28 17:57:36,610 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,611 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 3
2018-06-28 17:57:36,612 [myid:] - INFO  [main:QuorumUtil@135] - Checking ports 127.0.0.1:11233,127.0.0.1:11235,127.0.0.1:11237
2018-06-28 17:57:36,612 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:57:36,612 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11237:QuorumPeer@909] - LOOKING
2018-06-28 17:57:36,612 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55180
2018-06-28 17:57:36,612 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11237:FastLeaderElection@813] - New election. My id =  3, proposed zxid=0x0
2018-06-28 17:57:36,613 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55180
2018-06-28 17:57:36,613 [myid:] - INFO  [/127.0.0.1:12234:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55181
2018-06-28 17:57:36,614 [myid:] - INFO  [Thread-28:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55180 (no session established for client)
2018-06-28 17:57:36,614 [myid:] - INFO  [/127.0.0.1:12236:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55182
2018-06-28 17:57:36,615 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,615 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,615 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,615 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,616 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,616 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,616 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,616 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,616 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,616 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,616 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,643 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:57:36,825 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:36,825 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11237:QuorumPeer@991] - LEADING
2018-06-28 17:57:36,825 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11237:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1701953507939816692.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1701953507939816692.junit.dir/version-2
2018-06-28 17:57:36,825 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1527588482013834105.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1527588482013834105.junit.dir/version-2
2018-06-28 17:57:36,826 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11237:Leader@380] - LEADING - LEADER ELECTION TOOK - 213
2018-06-28 17:57:36,825 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:36,826 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8311133331150923737.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test8311133331150923737.junit.dir/version-2
2018-06-28 17:57:36,826 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 222
2018-06-28 17:57:36,826 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 218
2018-06-28 17:57:36,827 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,827 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,829 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55183:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@73d92e1b
2018-06-28 17:57:36,830 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55184:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@fd550ea
2018-06-28 17:57:36,832 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55184:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:57:36,832 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55183:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:57:36,832 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55184:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:57:36,832 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55184:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:36,832 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55183:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:57:36,833 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55183:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:36,833 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:57:36,833 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:57:36,835 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55184:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:36,835 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55183:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:57:36,836 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11237:Leader@964] - Have quorum of supporters, sids: [ 1,3 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:57:36,873 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11233
2018-06-28 17:57:36,874 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55185
2018-06-28 17:57:36,874 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55185
2018-06-28 17:57:36,874 [myid:] - INFO  [Thread-31:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:36,875 [myid:] - INFO  [Thread-31:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55185 (no session established for client)
2018-06-28 17:57:36,875 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11233 is accepting client connections
2018-06-28 17:57:36,876 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11235
2018-06-28 17:57:36,876 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55186
2018-06-28 17:57:36,876 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11235:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55186
2018-06-28 17:57:36,877 [myid:] - INFO  [Thread-32:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:36,877 [myid:] - INFO  [Thread-32:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55186 (no session established for client)
2018-06-28 17:57:36,878 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11235 is accepting client connections
2018-06-28 17:57:36,878 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11237
2018-06-28 17:57:36,878 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11237:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55187
2018-06-28 17:57:36,879 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11237:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55187
2018-06-28 17:57:36,879 [myid:] - INFO  [Thread-33:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:36,880 [myid:] - INFO  [Thread-33:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55187 (no session established for client)
2018-06-28 17:57:36,880 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11237 is accepting client connections
2018-06-28 17:57:36,880 [myid:] - INFO  [main:JMXEnv@199] - JMXEnv.dump() follows
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2018-06-28 17:57:36,883 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2018-06-28 17:57:36,884 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2018-06-28 17:57:36,887 [myid:] - INFO  [main:JMXEnv@118] - expect:InMemoryDataTree
2018-06-28 17:57:36,887 [myid:] - INFO  [main:JMXEnv@121] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:36,887 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2018-06-28 17:57:36,887 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2018-06-28 17:57:36,887 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2018-06-28 17:57:36,887 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:36,887 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2018-06-28 17:57:36,887 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:36,888 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3
2018-06-28 17:57:36,889 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2018-06-28 17:57:36,890 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@539] - Connecting to follower:1
2018-06-28 17:57:36,890 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=localhost:11233 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@18eed359
2018-06-28 17:57:36,891 [myid:] - INFO  [main-SendThread(localhost:11233):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:36,891 [myid:] - INFO  [main-SendThread(localhost:11233):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11233, initiating session
2018-06-28 17:57:36,891 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55188
2018-06-28 17:57:36,891 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55188
2018-06-28 17:57:36,893 [myid:] - INFO  [SyncThread:3:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:36,893 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11233:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:57:36,893 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11235:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:57:36,893 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:36,893 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:36,895 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x1000663af270000 with negotiated timeout 30000 for client /127.0.0.1:55188
2018-06-28 17:57:36,895 [myid:] - INFO  [main-SendThread(localhost:11233):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11233, sessionid = 0x1000663af270000, negotiated timeout = 30000
2018-06-28 17:57:36,897 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x1000663af270000
2018-06-28 17:57:36,897 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x1000663af270000 closed
2018-06-28 17:57:36,897 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x1000663af270000
2018-06-28 17:57:36,897 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 65244
2018-06-28 17:57:36,898 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11233:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55188 which had sessionid 0x1000663af270000
2018-06-28 17:57:36,898 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 66
2018-06-28 17:57:36,898 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testFollowerSendsLastZxid
2018-06-28 17:57:36,898 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testFollowerSendsLastZxid
2018-06-28 17:57:36,898 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testFollowerSendsLastZxid
2018-06-28 17:57:36,899 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testResyncBySnapThenDiffAfterFollowerCrashes
2018-06-28 17:57:36,899 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testResyncBySnapThenDiffAfterFollowerCrashes
2018-06-28 17:57:36,904 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11239
2018-06-28 17:57:36,904 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11240
2018-06-28 17:57:36,904 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,905 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11241
2018-06-28 17:57:36,905 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11242
2018-06-28 17:57:36,905 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,905 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11243
2018-06-28 17:57:36,905 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11244
2018-06-28 17:57:36,905 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,905 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11239
2018-06-28 17:57:36,906 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,906 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11239
2018-06-28 17:57:36,906 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11241
2018-06-28 17:57:36,906 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,906 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11241
2018-06-28 17:57:36,907 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11243
2018-06-28 17:57:36,907 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,907 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11243
2018-06-28 17:57:36,907 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:36,908 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:36,908 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:36,908 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:36,908 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:36,908 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:36,908 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:57:36,908 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:57:36,908 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:57:36,908 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:36,909 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11239 is no longer accepting client connections
2018-06-28 17:57:36,909 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11241
2018-06-28 17:57:36,909 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11241 is no longer accepting client connections
2018-06-28 17:57:36,909 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11243
2018-06-28 17:57:36,910 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11243 is no longer accepting client connections
2018-06-28 17:57:36,910 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11239
2018-06-28 17:57:36,910 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,910 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11239
2018-06-28 17:57:36,911 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,912 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,913 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12240
2018-06-28 17:57:36,913 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 1
2018-06-28 17:57:36,913 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11241
2018-06-28 17:57:36,913 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,913 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:MBeanRegistry@104] - Failed to register MBean ReplicatedServer_id1
2018-06-28 17:57:36,914 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@898] - Failed to register with JMX
javax.management.InstanceAlreadyExistsException: org.apache.ZooKeeperService:name0=ReplicatedServer_id1
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.MBeanRegistry.register(MBeanRegistry.java:100)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:877)
2018-06-28 17:57:36,914 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@909] - LOOKING
2018-06-28 17:57:36,914 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11241
2018-06-28 17:57:36,914 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:57:36,914 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,914 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,914 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12242
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:36,915 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,915 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:36,915 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,915 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,917 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12242
2018-06-28 17:57:36,917 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 2
2018-06-28 17:57:36,917 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 3; public port 11243
2018-06-28 17:57:36,918 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:36,918 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:MBeanRegistry@104] - Failed to register MBean ReplicatedServer_id2
2018-06-28 17:57:36,918 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@898] - Failed to register with JMX
javax.management.InstanceAlreadyExistsException: org.apache.ZooKeeperService:name0=ReplicatedServer_id2
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.MBeanRegistry.register(MBeanRegistry.java:100)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:877)
2018-06-28 17:57:36,918 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@909] - LOOKING
2018-06-28 17:57:36,918 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11243
2018-06-28 17:57:36,918 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:MBeanRegistry@104] - Failed to register MBean LeaderElection
2018-06-28 17:57:36,918 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:FastLeaderElection@795] - Failed to register with JMX
javax.management.InstanceAlreadyExistsException: org.apache.ZooKeeperService:name0=LeaderElection
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.MBeanRegistry.register(MBeanRegistry.java:100)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:792)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:57:36,919 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:57:36,919 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,920 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55194
2018-06-28 17:57:36,920 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,920 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:57:36,921 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,921 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:36,921 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,922 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,922 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,923 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,923 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12244
2018-06-28 17:57:36,923 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12244
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:57:36,923 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 3
2018-06-28 17:57:36,924 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:36,924 [myid:] - INFO  [main:QuorumUtil@135] - Checking ports 127.0.0.1:11239,127.0.0.1:11241,127.0.0.1:11243
2018-06-28 17:57:36,924 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:MBeanRegistry@104] - Failed to register MBean ReplicatedServer_id3
2018-06-28 17:57:36,924 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:QuorumPeer@898] - Failed to register with JMX
javax.management.InstanceAlreadyExistsException: org.apache.ZooKeeperService:name0=ReplicatedServer_id3
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.MBeanRegistry.register(MBeanRegistry.java:100)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:877)
2018-06-28 17:57:36,924 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:QuorumPeer@909] - LOOKING
2018-06-28 17:57:36,924 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:36,924 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:MBeanRegistry@104] - Failed to register MBean LeaderElection
2018-06-28 17:57:36,924 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:FastLeaderElection@795] - Failed to register with JMX
javax.management.InstanceAlreadyExistsException: org.apache.ZooKeeperService:name0=LeaderElection
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.MBeanRegistry.register(MBeanRegistry.java:100)
	at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:792)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:957)
2018-06-28 17:57:36,925 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:FastLeaderElection@813] - New election. My id =  3, proposed zxid=0x0
2018-06-28 17:57:36,925 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55197
2018-06-28 17:57:36,925 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55198
2018-06-28 17:57:36,925 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55197
2018-06-28 17:57:36,926 [myid:] - INFO  [/127.0.0.1:12242:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55199
2018-06-28 17:57:36,927 [myid:] - INFO  [Thread-35:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55197 (no session established for client)
2018-06-28 17:57:36,927 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,928 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,928 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,929 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,929 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,929 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,929 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,929 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,929 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,929 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:36,930 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:37,139 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:QuorumPeer@991] - LEADING
2018-06-28 17:57:37,139 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:37,139 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2
2018-06-28 17:57:37,139 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:37,139 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 226
2018-06-28 17:57:37,139 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6845178722145766903.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test6845178722145766903.junit.dir/version-2
2018-06-28 17:57:37,139 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4857187351159811304.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test4857187351159811304.junit.dir/version-2
2018-06-28 17:57:37,140 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 220
2018-06-28 17:57:37,140 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:37,140 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:Leader@380] - LEADING - LEADER ELECTION TOOK - 215
2018-06-28 17:57:37,140 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:MBeanRegistry@104] - Failed to register MBean Follower
2018-06-28 17:57:37,140 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:LearnerZooKeeperServer@117] - Failed to register with JMX
javax.management.InstanceAlreadyExistsException: org.apache.ZooKeeperService:name0=Follower
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.zookeeper.jmx.MBeanRegistry.register(MBeanRegistry.java:100)
	at org.apache.zookeeper.server.quorum.LearnerZooKeeperServer.registerJMX(LearnerZooKeeperServer.java:115)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:68)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:981)
2018-06-28 17:57:37,141 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:37,143 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55200:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@26851354
2018-06-28 17:57:37,143 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55201:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@5c1653c4
2018-06-28 17:57:37,146 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55200:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:57:37,146 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55201:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:57:37,146 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55200:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:57:37,146 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55201:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:57:37,146 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55201:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:37,146 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55200:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:37,147 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:57:37,147 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:57:37,149 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55201:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:57:37,149 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:Leader@964] - Have quorum of supporters, sids: [ 2,3 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:57:37,149 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55200:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:37,181 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:37,182 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55202
2018-06-28 17:57:37,182 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55202
2018-06-28 17:57:37,182 [myid:] - INFO  [Thread-38:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:37,183 [myid:] - INFO  [Thread-38:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55202 (no session established for client)
2018-06-28 17:57:37,184 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11239 is accepting client connections
2018-06-28 17:57:37,184 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11241
2018-06-28 17:57:37,184 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11241:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55203
2018-06-28 17:57:37,184 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11241:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55203
2018-06-28 17:57:37,185 [myid:] - INFO  [Thread-39:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:37,186 [myid:] - INFO  [Thread-39:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55203 (no session established for client)
2018-06-28 17:57:37,186 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11241 is accepting client connections
2018-06-28 17:57:37,186 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11243
2018-06-28 17:57:37,187 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11243:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55204
2018-06-28 17:57:37,187 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11243:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55204
2018-06-28 17:57:37,187 [myid:] - INFO  [Thread-40:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:37,188 [myid:] - INFO  [Thread-40:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55204 (no session established for client)
2018-06-28 17:57:37,188 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11243 is accepting client connections
2018-06-28 17:57:37,189 [myid:] - INFO  [main:JMXEnv@199] - JMXEnv.dump() follows
2018-06-28 17:57:37,191 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:37,191 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:37,191 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=Follower
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=Leader,name1=InMemoryDataTree
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2018-06-28 17:57:37,192 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=InMemoryDataTree
2018-06-28 17:57:37,193 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=Leader
2018-06-28 17:57:37,193 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:37,193 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:37,193 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=Follower,name1=InMemoryDataTree
2018-06-28 17:57:37,193 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:37,193 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2018-06-28 17:57:37,193 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2018-06-28 17:57:37,193 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2018-06-28 17:57:37,196 [myid:] - INFO  [main:JMXEnv@118] - expect:InMemoryDataTree
2018-06-28 17:57:37,196 [myid:] - INFO  [main:JMXEnv@121] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:37,196 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2018-06-28 17:57:37,196 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2018-06-28 17:57:37,196 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2018-06-28 17:57:37,196 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:57:37,196 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2018-06-28 17:57:37,196 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:37,197 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1
2018-06-28 17:57:37,198 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2018-06-28 17:57:37,199 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2
2018-06-28 17:57:37,199 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2018-06-28 17:57:37,199 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3
2018-06-28 17:57:37,199 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2018-06-28 17:57:37,199 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@173] - Connecting to follower:1
2018-06-28 17:57:37,199 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 17:57:37,199 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncBySnapThenDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:175)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:37,199 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:37,199 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:37,200 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:37,200 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:37,200 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:37,200 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:37,200 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:37,200 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:37,201 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:37,201 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:37,202 [myid:] - ERROR [/127.0.0.1:12240:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:37,202 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:37,203 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:37,202 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:37,203 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:37,203 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:37,203 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:37,203 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:37,204 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:37,202 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 17:57:37,202 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:37,204 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:37,202 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:37,204 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:37,202 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:37,205 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:37,204 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:37,205 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:37,204 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239 to exit thread
2018-06-28 17:57:37,557 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:37,557 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:37,557 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:37,557 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:37,557 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:37,557 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:37,592 [myid:] - INFO  [/127.0.0.1:12232:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:38,162 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:38,162 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:38,162 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:38,162 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:38,164 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11243 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@7fac631b
2018-06-28 17:57:38,166 [myid:] - INFO  [main-SendThread(localhost:11243):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11243. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:38,166 [myid:] - INFO  [main-SendThread(localhost:11243):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11243, initiating session
2018-06-28 17:57:38,166 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11243:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55205
2018-06-28 17:57:38,166 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11243:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55205
2018-06-28 17:57:38,167 [myid:] - INFO  [SyncThread:3:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:38,167 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:57:38,167 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:57:38,176 [myid:] - INFO  [CommitProcessor:3:ZooKeeperServer@694] - Established session 0x3000663b0640000 with negotiated timeout 30000 for client /127.0.0.1:55205
2018-06-28 17:57:38,176 [myid:] - INFO  [main-SendThread(localhost:11243):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11243, sessionid = 0x3000663b0640000, negotiated timeout = 30000
2018-06-28 17:57:38,176 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@179] - zk3 has session id 0x3000663b0640000
2018-06-28 17:57:38,179 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11239
2018-06-28 17:57:38,179 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:38,179 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11239
2018-06-28 17:57:38,181 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12240
2018-06-28 17:57:38,181 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:38,182 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55206
2018-06-28 17:57:38,182 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@909] - LOOKING
2018-06-28 17:57:38,182 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55206
2018-06-28 17:57:38,182 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:57:38,182 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:38,182 [myid:] - INFO  [/127.0.0.1:12242:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55207
2018-06-28 17:57:38,183 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:57:38,183 [myid:] - INFO  [Thread-41:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55206 (no session established for client)
2018-06-28 17:57:38,183 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55208
2018-06-28 17:57:38,183 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (3, 1)
2018-06-28 17:57:38,183 [myid:] - INFO  [/127.0.0.1:12244:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55209
2018-06-28 17:57:38,184 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55210
2018-06-28 17:57:38,184 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:38,184 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:38,185 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:38,185 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:38,185 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:57:38,186 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:38,186 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:38,186 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2
2018-06-28 17:57:38,186 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 5
2018-06-28 17:57:38,186 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:38,188 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55211:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@26851354
2018-06-28 17:57:38,188 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55211:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 peerLastZxid=0x0
2018-06-28 17:57:38,188 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55211:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:57:38,188 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55211:LearnerHandler@475] - Sending SNAP
2018-06-28 17:57:38,188 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55211:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x0  zxid of leader is 0x100000002sent zxid of db as 0x100000002
2018-06-28 17:57:38,188 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Learner@336] - Getting a snapshot from leader 0x100000002
2018-06-28 17:57:38,189 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FileTxnSnapLog@301] - Snapshotting: 0x100000002 to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2/snapshot.100000002
2018-06-28 17:57:38,191 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55211:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:38,208 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:38,433 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:38,434 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55212
2018-06-28 17:57:38,435 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55212
2018-06-28 17:57:38,435 [myid:] - INFO  [Thread-43:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:38,436 [myid:] - INFO  [Thread-43:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55212 (no session established for client)
2018-06-28 17:57:38,436 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11239 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@6e0e048a
2018-06-28 17:57:38,437 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:38,438 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11239, initiating session
2018-06-28 17:57:38,438 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55213
2018-06-28 17:57:38,438 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55213
2018-06-28 17:57:38,439 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@119] - Got zxid 0x100000003 expected 0x1
2018-06-28 17:57:38,439 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000003
2018-06-28 17:57:38,440 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x1000663b4740000 with negotiated timeout 30000 for client /127.0.0.1:55213
2018-06-28 17:57:38,440 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11239, sessionid = 0x1000663b4740000, negotiated timeout = 30000
2018-06-28 17:57:38,440 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@186] - zk1 has session id 0x1000663b4740000
2018-06-28 17:57:38,441 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=127.0.0.1:11239 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@5bc79255
2018-06-28 17:57:38,442 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:38,442 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11239, initiating session
2018-06-28 17:57:38,442 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55214
2018-06-28 17:57:38,443 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55214
2018-06-28 17:57:38,444 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x1000663b4740001 with negotiated timeout 30000 for client /127.0.0.1:55214
2018-06-28 17:57:38,444 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11239, sessionid = 0x1000663b4740001, negotiated timeout = 30000
2018-06-28 17:57:38,444 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@190] - zk2 has session id 0x1000663b4740001
2018-06-28 17:57:39,934 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:39,934 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:41,551 [myid:] - ERROR [LearnerHandler-/127.0.0.1:55200:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:57:41,552 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55200:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55200 ********
2018-06-28 17:57:43,566 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 17:57:43,566 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncBySnapThenDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:239)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:43,566 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:43,567 [myid:] - INFO  [main:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55213 which had sessionid 0x1000663b4740000
2018-06-28 17:57:43,568 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x1000663b4740000, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:57:43,568 [myid:] - INFO  [main:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55214 which had sessionid 0x1000663b4740001
2018-06-28 17:57:43,568 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:43,568 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:43,568 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:43,568 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:43,568 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:43,569 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:43,568 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:43,568 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x1000663b4740001, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:57:43,568 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:43,586 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:43,586 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:43,586 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:43,586 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:43,587 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:43,588 [myid:] - ERROR [/127.0.0.1:12240:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:43,589 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:43,591 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 17:57:43,591 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:43,591 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:43,591 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:43,590 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:43,592 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:43,590 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:43,593 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:43,589 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:43,593 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:43,589 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:43,594 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:43,592 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:43,595 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:43,592 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:43,595 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:43,591 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239 to exit thread
2018-06-28 17:57:43,595 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@240] - Shutting down s1
2018-06-28 17:57:44,198 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:44,198 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:44,598 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:45,088 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:45,088 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11239: Connection refused
2018-06-28 17:57:45,200 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:45,200 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11239: Connection refused
2018-06-28 17:57:46,326 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:46,326 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11239: Connection refused
2018-06-28 17:57:47,110 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:47,111 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11239: Connection refused
2018-06-28 17:57:47,950 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:47,950 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11239: Connection refused
2018-06-28 17:57:48,357 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:48,358 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11239: Connection refused
2018-06-28 17:57:49,354 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:49,355 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11239: Connection refused
2018-06-28 17:57:49,580 [myid:] - ERROR [LearnerHandler-/127.0.0.1:55211:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:57:49,581 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55211:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55211 ********
2018-06-28 17:57:49,806 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:49,806 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1166] - Socket error occurred: localhost/127.0.0.1:11239: Connection refused
2018-06-28 17:57:50,664 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11239
2018-06-28 17:57:50,665 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:50,665 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11239
2018-06-28 17:57:50,667 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2/snapshot.100000002
2018-06-28 17:57:50,744 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12240
2018-06-28 17:57:50,745 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:50,746 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55223
2018-06-28 17:57:50,746 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@909] - LOOKING
2018-06-28 17:57:50,746 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55223
2018-06-28 17:57:50,746 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100001045
2018-06-28 17:57:50,747 [myid:] - INFO  [Thread-45:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55223 (no session established for client)
2018-06-28 17:57:50,747 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100001045 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:50,747 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:57:50,747 [myid:] - INFO  [/127.0.0.1:12242:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55224
2018-06-28 17:57:50,748 [myid:] - INFO  [/127.0.0.1:12244:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55225
2018-06-28 17:57:50,748 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (3, 1)
2018-06-28 17:57:50,748 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55226
2018-06-28 17:57:50,749 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55227
2018-06-28 17:57:50,749 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:50,749 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100001045 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:50,750 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:50,750 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100001045 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:57:50,750 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:50,750 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:50,750 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:50,750 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2
2018-06-28 17:57:50,750 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 4
2018-06-28 17:57:50,750 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:50,751 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55228:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@26851354
2018-06-28 17:57:50,752 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55228:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x100002f4b minCommittedLog=0x100002d57 peerLastZxid=0x100001045
2018-06-28 17:57:50,752 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55228:LearnerHandler@468] - Unhandled proposal scenario
2018-06-28 17:57:50,752 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55228:LearnerHandler@475] - Sending SNAP
2018-06-28 17:57:50,752 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55228:LearnerHandler@499] - Sending snapshot last zxid of peer is 0x100001045  zxid of leader is 0x100002f4bsent zxid of db as 0x100002f4b
2018-06-28 17:57:50,752 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Learner@336] - Getting a snapshot from leader 0x100002f4b
2018-06-28 17:57:50,758 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:50,759 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11239, initiating session
2018-06-28 17:57:50,759 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55229
2018-06-28 17:57:50,759 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@383] - Exception causing close of session 0x0: ZooKeeperServer not running
2018-06-28 17:57:50,759 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55229 (no session established for client)
2018-06-28 17:57:50,759 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1162] - Unable to read additional data from server sessionid 0x1000663b4740001, likely server has closed socket, closing socket connection and attempting reconnect
2018-06-28 17:57:50,792 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FileTxnSnapLog@301] - Snapshotting: 0x100002f4b to /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2/snapshot.100002f4b
2018-06-28 17:57:50,827 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55228:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:50,827 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Learner@387] - Got zxid 0x100002f4c expected 0x1
2018-06-28 17:57:50,828 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100002f4c
2018-06-28 17:57:50,870 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@119] - Got zxid 0x100002f56 expected 0x1
2018-06-28 17:57:51,007 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:51,008 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55230
2018-06-28 17:57:51,008 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55230
2018-06-28 17:57:51,008 [myid:] - INFO  [Thread-47:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:51,010 [myid:] - INFO  [Thread-47:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55230 (no session established for client)
2018-06-28 17:57:51,320 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 17:57:51,321 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncBySnapThenDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:247)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:57:51,321 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:51,321 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:57:51,321 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:57:51,321 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:57:51,321 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:57:51,322 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:57:51,322 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:57:51,323 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:51,323 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:57:51,324 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:57:51,324 [myid:] - ERROR [/127.0.0.1:12240:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:57:51,325 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:51,326 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:51,327 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:51,325 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:51,327 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:51,325 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:57:51,327 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:51,328 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:51,325 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:51,328 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:51,325 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:51,328 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:51,327 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:51,327 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 17:57:51,326 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:57:51,328 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239 to exit thread
2018-06-28 17:57:51,329 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:57:51,329 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:57:51,377 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:57:51,377 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:57:51,378 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:57:51,378 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:57:51,678 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11239
2018-06-28 17:57:51,679 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:57:51,679 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11239
2018-06-28 17:57:51,680 [myid:] - INFO  [main:FileSnap@86] - Reading snapshot /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2/snapshot.100002f4b
2018-06-28 17:57:51,725 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12240
2018-06-28 17:57:51,725 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:51,726 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55231
2018-06-28 17:57:51,726 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@909] - LOOKING
2018-06-28 17:57:51,726 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55231
2018-06-28 17:57:51,726 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x100002f87
2018-06-28 17:57:51,726 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100002f87 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:51,726 [myid:] - INFO  [Thread-48:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55231 (no session established for client)
2018-06-28 17:57:51,727 [myid:] - INFO  [/127.0.0.1:12242:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55232
2018-06-28 17:57:51,727 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (2, 1)
2018-06-28 17:57:51,727 [myid:] - INFO  [/127.0.0.1:12244:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55234
2018-06-28 17:57:51,727 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@347] - Have smaller server identifier, so dropping the connection: (3, 1)
2018-06-28 17:57:51,727 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55233
2018-06-28 17:57:51,728 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55235
2018-06-28 17:57:51,728 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:51,728 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100002f87 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:51,729 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), FOLLOWING (n.state), 2 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:51,729 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x100002f87 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x1 (n.peerEpoch) LEADING (my state)
2018-06-28 17:57:51,729 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:57:51,729 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LEADING (n.state), 3 (n.sid), 0x1 (n.peerEpoch) FOLLOWING (my state)
2018-06-28 17:57:51,729 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@979] - FOLLOWING
2018-06-28 17:57:51,729 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test1731734382040257514.junit.dir/version-2
2018-06-28 17:57:51,729 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 3
2018-06-28 17:57:51,729 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:57:51,730 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@26851354
2018-06-28 17:57:51,730 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x100002faf minCommittedLog=0x100002dbb peerLastZxid=0x100002f87
2018-06-28 17:57:51,730 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@475] - Sending DIFF
2018-06-28 17:57:51,730 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Learner@332] - Getting a diff from the leader 0x100002faf
2018-06-28 17:57:51,731 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Learner@387] - Got zxid 0x100002f88 expected 0x1
2018-06-28 17:57:51,732 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:57:51,733 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100002f88
2018-06-28 17:57:51,773 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:51,773 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11239, initiating session
2018-06-28 17:57:51,773 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55237
2018-06-28 17:57:51,774 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:ZooKeeperServer@942] - Client attempting to renew session 0x1000663b4740000 at /127.0.0.1:55237
2018-06-28 17:57:51,774 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:Learner@108] - Revalidating client: 0x1000663b4740000
2018-06-28 17:57:51,775 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@694] - Established session 0x1000663b4740000 with negotiated timeout 30000 for client /127.0.0.1:55237
2018-06-28 17:57:51,775 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11239, sessionid = 0x1000663b4740000, negotiated timeout = 30000
2018-06-28 17:57:51,778 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@119] - Got zxid 0x100002fb0 expected 0x1
2018-06-28 17:57:51,977 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:57:51,978 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55238
2018-06-28 17:57:51,978 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55238
2018-06-28 17:57:51,979 [myid:] - INFO  [Thread-50:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:57:51,980 [myid:] - INFO  [Thread-50:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55238 (no session established for client)
2018-06-28 17:57:51,980 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@250] - Setting up server: 1
2018-06-28 17:57:52,058 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:57:52,059 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11239, initiating session
2018-06-28 17:57:52,059 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55239
2018-06-28 17:57:52,059 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:ZooKeeperServer@942] - Client attempting to renew session 0x1000663b4740001 at /127.0.0.1:55239
2018-06-28 17:57:52,059 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:Learner@108] - Revalidating client: 0x1000663b4740001
2018-06-28 17:57:52,060 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:ZooKeeperServer@694] - Established session 0x1000663b4740001 with negotiated timeout 30000 for client /127.0.0.1:55239
2018-06-28 17:57:52,060 [myid:] - INFO  [main-SendThread(localhost:11239):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11239, sessionid = 0x1000663b4740001, negotiated timeout = 30000
2018-06-28 17:57:52,326 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:57:53,751 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:57:53,751 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:57:57,285 [myid:] - ERROR [LearnerHandler-/127.0.0.1:55228:LearnerHandler@648] - Unexpected exception causing shutdown while sock still open
java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:99)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:559)
2018-06-28 17:57:57,285 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55228:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55228 ********
2018-06-28 17:58:22,375 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x1000663b4740000
2018-06-28 17:58:22,382 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x1000663b4740000 closed
2018-06-28 17:58:22,382 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x1000663b4740000
2018-06-28 17:58:22,382 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55237 which had sessionid 0x1000663b4740000
2018-06-28 17:58:22,383 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x1000663b4740001
2018-06-28 17:58:22,384 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x1000663b4740001 closed
2018-06-28 17:58:22,384 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55239 which had sessionid 0x1000663b4740001
2018-06-28 17:58:22,384 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x1000663b4740001
2018-06-28 17:58:22,387 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x3000663b0640000
2018-06-28 17:58:22,416 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x3000663b0640000 closed
2018-06-28 17:58:22,416 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x3000663b0640000
2018-06-28 17:58:22,416 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11243:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55205 which had sessionid 0x3000663b0640000
2018-06-28 17:58:22,416 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 17:58:22,417 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncBySnapThenDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:58:22,417 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:58:22,417 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:58:22,417 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:58:22,418 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:58:22,418 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:58:22,418 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:58:22,418 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:58:22,423 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:58:22,423 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:58:22,424 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11239:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:58:22,424 [myid:] - ERROR [/127.0.0.1:12240:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:58:22,425 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 2, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:58:22,426 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:58:22,426 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:58:22,426 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239
2018-06-28 17:58:22,426 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:58:22,426 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:58:22,427 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:58:22,425 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 1, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:58:22,427 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:58:22,425 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 1, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:58:22,428 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:58:22,425 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:58:22,427 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:58:22,428 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:58:22,427 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:58:22,428 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:58:22,426 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239 to exit thread
2018-06-28 17:58:22,428 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:58:23,363 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:58:23,363 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:58:23,363 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:58:23,363 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11239:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:58:23,364 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241
2018-06-28 17:58:23,364 [myid:] - INFO  [main:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1026)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncBySnapThenDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:58:23,364 [myid:] - INFO  [main:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:58:23,364 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:58:23,364 [myid:] - INFO  [main:FollowerRequestProcessor@107] - Shutting down
2018-06-28 17:58:23,364 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:58:23,364 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@97] - FollowerRequestProcessor exited loop!
2018-06-28 17:58:23,365 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:58:23,365 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:58:23,385 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:58:23,385 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:58:23,386 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11241:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:58:23,386 [myid:] - ERROR [/127.0.0.1:12242:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:58:23,387 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 2, my id = 3, error = 
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:58:23,387 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:58:23,387 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241
2018-06-28 17:58:23,387 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1025] - Connection broken for id 3, my id = 2, error = 
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1010)
2018-06-28 17:58:23,387 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1028] - Interrupting SendWorker
2018-06-28 17:58:23,387 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:58:23,388 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:58:23,387 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241 to exit thread
2018-06-28 17:58:23,387 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@941] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1094)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$700(QuorumCnxManager.java:74)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:929)
2018-06-28 17:58:23,388 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@951] - Send worker leaving thread
2018-06-28 17:58:23,429 [myid:] - INFO  [/127.0.0.1:12240:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:58:24,366 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:Follower@169] - shutdown called
java.lang.Exception: shutdown Follower
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:169)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:985)
2018-06-28 17:58:24,366 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:FollowerZooKeeperServer@140] - Shutting down
2018-06-28 17:58:24,366 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:58:24,366 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11241:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:58:24,367 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243
2018-06-28 17:58:24,367 [myid:] - INFO  [main:Leader@520] - Shutting down
2018-06-28 17:58:24,367 [myid:] - INFO  [main:Leader@526] - Shutdown called
java.lang.Exception: shutdown Leader! reason: quorum Peer shutdown
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:526)
	at org.apache.zookeeper.server.quorum.QuorumPeer.shutdown(QuorumPeer.java:1023)
	at org.apache.zookeeper.test.QuorumUtil.shutdown(QuorumUtil.java:228)
	at org.apache.zookeeper.test.QuorumUtil.shutdownAll(QuorumUtil.java:215)
	at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncBySnapThenDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:55)
	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:53)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:38)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:536)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1205)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1048)
2018-06-28 17:58:24,367 [myid:] - INFO  [main:ZooKeeperServer@502] - shutting down
2018-06-28 17:58:24,367 [myid:] - INFO  [LearnerCnxAcceptor-/127.0.0.1:12243:Leader$LearnerCnxAcceptor@340] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2018-06-28 17:58:24,367 [myid:] - INFO  [main:SessionTrackerImpl@226] - Shutting down
2018-06-28 17:58:24,368 [myid:] - INFO  [main:PrepRequestProcessor@769] - Shutting down
2018-06-28 17:58:24,368 [myid:] - INFO  [main:ProposalRequestProcessor@88] - Shutting down
2018-06-28 17:58:24,368 [myid:] - INFO  [main:CommitProcessor@184] - Shutting down
2018-06-28 17:58:24,368 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@144] - PrepRequestProcessor exited loop!
2018-06-28 17:58:24,368 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@153] - CommitProcessor exited loop!
2018-06-28 17:58:24,368 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@685] - Shutting down
2018-06-28 17:58:24,369 [myid:] - INFO  [main:FinalRequestProcessor@403] - shutdown of request processor complete
2018-06-28 17:58:24,369 [myid:] - INFO  [main:SyncRequestProcessor@208] - Shutting down
2018-06-28 17:58:24,369 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@186] - SyncRequestProcessor exited!
2018-06-28 17:58:24,389 [myid:] - INFO  [/127.0.0.1:12242:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:58:24,393 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55201:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55201 ********
2018-06-28 17:58:24,393 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@661] - ******* GOODBYE /127.0.0.1:55236 ********
2018-06-28 17:58:24,394 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55201:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:58:24,394 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11243:NIOServerCnxnFactory@242] - NIOServerCnxn factory exited run method
2018-06-28 17:58:24,394 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@673] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:671)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:664)
2018-06-28 17:58:24,394 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:QuorumPeer@997] - Unexpected exception
java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:474)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:994)
2018-06-28 17:58:24,395 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:Leader@520] - Shutting down
2018-06-28 17:58:24,394 [myid:] - ERROR [/127.0.0.1:12244:QuorumCnxManager$Listener@760] - Exception while listening
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener.run(QuorumCnxManager.java:741)
2018-06-28 17:58:24,395 [myid:] - WARN  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243:QuorumPeer@1009] - QuorumPeer main thread exited
2018-06-28 17:58:24,395 [myid:] - INFO  [main:QuorumUtil@231] - Shutting down leader election QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243
2018-06-28 17:58:24,395 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11243 to exit thread
2018-06-28 17:58:24,395 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11239
2018-06-28 17:58:24,396 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11239 is no longer accepting client connections
2018-06-28 17:58:24,396 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11241
2018-06-28 17:58:24,396 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11241 is no longer accepting client connections
2018-06-28 17:58:24,396 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11243
2018-06-28 17:58:24,397 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11243 is no longer accepting client connections
2018-06-28 17:58:24,397 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 37212
2018-06-28 17:58:24,397 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 68
2018-06-28 17:58:24,397 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testResyncBySnapThenDiffAfterFollowerCrashes
2018-06-28 17:58:24,397 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testResyncBySnapThenDiffAfterFollowerCrashes
2018-06-28 17:58:24,397 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testResyncBySnapThenDiffAfterFollowerCrashes
2018-06-28 17:58:24,398 [myid:] - INFO  [main:ZKTestCase$1@59] - STARTING testFollowerWatcherResync
2018-06-28 17:58:24,398 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@53] - RUNNING TEST METHOD testFollowerWatcherResync
2018-06-28 17:58:24,404 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11245
2018-06-28 17:58:24,404 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11246
2018-06-28 17:58:24,404 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,405 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11247
2018-06-28 17:58:24,405 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11248
2018-06-28 17:58:24,405 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,405 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11249
2018-06-28 17:58:24,405 [myid:] - INFO  [main:PortAssignment@32] - assigning port 11250
2018-06-28 17:58:24,405 [myid:] - INFO  [main:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,406 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 1; public port 11245
2018-06-28 17:58:24,406 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:58:24,406 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11245
2018-06-28 17:58:24,406 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 2; public port 11247
2018-06-28 17:58:24,406 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:58:24,406 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11247
2018-06-28 17:58:24,407 [myid:] - INFO  [main:QuorumUtil@110] - Creating QuorumPeer 3; public port 11249
2018-06-28 17:58:24,407 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:58:24,407 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11249
2018-06-28 17:58:24,407 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:58:24,408 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:58:24,408 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:58:24,408 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:58:24,408 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:58:24,408 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:58:24,408 [myid:] - INFO  [main:QuorumUtil@227] - Shutting down quorum peer QuorumPeer
2018-06-28 17:58:24,408 [myid:] - INFO  [main:QuorumUtil@234] - No election available to shutdown QuorumPeer
2018-06-28 17:58:24,408 [myid:] - INFO  [main:QuorumUtil@236] - Waiting for QuorumPeer to exit thread
2018-06-28 17:58:24,408 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11245
2018-06-28 17:58:24,409 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11245 is no longer accepting client connections
2018-06-28 17:58:24,409 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11247
2018-06-28 17:58:24,409 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11247 is no longer accepting client connections
2018-06-28 17:58:24,409 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11249
2018-06-28 17:58:24,409 [myid:] - INFO  [main:QuorumUtil@220] - 127.0.0.1:11249 is no longer accepting client connections
2018-06-28 17:58:24,409 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 1; public port 11245
2018-06-28 17:58:24,410 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:58:24,410 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11245
2018-06-28 17:58:24,410 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:58:24,411 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:58:24,412 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12246
2018-06-28 17:58:24,412 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 1
2018-06-28 17:58:24,413 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 2; public port 11247
2018-06-28 17:58:24,413 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:58:24,413 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@909] - LOOKING
2018-06-28 17:58:24,413 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11247
2018-06-28 17:58:24,413 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:FastLeaderElection@813] - New election. My id =  1, proposed zxid=0x0
2018-06-28 17:58:24,413 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:58:24,414 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,414 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 2 at election address /127.0.0.1:12248
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:58:24,414 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,414 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:58:24,414 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:58:24,415 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,415 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12248
2018-06-28 17:58:24,416 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 2
2018-06-28 17:58:24,416 [myid:] - INFO  [main:QuorumUtil@186] - Creating QuorumPeer 3; public port 11249
2018-06-28 17:58:24,416 [myid:] - INFO  [main:ServerCnxnFactory@117] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2018-06-28 17:58:24,416 [myid:] - INFO  [main:NIOServerCnxnFactory@89] - binding to port 0.0.0.0/0.0.0.0:11249
2018-06-28 17:58:24,416 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:QuorumPeer@909] - LOOKING
2018-06-28 17:58:24,417 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:FastLeaderElection@813] - New election. My id =  2, proposed zxid=0x0
2018-06-28 17:58:24,417 [myid:] - INFO  [main:QuorumPeer@668] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:58:24,417 [myid:] - INFO  [/127.0.0.1:12246:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55249
2018-06-28 17:58:24,418 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,418 [myid:] - INFO  [main:QuorumPeer@683] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2018-06-28 17:58:24,418 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 1 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,418 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:58:24,418 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,419 [myid:] - INFO  [WorkerSender[myid=2]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,419 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,419 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,420 [myid:] - INFO  [ListenerThread:QuorumCnxManager$Listener@736] - My election bind port: /127.0.0.1:12250
2018-06-28 17:58:24,420 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@584] - Cannot open channel to 3 at election address /127.0.0.1:12250
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:558)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:534)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:454)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:435)
	at java.lang.Thread.run(Thread.java:748)
2018-06-28 17:58:24,420 [myid:] - INFO  [main:QuorumUtil@132] - Started QuorumPeer 3
2018-06-28 17:58:24,420 [myid:] - INFO  [main:QuorumUtil@135] - Checking ports 127.0.0.1:11245,127.0.0.1:11247,127.0.0.1:11249
2018-06-28 17:58:24,420 [myid:] - INFO  [WorkerSender[myid=1]:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,420 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11245
2018-06-28 17:58:24,421 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11249:QuorumPeer@909] - LOOKING
2018-06-28 17:58:24,421 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11249:FastLeaderElection@813] - New election. My id =  3, proposed zxid=0x0
2018-06-28 17:58:24,421 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55252
2018-06-28 17:58:24,421 [myid:] - INFO  [/127.0.0.1:12246:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55253
2018-06-28 17:58:24,421 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55252
2018-06-28 17:58:24,422 [myid:] - INFO  [/127.0.0.1:12248:QuorumCnxManager$Listener@743] - Received connection request /127.0.0.1:55254
2018-06-28 17:58:24,423 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,423 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,423 [myid:] - INFO  [Thread-52:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55252 (no session established for client)
2018-06-28 17:58:24,423 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,424 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,424 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,424 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,424 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,424 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,424 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,424 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,424 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@595] - Notification: 1 (message format version), 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 2 (n.sid), 0x0 (n.peerEpoch) LOOKING (my state)
2018-06-28 17:58:24,632 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@163] - SessionTrackerImpl exited loop!
2018-06-28 17:58:24,632 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11249:QuorumPeer@991] - LEADING
2018-06-28 17:58:24,632 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer@979] - FOLLOWING
2018-06-28 17:58:24,632 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:QuorumPeer@979] - FOLLOWING
2018-06-28 17:58:24,632 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3187743027906543946.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test3187743027906543946.junit.dir/version-2
2018-06-28 17:58:24,632 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11249:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7064276827652238447.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test7064276827652238447.junit.dir/version-2
2018-06-28 17:58:24,633 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 220
2018-06-28 17:58:24,633 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:ZooKeeperServer@174] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test431551420057746970.junit.dir/version-2 snapdir /Users/hanm/Desktop/projects/git/apache/zookeeper/build/test/tmp/test431551420057746970.junit.dir/version-2
2018-06-28 17:58:24,633 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11249:Leader@380] - LEADING - LEADER ELECTION TOOK - 212
2018-06-28 17:58:24,633 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 216
2018-06-28 17:58:24,633 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,634 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:QuorumPeer$QuorumServer@184] - Resolved hostname: 127.0.0.1 to address: /127.0.0.1
2018-06-28 17:58:24,636 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55255:LearnerHandler@346] - Follower sid: 1 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@6659daa7
2018-06-28 17:58:24,636 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55256:LearnerHandler@346] - Follower sid: 2 : info : org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer@6dc94e26
2018-06-28 17:58:24,638 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55255:LearnerHandler@401] - Synchronizing with Follower sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:58:24,638 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55256:LearnerHandler@401] - Synchronizing with Follower sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2018-06-28 17:58:24,638 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55255:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:58:24,638 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55256:LearnerHandler@410] - leader and follower are in sync, zxid=0x0
2018-06-28 17:58:24,639 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55256:LearnerHandler@475] - Sending DIFF
2018-06-28 17:58:24,638 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55255:LearnerHandler@475] - Sending DIFF
2018-06-28 17:58:24,639 [myid:] - INFO  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:58:24,639 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Learner@332] - Getting a diff from the leader 0x0
2018-06-28 17:58:24,642 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55256:LearnerHandler@535] - Received NEWLEADER-ACK message from 2
2018-06-28 17:58:24,642 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55255:LearnerHandler@535] - Received NEWLEADER-ACK message from 1
2018-06-28 17:58:24,642 [myid:] - INFO  [QuorumPeer[myid=3]/0:0:0:0:0:0:0:0:11249:Leader@964] - Have quorum of supporters, sids: [ 2,3 ]; starting up and setting last processed zxid: 0x100000000
2018-06-28 17:58:24,681 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11245
2018-06-28 17:58:24,682 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55257
2018-06-28 17:58:24,682 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55257
2018-06-28 17:58:24,683 [myid:] - INFO  [Thread-55:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:58:24,684 [myid:] - INFO  [Thread-55:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55257 (no session established for client)
2018-06-28 17:58:24,684 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11245 is accepting client connections
2018-06-28 17:58:24,685 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11247
2018-06-28 17:58:24,685 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11247:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55258
2018-06-28 17:58:24,685 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11247:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55258
2018-06-28 17:58:24,686 [myid:] - INFO  [Thread-56:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:58:24,687 [myid:] - INFO  [Thread-56:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55258 (no session established for client)
2018-06-28 17:58:24,687 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11247 is accepting client connections
2018-06-28 17:58:24,687 [myid:] - INFO  [main:FourLetterWordMain@65] - connecting to 127.0.0.1 11249
2018-06-28 17:58:24,687 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11249:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55259
2018-06-28 17:58:24,688 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11249:NIOServerCnxn@908] - Processing stat command from /127.0.0.1:55259
2018-06-28 17:58:24,688 [myid:] - INFO  [Thread-57:NIOServerCnxn$StatCommand@687] - Stat command output
2018-06-28 17:58:24,689 [myid:] - INFO  [Thread-57:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55259 (no session established for client)
2018-06-28 17:58:24,689 [myid:] - INFO  [main:QuorumUtil@139] - 127.0.0.1:11249 is accepting client connections
2018-06-28 17:58:24,690 [myid:] - INFO  [main:JMXEnv@199] - JMXEnv.dump() follows
2018-06-28 17:58:24,691 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:58:24,692 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:58:24,693 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2018-06-28 17:58:24,693 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2018-06-28 17:58:24,693 [myid:] - INFO  [main:JMXEnv@208] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@118] - expect:InMemoryDataTree
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@121] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:58:24,695 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:58:24,696 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id1
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id2
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@118] - expect:name0=ReplicatedServer_id3
2018-06-28 17:58:24,697 [myid:] - INFO  [main:JMXEnv@121] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2018-06-28 17:58:24,697 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@580] - Connecting to follower:1
2018-06-28 17:58:24,698 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=localhost:11245 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@72b6cbcc
2018-06-28 17:58:24,704 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/127.0.0.1:11245. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:58:24,704 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@879] - Socket connection established to localhost/127.0.0.1:11245, initiating session
2018-06-28 17:58:24,704 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /127.0.0.1:55260
2018-06-28 17:58:24,704 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:ZooKeeperServer@949] - Client attempting to establish new session at /127.0.0.1:55260
2018-06-28 17:58:24,705 [myid:] - INFO  [SyncThread:3:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:58:24,706 [myid:] - WARN  [QuorumPeer[myid=2]/0:0:0:0:0:0:0:0:11247:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:58:24,706 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:Follower@119] - Got zxid 0x100000001 expected 0x1
2018-06-28 17:58:24,706 [myid:] - INFO  [SyncThread:2:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:58:24,706 [myid:] - INFO  [SyncThread:1:FileTxnLog@213] - Creating new log file: log.100000001
2018-06-28 17:58:24,708 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x100066469e80000 with negotiated timeout 30000 for client /127.0.0.1:55260
2018-06-28 17:58:24,708 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/127.0.0.1:11245, sessionid = 0x100066469e80000, negotiated timeout = 30000
2018-06-28 17:58:24,710 [myid:] - INFO  [main:ZooKeeper@442] - Initiating client connection, connectString=localhost:11245 sessionTimeout=30000 watcher=org.apache.zookeeper.test.FollowerResyncConcurrencyTest$MyWatcher@a7e666
2018-06-28 17:58:24,711 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:11245. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:58:24,711 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@879] - Socket connection established to localhost/0:0:0:0:0:0:0:1:11245, initiating session
2018-06-28 17:58:24,711 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /0:0:0:0:0:0:0:1:55261
2018-06-28 17:58:24,712 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:ZooKeeperServer@949] - Client attempting to establish new session at /0:0:0:0:0:0:0:1:55261
2018-06-28 17:58:24,712 [myid:] - INFO  [CommitProcessor:1:ZooKeeperServer@694] - Established session 0x100066469e80001 with negotiated timeout 30000 for client /0:0:0:0:0:0:0:1:55261
2018-06-28 17:58:24,713 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/0:0:0:0:0:0:0:1:11245, sessionid = 0x100066469e80001, negotiated timeout = 30000
2018-06-28 17:58:24,714 [myid:] - INFO  [main:ClientCnxnSocketNIO@383] - testableCloseSocket() called
2018-06-28 17:58:24,715 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@376] - Unable to read additional data from client sessionid 0x100066469e80001, likely client has closed socket
2018-06-28 17:58:24,715 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@1056] - Closed socket connection for client /0:0:0:0:0:0:0:1:55261 which had sessionid 0x100066469e80001
2018-06-28 17:58:24,813 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:58:24,813 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:58:24,813 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:58:24,813 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@409] - WorkerReceiver is down
2018-06-28 17:58:24,813 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:58:24,813 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@440] - WorkerSender is down
2018-06-28 17:58:25,402 [myid:] - INFO  [/127.0.0.1:12244:QuorumCnxManager$Listener@773] - Leaving listener
2018-06-28 17:58:34,716 [myid:] - WARN  [main-SendThread(localhost:11245):ClientCnxn$SendThread@1168] - Session 0x100066469e80001 for server localhost/0:0:0:0:0:0:0:1:11245, unexpected error, closing socket connection and attempting reconnect
java.nio.channels.CancelledKeyException
	at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:73)
	at sun.nio.ch.SelectionKeyImpl.interestOps(SelectionKeyImpl.java:77)
	at org.apache.zookeeper.ClientCnxnSocketNIO.enableWrite(ClientCnxnSocketNIO.java:389)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:373)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1145)
2018-06-28 17:58:36,204 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@1029] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:11245. Will not attempt to authenticate using SASL (unknown error)
2018-06-28 17:58:36,204 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@879] - Socket connection established to localhost/0:0:0:0:0:0:0:1:11245, initiating session
2018-06-28 17:58:36,204 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxnFactory@215] - Accepted socket connection from /0:0:0:0:0:0:0:1:55262
2018-06-28 17:58:36,213 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:ZooKeeperServer@942] - Client attempting to renew session 0x100066469e80001 at /0:0:0:0:0:0:0:1:55262
2018-06-28 17:58:36,213 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:Learner@108] - Revalidating client: 0x100066469e80001
2018-06-28 17:58:36,214 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11245:ZooKeeperServer@694] - Established session 0x100066469e80001 with negotiated timeout 30000 for client /0:0:0:0:0:0:0:1:55262
2018-06-28 17:58:36,214 [myid:] - INFO  [main-SendThread(localhost:11245):ClientCnxn$SendThread@1303] - Session establishment complete on server localhost/0:0:0:0:0:0:0:1:11245, sessionid = 0x100066469e80001, negotiated timeout = 30000
2018-06-28 17:58:41,220 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x100066469e80000
2018-06-28 17:58:41,228 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x100066469e80000 closed
2018-06-28 17:58:41,228 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x100066469e80000
2018-06-28 17:58:41,228 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@1056] - Closed socket connection for client /127.0.0.1:55260 which had sessionid 0x100066469e80000
2018-06-28 17:58:41,229 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x100066469e80001
2018-06-28 17:58:41,230 [myid:] - INFO  [main:ZooKeeper@693] - Session: 0x100066469e80001 closed
2018-06-28 17:58:41,230 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11245:NIOServerCnxn@1056] - Closed socket connection for client /0:0:0:0:0:0:0:1:55262 which had sessionid 0x100066469e80001
2018-06-28 17:58:41,230 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@522] - EventThread shut down for session: 0x100066469e80001
2018-06-28 17:58:41,230 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@58] - Memory used 42184
2018-06-28 17:58:41,230 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@63] - Number of threads 106
2018-06-28 17:58:41,231 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@78] - FINISHED TEST METHOD testFollowerWatcherResync
2018-06-28 17:58:41,231 [myid:] - INFO  [main:ZKTestCase$1@69] - SUCCEEDED testFollowerWatcherResync
2018-06-28 17:58:41,231 [myid:] - INFO  [main:ZKTestCase$1@64] - FINISHED testFollowerWatcherResync
------------- ---------------- ---------------

Testcase: testLaggingFollowerResyncsUnderNewEpoch took 2.737 sec
Testcase: testResyncByDiffAfterFollowerCrashes took 16.362 sec
Testcase: testFollowerSendsLastZxid took 0.313 sec
Testcase: testResyncBySnapThenDiffAfterFollowerCrashes took 47.499 sec
Testcase: testFollowerWatcherResync took 16.833 sec
